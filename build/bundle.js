var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function s(){return Object.create(null)}function i(e){e.forEach(n)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a;function c(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function l(e,t,n){e.$$.on_destroy.push(c(t,n))}function u(e,t,n,s){if(e){const i=h(e,t,n,s);return e[0](i)}}function h(e,t,n,s){return e[1]&&s?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](s(t))):n.ctx}function p(e,t,n,s){if(e[2]&&s){const i=e[2](s(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let s=0;s<n;s+=1)e[s]=t.dirty[s]|i[s];return e}return t.dirty|i}return t.dirty}function f(e,t,n,s,i,r){if(i){const o=h(t,n,s,r);e.p(o,i)}}function d(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}const m="undefined"!=typeof window;let g=m?()=>window.performance.now():()=>Date.now(),v=m?e=>requestAnimationFrame(e):e;const w=new Set;function y(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&v(y)}function x(e){let t;return 0===w.size&&v(y),{promise:new Promise((n=>{w.add(t={c:e,f:n})})),abort(){w.delete(t)}}}function b(e,t){e.appendChild(t)}function _(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function $(e){const t=A("style");return function(e,t){b(e.head||e,t),t.sheet}(_(e),t),t.sheet}function k(e,t,n){e.insertBefore(t,n||null)}function M(e){e.parentNode&&e.parentNode.removeChild(e)}function A(e){return document.createElement(e)}function E(e){return document.createTextNode(e)}function I(){return E(" ")}function C(){return E("")}function T(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function O(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function j(e){return function(t){t.target===this&&e.call(this,t)}}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function z(e){return""===e?null:+e}function P(e,t){t=""+t,e.data!==t&&(e.data=t)}function F(e,t){e.value=null==t?"":t}function R(e,t,n,s){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function L(e,t,n){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}const N=new Map;let B,W=0;function H(e,t,n,s,i,r,o,a=0){const c=16.666/s;let l="{\n";for(let e=0;e<=1;e+=c){const s=t+(n-t)*r(e);l+=100*e+`%{${o(s,1-s)}}\n`}const u=l+`100% {${o(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=_(e),{stylesheet:f,rules:d}=N.get(p)||function(e,t){const n={stylesheet:$(t),rules:{}};return N.set(e,n),n}(p,e);d[h]||(d[h]=!0,f.insertRule(`@keyframes ${h} ${u}`,f.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${s}ms linear ${i}ms 1 both`,W+=1,h}function X(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-s.length;i&&(e.style.animation=s.join(", "),W-=i,W||v((()=>{W||(N.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&M(t)})),N.clear())})))}function q(e){B=e}function Y(){if(!B)throw new Error("Function called outside component initialization");return B}function V(e){Y().$$.on_mount.push(e)}function U(e){Y().$$.on_destroy.push(e)}function G(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const D=[],J=[];let Z=[];const K=[],Q=Promise.resolve();let ee=!1;function te(e){Z.push(e)}function ne(e){K.push(e)}const se=new Set;let ie,re=0;function oe(){if(0!==re)return;const e=B;do{try{for(;re<D.length;){const e=D[re];re++,q(e),ae(e.$$)}}catch(e){throw D.length=0,re=0,e}for(q(null),D.length=0,re=0;J.length;)J.pop()();for(let e=0;e<Z.length;e+=1){const t=Z[e];se.has(t)||(se.add(t),t())}Z.length=0}while(D.length);for(;K.length;)K.pop()();ee=!1,se.clear(),q(e)}function ae(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}function ce(){return ie||(ie=Promise.resolve(),ie.then((()=>{ie=null}))),ie}function le(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,s,t),i}(`${t?"intro":"outro"}${n}`))}const ue=new Set;let he;function pe(){he={r:0,c:[],p:he}}function fe(){he.r||i(he.c),he=he.p}function de(e,t){e&&e.i&&(ue.delete(e),e.i(t))}function me(e,t,n,s){if(e&&e.o){if(ue.has(e))return;ue.add(e),he.c.push((()=>{ue.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}else s&&s()}const ge={duration:0};const ve="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function we(e,t){e.d(1),t.delete(e.key)}function ye(e,t){me(e,1,1,(()=>{t.delete(e.key)}))}function xe(e,t,n,s,r,o,a,c,l,u,h,p){let f=e.length,d=o.length,m=f;const g={};for(;m--;)g[e[m].key]=m;const v=[],w=new Map,y=new Map,x=[];for(m=d;m--;){const e=p(r,o,m),i=n(e);let c=a.get(i);c?s&&x.push((()=>c.p(e,t))):(c=u(i,e),c.c()),w.set(i,v[m]=c),i in g&&y.set(i,Math.abs(m-g[i]))}const b=new Set,_=new Set;function $(e){de(e,1),e.m(c,h),a.set(e.key,e),h=e.first,d--}for(;f&&d;){const t=v[d-1],n=e[f-1],s=t.key,i=n.key;t===n?(h=t.first,f--,d--):w.has(i)?!a.has(s)||b.has(s)?$(t):_.has(i)?f--:y.get(s)>y.get(i)?(_.add(s),$(t)):(b.add(i),f--):(l(n,a),f--)}for(;f--;){const t=e[f];w.has(t.key)||l(t,a)}for(;d;)$(v[d-1]);return i(x),v}function be(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function _e(e){e&&e.c()}function $e(e,t,s,o){const{fragment:a,after_update:c}=e.$$;a&&a.m(t,s),o||te((()=>{const t=e.$$.on_mount.map(n).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...t):i(t),e.$$.on_mount=[]})),c.forEach(te)}function ke(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];Z.forEach((s=>-1===e.indexOf(s)?t.push(s):n.push(s))),n.forEach((e=>e())),Z=t}(n.after_update),i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Me(e,t){-1===e.$$.dirty[0]&&(D.push(e),ee||(ee=!0,Q.then(oe)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ae(t,n,r,o,a,c,l,u=[-1]){const h=B;q(t);const p=t.$$={fragment:null,ctx:[],props:c,update:e,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};l&&l(p.root);let f=!1;if(p.ctx=r?r(t,n.props||{},((e,n,...s)=>{const i=s.length?s[0]:n;return p.ctx&&a(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),f&&Me(t,e)),n})):[],p.update(),f=!0,i(p.before_update),p.fragment=!!o&&o(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(M)}else p.fragment&&p.fragment.c();n.intro&&de(t.$$.fragment),$e(t,n.target,n.anchor,n.customElement),oe()}q(h)}class Ee{$destroy(){ke(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const e=s.indexOf(n);-1!==e&&s.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Ie(t){let n,s,i,r;return{c(){n=A("button"),s=E(t[2]),S(n,"class","selected svelte-szsclt")},m(e,o){k(e,n,o),b(n,s),t[4](n),i||(r=T(n,"click",t[5]),i=!0)},p(e,[t]){4&t&&P(s,e[2])},i:e,o:e,d(e){e&&M(n),t[4](null),i=!1,r()}}}function Ce(e,t,n){let s,{id:i}=t,{curChoice:r}=t,{text:o}=t;return e.$$set=e=>{"id"in e&&n(1,i=e.id),"curChoice"in e&&n(0,r=e.curChoice),"text"in e&&n(2,o=e.text)},e.$$.update=()=>{11&e.$$.dirty&&s&&(i===r?s.classList.add("selected"):s.classList.remove("selected"))},[r,i,o,s,function(e){J[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},()=>{n(0,r=i)}]}class Te extends Ee{constructor(e){super(),Ae(this,e,Ce,Ie,o,{id:1,curChoice:0,text:2})}}function Oe(e,t){const n=e.replace(/[^A-Za-z0-9+/]/g,""),s=n.length,i=t?Math.ceil((3*s+1>>2)/t)*t:3*s+1>>2,r=new Uint8Array(i);let o,a,c=0,l=0;for(let e=0;e<s;e++)if(a=3&e,c|=((u=n.charCodeAt(e))>64&&u<91?u-65:u>96&&u<123?u-71:u>47&&u<58?u+4:43===u?62:47===u?63:0)<<6*(3-a),3===a||s-e==1){for(o=0;o<3&&l<i;)r[l]=c>>>(16>>>o&24)&255,o++,l++;c=0}var u;return r}function je(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function Se(e){let t=2,n="";const s=e.length;let i=0;for(let r=0;r<s;r++)t=r%3,i|=e[r]<<(16>>>t&24),2!==t&&e.length-r!=1||(n+=String.fromCodePoint(je(i>>>18&63),je(i>>>12&63),je(i>>>6&63),je(63&i)),i=0);return n.substring(0,n.length-2+t)+(2===t?"":1===t?"=":"==")}function ze(e){return Se(new Uint8Array(e))}const Pe=[];function Fe(t,n=e){let s;const i=new Set;function r(e){if(o(t,e)&&(t=e,s)){const e=!Pe.length;for(const e of i)e[1](),Pe.push(e,t);if(e){for(let e=0;e<Pe.length;e+=2)Pe[e][0](Pe[e+1]);Pe.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(o,a=e){const c=[o,a];return i.add(c),1===i.size&&(s=n(r)||e),o(t),()=>{i.delete(c),0===i.size&&s&&(s(),s=null)}}}}const Re=Fe([]),Le=Fe(new Map);function Ne(e,t,n=!0){let s=document.createElement("input");s.setAttribute("type","file"),n&&s.setAttribute("multiple","true"),s.setAttribute("style","display: none"),s.setAttribute("accept",t),document.body.append(s),s.onchange=t=>{e(t),document.body.removeChild(s)},s.click()}function Be(e,t){let n=new Blob([e]),s=URL.createObjectURL(n),i=document.createElement("a");i.setAttribute("href",s),i.setAttribute("download",t),i.click()}function We(e,t,n=!1){if(n){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n}else for(let n=0;n<e.length;n++)if(t(e[n]))return n;return null}async function He(e){let t;if("single_frame"==e.type){let n=e.imgfileref;t="data:image/png;base64,"+Se(new Uint8Array(await n.arrayBuffer()))}else{const n=function(e){let t;return c(e,(e=>t=e))(),t}(Le).get(e.spritesheetId);t=void 0!==n?"data:image/png;base64,"+n[0]:"data:image/png;base64,"}const n=new Image;return n.src=t,await n.decode(),n}async function Xe(e){const t="data:image/png;base64,"+ze(await e.arrayBuffer()),n=new Image;return n.src=t,await n.decode(),[n.naturalWidth,n.naturalHeight]}function qe(e){return!(!e||e.length>255)&&(!/[<>:"/\\|?*\u0000-\u001F]/g.test(e)&&!/^(con|prn|aux|nul|com\d|lpt\d)$/i.test(e)&&("."!==e&&".."!==e))}function Ye(e,t=0){setTimeout(e,t)}const Ve=new class{constructor(){this._val=-1}getNewId(){return this._val++,this._val}};function Ue(t){let n,s,r,o,a;return{c(){n=A("button"),n.textContent="Add Icongrid",s=I(),r=A("button"),r.textContent="Clear Icongrid",S(n,"id","add-icongrid"),S(n,"class","svelte-tagkek"),S(r,"id","clear-icongrid"),S(r,"class","svelte-tagkek")},m(e,i){k(e,n,i),k(e,s,i),k(e,r,i),o||(a=[T(n,"click",t[15]),T(r,"click",t[16])],o=!0)},p:e,d(e){e&&M(n),e&&M(s),e&&M(r),o=!1,i(a)}}}function Ge(t){let n,s,r,o,c,l,u,h,p,f,d,m,g,v,w,y,x,_,$,C,O,j,z,F,R=t[2].length+"",L=t[0]&&Ue(t);return{c(){var e,i;n=A("dialog"),n.innerHTML="<p>Creating Icongrid....</p>",s=I(),r=A("div"),o=A("img"),u=I(),h=A("div"),p=A("label"),f=A("input"),d=E("\r\n        Legacy Mode"),m=I(),g=A("p"),v=E("Number of icons selected: "),w=E(R),y=I(),x=A("button"),x.textContent="Clear Icons",_=I(),L&&L.c(),$=I(),C=A("button"),C.textContent="Add Icons",O=I(),j=A("button"),j.textContent="Generate Icongrid",e=o.src,i=c="",a||(a=document.createElement("a")),a.href=i,e!==a.href&&S(o,"src",""),S(o,"alt",l="The "+(t[0]?"":"final")+" icongrid will be displayed here."),S(r,"id","preview-div"),S(r,"class","svelte-tagkek"),S(f,"type","checkbox"),S(f,"name","legacy-mode"),S(f,"id","legacy-mode"),S(f,"class","svelte-tagkek"),S(p,"for","legacy-mode"),S(p,"id","legacy-mode-label"),S(p,"class","svelte-tagkek"),S(g,"class","svelte-tagkek"),S(x,"class","svelte-tagkek"),S(C,"id","add-icons"),S(C,"class","svelte-tagkek"),S(j,"id","generate-grid"),S(j,"class","svelte-tagkek"),S(h,"id","controls"),S(h,"class","layout-normal layout-legacy svelte-tagkek")},m(e,i){k(e,n,i),t[12](n),k(e,s,i),k(e,r,i),b(r,o),t[13](o),k(e,u,i),k(e,h,i),b(h,p),b(p,f),f.checked=t[0],b(p,d),b(h,m),b(h,g),b(g,v),b(g,w),b(h,y),b(h,x),b(h,_),L&&L.m(h,null),b(h,$),b(h,C),b(h,O),b(h,j),t[18](h),z||(F=[T(f,"change",t[14]),T(x,"click",t[8]),T(C,"click",t[17]),T(j,"click",t[6])],z=!0)},p(e,[t]){1&t&&l!==(l="The "+(e[0]?"":"final")+" icongrid will be displayed here.")&&S(o,"alt",l),1&t&&(f.checked=e[0]),4&t&&R!==(R=e[2].length+"")&&P(w,R),e[0]?L?L.p(e,t):(L=Ue(e),L.c(),L.m(h,$)):L&&(L.d(1),L=null)},i:e,o:e,d(e){e&&M(n),t[12](null),e&&M(s),e&&M(r),t[13](null),e&&M(u),e&&M(h),L&&L.d(),t[18](null),z=!1,i(F)}}}function De(e,t,n){let{wasm:s}=t,{charname:i}=t,r=!1,o=[],a=null,c=null,l=null,u=null;async function h(e){n(5,u=e.target.files[0]),a.setAttribute("src","data:image/png;base64,"+ze(await u.arrayBuffer()))}function p(e){n(2,o=[])}function f(e){n(2,o=[...e.target.files])}U((()=>{document.removeEventListener("clearIcons",p)})),document.addEventListener("clearIcons",p);return e.$$set=e=>{"wasm"in e&&n(10,s=e.wasm),"charname"in e&&n(11,i=e.charname)},e.$$.update=()=>{3&e.$$.dirty&&l&&(r?(l.classList.add("layout-legacy"),l.classList.remove("layout-normal")):(l.classList.remove("layout-legacy"),l.classList.add("layout-normal")))},[r,l,o,a,c,u,async function(){if(r)if(o.length>0)if(null!==u){c.showModal();const e=new Uint8Array(await u.arrayBuffer()),t=[];for(let e of o)t.push(ze(await e.arrayBuffer()));const n=s.make_icongrid_legacy(e,t);a.setAttribute("src","data:image/png;base64,"+Se(n)),c.close(),Be(n,"iconGrid.png")}else alert("No Icongrid selected! Please select an icongrid");else alert("No icons selected! Please select some icons");else{const{IconPacker:e}=s,t=e.new();if(o.length>0){c.showModal();for(let e of o)t.add_image(await e.arrayBuffer());let e=t.make_packed_image();a.setAttribute("src","data:image/png;base64,"+Se(e)),c.close(),Be(e,`icon-${void 0!==i?i:"character"}.png`)}else alert("No icons selected! Please select some icons")}},h,p,f,s,i,function(e){J[e?"unshift":"push"]((()=>{c=e,n(4,c)}))},function(e){J[e?"unshift":"push"]((()=>{a=e,n(3,a)}))},function(){r=this.checked,n(0,r)},e=>Ne(h,"image/png",!1),()=>{n(5,u=null)},e=>Ne(f,"image/png"),function(e){J[e?"unshift":"push"]((()=>{l=e,n(1,l)}))}]}class Je extends Ee{constructor(e){super(),Ae(this,e,De,Ge,o,{wasm:10,charname:11})}}class Ze{constructor(e){this.context=e,this.curFrames=[],this.curImgs=[],this.curFrameIndex=0,this.start=null,this.prev=null,this.ticks=0,this.animId=null,this.fps=24,this.animationScale=1,this.isPlaying=!1}resetAnimation(){this.curFrames=[],this.curImgs=[],this.curFrameIndex=0,this.start=null,this.prev=null,this.ticks=0}tick(e){this.start=e,null===this.prev&&(this.prev=e);const t=this.start-this.prev;if(this.ticks+=t,this.ticks>1e3/this.fps){const e=this.curFrames[this.curFrameIndex],t=this.curImgs[this.curFrameIndex];this.curFrameIndex=(this.curFrameIndex+1)%this.curFrames.length,this.clearCanvas(),this.drawImage(t,e),this.ticks=0}this.animId=requestAnimationFrame((e=>{this.tick(e)})),this.prev=this.start}drawImage(e,t,n=!1,s=!1){const i=t.rect,r=t.frameRect,o=t.transform,a=o.flipX?-1:1,c=o.flipY?-1:1,l=a*this.animationScale,u=c*this.animationScale;this.context.save(),this.context.scale(l,u),o.flipX&&this.context.translate(-o.newWidth,0),o.flipY&&this.context.translate(0,-o.newHeight),this.context.drawImage(e,i.x,i.y,i.width,i.height,-r.frameX*a,-r.frameY*c,o.newWidth,o.newHeight),this.context.restore(),s&&(this.context.clearRect(r.frameWidth*this.animationScale,0,this.context.canvas.width,this.context.canvas.height),this.context.clearRect(0,r.frameHeight*this.animationScale,this.context.canvas.width,this.context.canvas.height)),n&&(this.context.beginPath(),this.context.rect(0,0,r.frameWidth*this.animationScale,r.frameHeight*this.animationScale),this.context.stroke())}async initFrames(e){this.curFrames=e,this.curFrameIndex=0,this.curImgs=await Promise.all(this.curFrames.map((async e=>await He(e))))}play(){this.animId=requestAnimationFrame((e=>{this.tick(e)})),this.isPlaying=!0}stopAnimation(){null!==this.animId&&cancelAnimationFrame(this.animId),this.resetAnimation(),this.animId=null,this.isPlaying=!1}clearCanvas(){const e=this.context.canvas.width,t=this.context.canvas.height;this.context.clearRect(0,0,e,t)}}function Ke(t){let n;return{c(){n=A("div"),R(n,"width",et),R(n,"height",et+"px")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function Qe(t){let n,s,r,o,a,c,l,u,h,p,f,d,m,g,v=t[0].animationPrefix+"",w=!t[2]&&Ke();return{c(){n=A("div"),s=A("input"),o=I(),a=A("canvas"),c=E("Rendering Error!\r\n        Please use a browser that supports canvas rendering! (like Chrome or Firefox)"),l=I(),w&&w.c(),u=I(),h=A("p"),p=E(v),f=I(),d=A("button"),d.textContent="Delete",S(s,"type","checkbox"),S(s,"name","selected-chkbox"),S(s,"id","selected-chkbox"),s.checked=r=t[0].selected,R(a,"display",t[2]?"block":"none"),S(a,"width",et+"px"),S(a,"height",et+"px"),S(n,"class","frame-container frame-selected svelte-3nyngo"),R(n,"width",et+"px")},m(e,i){k(e,n,i),b(n,s),b(n,o),b(n,a),b(a,c),t[8](a),b(n,l),w&&w.m(n,null),b(n,u),b(n,h),b(h,p),b(n,f),b(n,d),t[10](n),m||(g=[T(d,"click",O(t[9])),T(n,"click",t[4])],m=!0)},p(e,[t]){1&t&&r!==(r=e[0].selected)&&(s.checked=r),4&t&&R(a,"display",e[2]?"block":"none"),e[2]?w&&(w.d(1),w=null):w?w.p(e,t):(w=Ke(),w.c(),w.m(n,u)),1&t&&v!==(v=e[0].animationPrefix+"")&&P(p,v)},i:e,o:e,d(e){e&&M(n),t[8](null),w&&w.d(),t[10](null),m=!1,i(g)}}}let et=120;function tt(e,t,n){let s,i,r,o;l(e,Le,(e=>n(12,s=e))),l(e,Re,(e=>n(13,i=e)));let a,{frameInfo:c}=t,{onRangeClick:u}=t,{rangeSelectionMode:h}=t,p=!1;async function f(){await a.initFrames([c]),a.clearCanvas(),a.animationScale=et/Math.max(c.frameRect.frameWidth,c.frameRect.frameHeight),a.drawImage(a.curImgs[0],c,!1),n(2,p=!0)}function d(e){const t=i.indexOf(e);if(-1!==t){if(i.splice(t,1),Re.set(i),"spritesheet_frame"===c.type){const e=c.spritesheetId,[t,n]=s.get(e),i=n-1;i>0?Le.update((n=>(n.set(e,[t,i]),n))):Le.update((t=>(t.delete(e),t)))}}else console.log("[ERROR] Could not find element: "+e)}V((()=>{new IntersectionObserver((async(e,t)=>{const s=e[0];s.isIntersecting&&s.intersectionRatio>=.2?p||await f():n(2,p=!1)}),{root:document.getElementById("sprite-frames"),rootMargin:"0px",threshold:[.1,.2]}).observe(o),a=new Ze(r.getContext("2d"))}));return e.$$set=e=>{"frameInfo"in e&&n(0,c=e.frameInfo),"onRangeClick"in e&&n(6,u=e.onRangeClick),"rangeSelectionMode"in e&&n(7,h=e.rangeSelectionMode)},e.$$.update=()=>{7&e.$$.dirty&&(p&&c._changed&&(f().then((()=>{})),n(0,c._changed=!1,c)),o&&(c.selected?o.classList.add("frame-selected"):o.classList.remove("frame-selected")))},[c,o,p,r,function(){if(null!=u&&u(),h){let e=0;const t=o.classList.contains("frame-selected");let n=setInterval((()=>{e>=2&&(clearInterval(n),t?o.classList.add("frame-selected"):o.classList.remove("frame-selected")),o.classList.toggle("frame-selected"),e++}),150)}else n(0,c.selected=!c.selected,c)},d,u,h,function(e){J[e?"unshift":"push"]((()=>{r=e,n(3,r)}))},()=>{d(c)},function(e){J[e?"unshift":"push"]((()=>{o=e,n(1,o)}))}]}class nt extends Ee{constructor(e){super(),Ae(this,e,tt,Qe,o,{frameInfo:0,onRangeClick:6,rangeSelectionMode:7})}}const st=e=>({}),it=e=>({}),rt=e=>({}),ot=e=>({});function at(e){let t,n,s,r,o,a,c,l,h,m,g,v,w,y,x,_;const $=e[5].header,C=u($,e,e[4],ot),z=e[5].default,F=u(z,e,e[4],null),R=e[5]["accept-btn"],L=u(R,e,e[4],it);return{c(){t=A("dialog"),n=A("div"),C&&C.c(),s=I(),r=A("hr"),o=I(),F&&F.c(),a=I(),c=A("hr"),l=I(),L&&L.c(),h=I(),m=A("hr"),g=I(),v=A("button"),w=E(e[2]),v.autofocus=!0,S(v,"class","svelte-166v5ul"),S(n,"class","svelte-166v5ul"),S(t,"class","svelte-166v5ul")},m(i,u){k(i,t,u),b(t,n),C&&C.m(n,null),b(n,s),b(n,r),b(n,o),F&&F.m(n,null),b(n,a),b(n,c),b(n,l),L&&L.m(n,null),b(n,h),b(n,m),b(n,g),b(n,v),b(v,w),e[8](t),y=!0,v.focus(),x||(_=[T(v,"click",e[7]),T(n,"click",O(e[6])),T(t,"close",e[9]),T(t,"click",j(e[10]))],x=!0)},p(e,[t]){C&&C.p&&(!y||16&t)&&f(C,$,e,e[4],y?p($,e[4],t,rt):d(e[4]),ot),F&&F.p&&(!y||16&t)&&f(F,z,e,e[4],y?p(z,e[4],t,null):d(e[4]),null),L&&L.p&&(!y||16&t)&&f(L,R,e,e[4],y?p(R,e[4],t,st):d(e[4]),it),(!y||4&t)&&P(w,e[2])},i(e){y||(de(C,e),de(F,e),de(L,e),y=!0)},o(e){me(C,e),me(F,e),me(L,e),y=!1},d(n){n&&M(t),C&&C.d(n),F&&F.d(n),L&&L.d(n),e[8](null),x=!1,i(_)}}}function ct(e,t,n){let s,{$$slots:i={},$$scope:r}=t,{showModal:o}=t,{onClose:a=(()=>{})}=t,{closeButtonMsg:c="Close"}=t;return e.$$set=e=>{"showModal"in e&&n(0,o=e.showModal),"onClose"in e&&n(1,a=e.onClose),"closeButtonMsg"in e&&n(2,c=e.closeButtonMsg),"$$scope"in e&&n(4,r=e.$$scope)},e.$$.update=()=>{9&e.$$.dirty&&s&&(o?s.showModal():s.close())},[o,a,c,s,r,i,function(t){G.call(this,e,t)},()=>s.close(),function(e){J[e?"unshift":"push"]((()=>{s=e,n(3,s)}))},()=>{n(0,o=!1),a()},()=>s.close()]}class lt extends Ee{constructor(e){super(),Ae(this,e,ct,at,o,{showModal:0,onClose:1,closeButtonMsg:2})}}const{Map:ut}=ve;function ht(e,t,n){const s=e.slice();return s[14]=t[n],s}function pt(e,t){let n,s,i,r=t[14]+"";return{key:e,first:null,c(){n=A("option"),s=E(r),n.__value=i=t[14],n.value=n.__value,this.first=n},m(e,t){k(e,n,t),b(n,s)},p(e,o){t=e,2&o&&r!==(r=t[14]+"")&&P(s,r),2&o&&i!==(i=t[14])&&(n.__value=i,n.value=n.__value)},d(e){e&&M(n)}}}function ft(e){let t,n,s,r,o,a,c,l,u;return{c(){t=A("label"),n=A("input"),s=E("\r\n                FPS"),r=I(),o=A("label"),a=A("input"),c=E("\r\n                Animation Scale"),S(n,"type","number"),S(n,"name","fps"),S(n,"id","fps"),S(n,"min","1"),S(n,"max","120"),S(t,"for","fps"),S(a,"type","number"),S(a,"name","anim-scale"),S(a,"id","anim-scale"),S(a,"min","0.01"),S(a,"max","4"),S(a,"step","0.01"),S(o,"for","fps")},m(i,h){k(i,t,h),b(t,n),F(n,e[2].fps),b(t,s),k(i,r,h),k(i,o,h),b(o,a),F(a,e[2].animationScale),b(o,c),l||(u=[T(n,"input",e[10]),T(a,"input",e[11])],l=!0)},p(e,t){4&t&&z(n.value)!==e[2].fps&&F(n,e[2].fps),4&t&&z(a.value)!==e[2].animationScale&&F(a,e[2].animationScale)},d(e){e&&M(t),e&&M(r),e&&M(o),l=!1,i(u)}}}function dt(e){let t,n,s,r,o,a,c,l,u,h,p,f=[],d=new ut,m=e[2]?.isPlaying?"Stop":"Play",g=e[1];const v=e=>e[14];for(let t=0;t<g.length;t+=1){let n=ht(e,g,t),s=v(n);d.set(s,f[t]=pt(s,n))}let w=e[2]&&ft(e);return{c(){t=A("div"),n=A("select");for(let e=0;e<f.length;e+=1)f[e].c();s=I(),r=A("button"),o=E(m),a=E(" Animation"),c=I(),w&&w.c(),l=I(),u=A("canvas"),S(n,"name","anim-prefix"),S(n,"id","anim-prefix"),void 0===e[4]&&te((()=>e[9].call(n))),S(t,"class","anim-view-container svelte-n7ckwu"),S(u,"class","svelte-n7ckwu")},m(i,d){k(i,t,d),b(t,n);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(n,null);L(n,e[4],!0),b(t,s),b(t,r),b(r,o),b(r,a),b(t,c),w&&w.m(t,null),k(i,l,d),k(i,u,d),e[12](u),h||(p=[T(n,"change",e[8]),T(n,"change",e[9]),T(r,"click",e[5])],h=!0)},p(e,s){2&s&&(g=e[1],f=xe(f,s,v,1,e,g,d,n,we,pt,null,ht)),18&s&&L(n,e[4]),4&s&&m!==(m=e[2]?.isPlaying?"Stop":"Play")&&P(o,m),e[2]?w?w.p(e,s):(w=ft(e),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},d(n){n&&M(t);for(let e=0;e<f.length;e+=1)f[e].d();w&&w.d(),n&&M(l),n&&M(u),e[12](null),h=!1,i(p)}}}function mt(t){let n;return{c(){n=A("h4"),n.textContent="View Animation",S(n,"slot","header")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function gt(e){let t,n,s;function i(t){e[13](t)}let r={$$slots:{header:[mt],default:[dt]},$$scope:{ctx:e}};return void 0!==e[0]&&(r.showModal=e[0]),t=new lt({props:r}),J.push((()=>be(t,"showModal",i))),{c(){_e(t.$$.fragment)},m(e,n){$e(t,e,n),s=!0},p(e,[s]){const i={};131102&s&&(i.$$scope={dirty:s,ctx:e}),!n&&1&s&&(n=!0,i.showModal=e[0],ne((()=>n=!1))),t.$set(i)},i(e){s||(de(t.$$.fragment,e),s=!0)},o(e){me(t.$$.fragment,e),s=!1},d(e){ke(t,e)}}}function vt(e,t,n){let s;l(e,Re,(e=>n(7,s=e)));let i,{showView:r=!1}=t,o=null,a=new Map,c=[],u=null;V((()=>{n(2,u=new Ze(o.getContext("2d")))}));return e.$$set=e=>{"showView"in e&&n(0,r=e.showView)},e.$$.update=()=>{if(5&e.$$.dirty&&null!==u&&(r?(console.log("Clearing canvas: ",u.isPlaying),u.clearCanvas()):u.stopAnimation(),n(2,u),n(0,r)),195&e.$$.dirty&&r){n(6,a=new Map),n(1,c=[]);for(let e of s)if(a.has(e.animationPrefix)){let t=a.get(e.animationPrefix);a.set(e.animationPrefix,[...t,e])}else a.set(e.animationPrefix,[e]);for(let e of a.keys())n(1,c=[...c,e])}},[r,c,u,o,i,async function(){null===u.animId?(await u.initFrames(a.get(i)),u.play(),n(2,u.context.canvas.width=.9*window.innerWidth,u),n(2,u.context.canvas.height=.9*window.innerHeight,u)):u.stopAnimation(),console.log("Anim is "+u.animId),n(2,u),n(0,r)},a,s,()=>{u.stopAnimation(),n(2,u),n(0,r)},function(){i=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(4,i),n(1,c),n(0,r),n(7,s),n(6,a)},function(){u.fps=z(this.value),n(2,u),n(0,r)},function(){u.animationScale=z(this.value),n(2,u),n(0,r)},function(e){J[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){r=e,n(0,r)}]}class wt extends Ee{constructor(e){super(),Ae(this,e,vt,gt,o,{showView:0})}}var yt="INUMBER",xt="IOP1",bt="IOP2",_t="IOP3",$t="IVAR",kt="IVARNAME",Mt="IFUNCALL",At="IFUNDEF",Et="IEXPR",It="IEXPREVAL",Ct="IMEMBER",Tt="IENDSTATEMENT",Ot="IARRAY";function jt(e,t){this.type=e,this.value=null!=t?t:0}function St(e){return new jt(xt,e)}function zt(e){return new jt(bt,e)}function Pt(e){return new jt(_t,e)}function Ft(e,t,n,s,i){for(var r,o,a,c,l=[],u=[],h=0;h<e.length;h++){var p=e[h],f=p.type;if(f===yt||f===kt)Array.isArray(p.value)?l.push.apply(l,Ft(p.value.map((function(e){return new jt(yt,e)})).concat(new jt(Ot,p.value.length)),t,n,s,i)):l.push(p);else if(f===$t&&i.hasOwnProperty(p.value))p=new jt(yt,i[p.value]),l.push(p);else if(f===bt&&l.length>1)o=l.pop(),r=l.pop(),c=n[p.value],p=new jt(yt,c(r.value,o.value)),l.push(p);else if(f===_t&&l.length>2)a=l.pop(),o=l.pop(),r=l.pop(),"?"===p.value?l.push(r.value?o.value:a.value):(c=s[p.value],p=new jt(yt,c(r.value,o.value,a.value)),l.push(p));else if(f===xt&&l.length>0)r=l.pop(),c=t[p.value],p=new jt(yt,c(r.value)),l.push(p);else if(f===Et){for(;l.length>0;)u.push(l.shift());u.push(new jt(Et,Ft(p.value,t,n,s,i)))}else if(f===Ct&&l.length>0)r=l.pop(),l.push(new jt(yt,r.value[p.value]));else{for(;l.length>0;)u.push(l.shift());u.push(p)}}for(;l.length>0;)u.push(l.shift());return u}function Rt(e,t,n){for(var s=[],i=0;i<e.length;i++){var r=e[i],o=r.type;if(o===$t&&r.value===t)for(var a=0;a<n.tokens.length;a++){var c,l=n.tokens[a];c=l.type===xt?St(l.value):l.type===bt?zt(l.value):l.type===_t?Pt(l.value):new jt(l.type,l.value),s.push(c)}else o===Et?s.push(new jt(Et,Rt(r.value,t,n))):s.push(r)}return s}function Lt(e,t,n){var s,i,r,o,a,c,l=[];if(Bt(e))return Wt(e,n);for(var u=e.length,h=0;h<u;h++){var p=e[h],f=p.type;if(f===yt||f===kt)l.push(p.value);else if(f===bt)i=l.pop(),s=l.pop(),"and"===p.value?l.push(!!s&&!!Lt(i,t,n)):"or"===p.value?l.push(!!s||!!Lt(i,t,n)):"="===p.value?(o=t.binaryOps[p.value],l.push(o(s,Lt(i,t,n),n))):(o=t.binaryOps[p.value],l.push(o(Wt(s,n),Wt(i,n))));else if(f===_t)r=l.pop(),i=l.pop(),s=l.pop(),"?"===p.value?l.push(Lt(s?i:r,t,n)):(o=t.ternaryOps[p.value],l.push(o(Wt(s,n),Wt(i,n),Wt(r,n))));else if(f===$t)if(p.value in t.functions)l.push(t.functions[p.value]);else if(p.value in t.unaryOps&&t.parser.isOperatorEnabled(p.value))l.push(t.unaryOps[p.value]);else{var d=n[p.value];if(void 0===d)throw new Error("undefined variable: "+p.value);l.push(d)}else if(f===xt)s=l.pop(),o=t.unaryOps[p.value],l.push(o(Wt(s,n)));else if(f===Mt){for(c=p.value,a=[];c-- >0;)a.unshift(Wt(l.pop(),n));if(!(o=l.pop()).apply||!o.call)throw new Error(o+" is not a function");l.push(o.apply(void 0,a))}else if(f===At)l.push(function(){for(var e=l.pop(),s=[],i=p.value;i-- >0;)s.unshift(l.pop());var r=l.pop(),o=function(){for(var i=Object.assign({},n),r=0,o=s.length;r<o;r++)i[s[r]]=arguments[r];return Lt(e,t,i)};return Object.defineProperty(o,"name",{value:r,writable:!1}),n[r]=o,o}());else if(f===Et)l.push(Nt(p,t));else if(f===It)l.push(p);else if(f===Ct)s=l.pop(),l.push(s[p.value]);else if(f===Tt)l.pop();else{if(f!==Ot)throw new Error("invalid Expression");for(c=p.value,a=[];c-- >0;)a.unshift(l.pop());l.push(a)}}if(l.length>1)throw new Error("invalid Expression (parity)");return 0===l[0]?0:Wt(l[0],n)}function Nt(e,t,n){return Bt(e)?e:{type:It,value:function(n){return Lt(e.value,t,n)}}}function Bt(e){return e&&e.type===It}function Wt(e,t){return Bt(e)?e.value(t):e}function Ht(e,t){for(var n,s,i,r,o,a,c=[],l=0;l<e.length;l++){var u=e[l],h=u.type;if(h===yt)"number"==typeof u.value&&u.value<0?c.push("("+u.value+")"):Array.isArray(u.value)?c.push("["+u.value.map(Xt).join(", ")+"]"):c.push(Xt(u.value));else if(h===bt)s=c.pop(),n=c.pop(),r=u.value,t?"^"===r?c.push("Math.pow("+n+", "+s+")"):"and"===r?c.push("(!!"+n+" && !!"+s+")"):"or"===r?c.push("(!!"+n+" || !!"+s+")"):"||"===r?c.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+s+")))"):"=="===r?c.push("("+n+" === "+s+")"):"!="===r?c.push("("+n+" !== "+s+")"):"["===r?c.push(n+"[("+s+") | 0]"):c.push("("+n+" "+r+" "+s+")"):"["===r?c.push(n+"["+s+"]"):c.push("("+n+" "+r+" "+s+")");else if(h===_t){if(i=c.pop(),s=c.pop(),n=c.pop(),"?"!==(r=u.value))throw new Error("invalid Expression");c.push("("+n+" ? "+s+" : "+i+")")}else if(h===$t||h===kt)c.push(u.value);else if(h===xt)n=c.pop(),"-"===(r=u.value)||"+"===r?c.push("("+r+n+")"):t?"not"===r?c.push("(!"+n+")"):"!"===r?c.push("fac("+n+")"):c.push(r+"("+n+")"):"!"===r?c.push("("+n+"!)"):c.push("("+r+" "+n+")");else if(h===Mt){for(a=u.value,o=[];a-- >0;)o.unshift(c.pop());r=c.pop(),c.push(r+"("+o.join(", ")+")")}else if(h===At){for(s=c.pop(),a=u.value,o=[];a-- >0;)o.unshift(c.pop());n=c.pop(),t?c.push("("+n+" = function("+o.join(", ")+") { return "+s+" })"):c.push("("+n+"("+o.join(", ")+") = "+s+")")}else if(h===Ct)n=c.pop(),c.push(n+"."+u.value);else if(h===Ot){for(a=u.value,o=[];a-- >0;)o.unshift(c.pop());c.push("["+o.join(", ")+"]")}else if(h===Et)c.push("("+Ht(u.value,t)+")");else if(h!==Tt)throw new Error("invalid Expression")}return c.length>1&&(c=t?[c.join(",")]:[c.join(";")]),String(c[0])}function Xt(e){return"string"==typeof e?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function qt(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function Yt(e,t,n){for(var s=!!(n=n||{}).withMembers,i=null,r=0;r<e.length;r++){var o=e[r];o.type===$t||o.type===kt?s||qt(t,o.value)?null!==i?(qt(t,i)||t.push(i),i=o.value):i=o.value:t.push(o.value):o.type===Ct&&s&&null!==i?i+="."+o.value:o.type===Et?Yt(o.value,t,n):null!==i&&(qt(t,i)||t.push(i),i=null)}null===i||qt(t,i)||t.push(i)}function Vt(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}jt.prototype.toString=function(){switch(this.type){case yt:case xt:case bt:case _t:case $t:case kt:case Tt:return this.value;case Mt:return"CALL "+this.value;case At:return"DEF "+this.value;case Ot:return"ARRAY "+this.value;case Ct:return"."+this.value;default:return"Invalid Instruction"}},Vt.prototype.simplify=function(e){return e=e||{},new Vt(Ft(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)},Vt.prototype.substitute=function(e,t){return t instanceof Vt||(t=this.parser.parse(String(t))),new Vt(Rt(this.tokens,e,t),this.parser)},Vt.prototype.evaluate=function(e){return e=e||{},Lt(this.tokens,this,e)},Vt.prototype.toString=function(){return Ht(this.tokens,!1)},Vt.prototype.symbols=function(e){e=e||{};var t=[];return Yt(this.tokens,t,e),t},Vt.prototype.variables=function(e){e=e||{};var t=[];Yt(this.tokens,t,e);var n=this.functions;return t.filter((function(e){return!(e in n)}))},Vt.prototype.toJSFunction=function(e,t){var n=this,s=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+Ht(this.simplify(t).tokens,!0)+"; }");return function(){return s.apply(n,arguments)}};var Ut="TEOF",Gt="TOP",Dt="TNUMBER",Jt="TSTRING",Zt="TPAREN",Kt="TBRACKET",Qt="TCOMMA",en="TNAME",tn="TSEMICOLON";function nn(e,t,n){this.type=e,this.value=t,this.index=n}function sn(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}nn.prototype.toString=function(){return this.type+": "+this.value},sn.prototype.newToken=function(e,t,n){return new nn(e,t,null!=n?n:this.pos)},sn.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},sn.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},sn.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(Ut,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},sn.prototype.isString=function(){var e=!1,t=this.pos,n=this.expression.charAt(t);if("'"===n||'"'===n)for(var s=this.expression.indexOf(n,t+1);s>=0&&this.pos<this.expression.length;){if(this.pos=s+1,"\\"!==this.expression.charAt(s-1)){var i=this.expression.substring(t+1,s);this.current=this.newToken(Jt,this.unescape(i),t),e=!0;break}s=this.expression.indexOf(n,s+1)}return e},sn.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return("("===e||")"===e)&&(this.current=this.newToken(Zt,e),this.pos++,!0)},sn.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return!("["!==e&&"]"!==e||!this.isOperatorEnabled("["))&&(this.current=this.newToken(Kt,e),this.pos++,!0)},sn.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(Qt,","),this.pos++,!0)},sn.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(tn,";"),this.pos++,!0)},sn.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(t>e){var s=this.expression.substring(e,t);if(s in this.consts)return this.current=this.newToken(Dt,this.consts[s]),this.pos+=s.length,!0}return!1},sn.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(t>e){var s=this.expression.substring(e,t);if(this.isOperatorEnabled(s)&&(s in this.binaryOps||s in this.unaryOps||s in this.ternaryOps))return this.current=this.newToken(Gt,s),this.pos+=s.length,!0}return!1},sn.prototype.isName=function(){for(var e=this.pos,t=e,n=!1;t<this.expression.length;t++){var s=this.expression.charAt(t);if(s.toUpperCase()===s.toLowerCase()){if(t===this.pos&&("$"===s||"_"===s)){"_"===s&&(n=!0);continue}if(t===this.pos||!n||"_"!==s&&(s<"0"||s>"9"))break}else n=!0}if(n){var i=this.expression.substring(e,t);return this.current=this.newToken(en,i),this.pos+=i.length,!0}return!1},sn.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);!(" "!==t&&"\t"!==t&&"\n"!==t&&"\r"!==t||(e=!0,this.pos++,this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var rn=/^[0-9a-f]{4}$/i;function on(e,t,n){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}sn.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var n=e.substring(0,t);t>=0;){var s=e.charAt(++t);switch(s){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var i=e.substring(t+1,t+5);rn.test(i)||this.parseError("Illegal escape sequence: \\u"+i),n+=String.fromCharCode(parseInt(i,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+s+'"')}++t;var r=e.indexOf("\\",t);n+=e.substring(t,r<0?e.length:r),t=r}return n},sn.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},sn.prototype.isRadixInteger=function(){var e,t,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))e=16,t=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;e=2,t=/^[01]$/i,++n}for(var s=!1,i=n;n<this.expression.length;){var r=this.expression.charAt(n);if(!t.test(r))break;n++,s=!0}return s&&(this.current=this.newToken(Dt,parseInt(this.expression.substring(i,n),e)),this.pos=n),s},sn.prototype.isNumber=function(){for(var e,t=!1,n=this.pos,s=n,i=n,r=!1,o=!1;n<this.expression.length&&((e=this.expression.charAt(n))>="0"&&e<="9"||!r&&"."===e);)"."===e?r=!0:o=!0,n++,t=o;if(t&&(i=n),"e"===e||"E"===e){n++;for(var a=!0,c=!1;n<this.expression.length;){if(e=this.expression.charAt(n),!a||"+"!==e&&"-"!==e){if(!(e>="0"&&e<="9"))break;c=!0,a=!1}else a=!1;n++}c||(n=i)}return t?(this.current=this.newToken(Dt,parseFloat(this.expression.substring(s,n))),this.pos=n):this.pos=i,t},sn.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if("+"===t||"-"===t||"*"===t||"/"===t||"%"===t||"^"===t||"?"===t||":"===t||"."===t)this.current=this.newToken(Gt,t);else if("∙"===t||"•"===t)this.current=this.newToken(Gt,"*");else if(">"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Gt,">="),this.pos++):this.current=this.newToken(Gt,">");else if("<"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Gt,"<="),this.pos++):this.current=this.newToken(Gt,"<");else if("|"===t){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(Gt,"||"),this.pos++}else if("="===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Gt,"=="),this.pos++):this.current=this.newToken(Gt,t);else{if("!"!==t)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Gt,"!="),this.pos++):this.current=this.newToken(Gt,t)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=e,!1)},sn.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)},sn.prototype.getCoordinates=function(){var e,t=0,n=-1;do{t++,e=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:t,column:e}},sn.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)},on.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},on.prototype.tokenMatches=function(e,t){return void 0===t||(Array.isArray(t)?qt(t,e.value):"function"==typeof t?t(e):e.value===t)},on.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},on.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},on.prototype.accept=function(e,t){return!(this.nextToken.type!==e||!this.tokenMatches(this.nextToken,t))&&(this.next(),!0)},on.prototype.expect=function(e,t){if(!this.accept(e,t)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(t||e))}},on.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;if(this.accept(en)||this.accept(Gt,(function(e){return e.value in t})))e.push(new jt($t,this.current.value));else if(this.accept(Dt))e.push(new jt(yt,this.current.value));else if(this.accept(Jt))e.push(new jt(yt,this.current.value));else if(this.accept(Zt,"("))this.parseExpression(e),this.expect(Zt,")");else{if(!this.accept(Kt,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(Kt,"]"))e.push(new jt(Ot,0));else{var n=this.parseArrayList(e);e.push(new jt(Ot,n))}}},on.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),this.parseUntilEndStatement(e,t)||this.pushExpression(e,t))},on.prototype.pushExpression=function(e,t){for(var n=0,s=t.length;n<s;n++)e.push(t[n])},on.prototype.parseUntilEndStatement=function(e,t){return!!this.accept(tn)&&(!this.nextToken||this.nextToken.type===Ut||this.nextToken.type===Zt&&")"===this.nextToken.value||t.push(new jt(Tt)),this.nextToken.type!==Ut&&this.parseExpression(t),e.push(new jt(Et,t)),!0)},on.prototype.parseArrayList=function(e){for(var t=0;!this.accept(Kt,"]");)for(this.parseExpression(e),++t;this.accept(Qt);)this.parseExpression(e),++t;return t},on.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(Gt,"=");){var t=e.pop(),n=[],s=e.length-1;if(t.type!==Mt){if(t.type!==$t&&t.type!==Ct)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),e.push(new jt(kt,t.value)),e.push(new jt(Et,n)),e.push(zt("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var i=0,r=t.value+1;i<r;i++){var o=s-i;e[o].type===$t&&(e[o]=new jt(kt,e[o].value))}this.parseVariableAssignmentExpression(n),e.push(new jt(Et,n)),e.push(new jt(At,t.value))}}},on.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(Gt,"?");){var t=[],n=[];this.parseConditionalExpression(t),this.expect(Gt,":"),this.parseConditionalExpression(n),e.push(new jt(Et,t)),e.push(new jt(Et,n)),e.push(Pt("?"))}},on.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(Gt,"or");){var t=[];this.parseAndExpression(t),e.push(new jt(Et,t)),e.push(zt("or"))}},on.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(Gt,"and");){var t=[];this.parseComparison(t),e.push(new jt(Et,t)),e.push(zt("and"))}};var an=["==","!=","<","<=",">=",">","in"];on.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(Gt,an);){var t=this.current;this.parseAddSub(e),e.push(zt(t.value))}};var cn=["+","-","||"];on.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(Gt,cn);){var t=this.current;this.parseTerm(e),e.push(zt(t.value))}};var ln=["*","/","%"];function un(e,t){return Number(e)+Number(t)}function hn(e,t){return e-t}function pn(e,t){return e*t}function fn(e,t){return e/t}function dn(e,t){return e%t}function mn(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function gn(e,t){return e===t}function vn(e,t){return e!==t}function wn(e,t){return e>t}function yn(e,t){return e<t}function xn(e,t){return e>=t}function bn(e,t){return e<=t}function _n(e,t){return Boolean(e&&t)}function $n(e,t){return Boolean(e||t)}function kn(e,t){return qt(t,e)}function Mn(e){return(Math.exp(e)-Math.exp(-e))/2}function An(e){return(Math.exp(e)+Math.exp(-e))/2}function En(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function In(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function Cn(e){return Math.log(e+Math.sqrt(e*e-1))}function Tn(e){return Math.log((1+e)/(1-e))/2}function On(e){return Math.log(e)*Math.LOG10E}function jn(e){return-e}function Sn(e){return!e}function zn(e){return e<0?Math.ceil(e):Math.floor(e)}function Pn(e){return Math.random()*(e||1)}function Fn(e){return Nn(e+1)}on.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(Gt,ln);){var t=this.current;this.parseFactor(e),e.push(zt(t.value))}},on.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;if(this.save(),this.accept(Gt,(function(e){return e.value in t}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===Zt&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(e);if(this.nextToken.type===tn||this.nextToken.type===Qt||this.nextToken.type===Ut||this.nextToken.type===Zt&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(e)}var n=this.current;this.parseFactor(e),e.push(St(n.value))}else this.parseExponential(e)},on.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(Gt,"^");)this.parseFactor(e),e.push(zt("^"))},on.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(Gt,"!");)e.push(St("!"))},on.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;if(this.accept(Gt,(function(e){return e.value in t}))){var n=this.current;this.parseAtom(e),e.push(St(n.value))}else for(this.parseMemberExpression(e);this.accept(Zt,"(");)if(this.accept(Zt,")"))e.push(new jt(Mt,0));else{var s=this.parseArgumentList(e);e.push(new jt(Mt,s))}},on.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(Zt,")");)for(this.parseExpression(e),++t;this.accept(Qt);)this.parseExpression(e),++t;return t},on.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(Gt,".")||this.accept(Kt,"[");){var t=this.current;if("."===t.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(en),e.push(new jt(Ct,this.current.value))}else{if("["!==t.value)throw new Error("unexpected symbol: "+t.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(Kt,"]"),e.push(zt("["))}}};var Rn=4.7421875,Ln=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Nn(e){var t,n;if(function(e){return isFinite(e)&&e===Math.round(e)}(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var s=e-2,i=e-1;s>1;)i*=s,s--;return 0===i&&(i=1),i}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Nn(1-e));if(e>=171.35)return 1/0;if(e>85){var r=e*e,o=r*e,a=o*e,c=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*r)-139/(51840*o)-571/(2488320*a)+163879/(209018880*c)+5246819/(75246796800*c*e))}--e,n=Ln[0];for(var l=1;l<Ln.length;++l)n+=Ln[l]/(e+l);return t=e+Rn+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*n}function Bn(e){return Array.isArray(e)?e.length:String(e).length}function Wn(){for(var e=0,t=0,n=0;n<arguments.length;n++){var s,i=Math.abs(arguments[n]);t<i?(e=e*(s=t/i)*s+1,t=i):e+=i>0?(s=i/t)*s:i}return t===1/0?1/0:t*Math.sqrt(e)}function Hn(e,t,n){return e?t:n}function Xn(e,t){return void 0===t||0==+t?Math.round(e):(e=+e,t=-+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}function qn(e,t,n){return n&&(n[e]=t),t}function Yn(e,t){return e[0|t]}function Vn(e){return 1===arguments.length&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function Un(e){return 1===arguments.length&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function Gn(e,t){if("function"!=typeof e)throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map((function(t,n){return e(t,n)}))}function Dn(e,t,n){if("function"!=typeof e)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(t,n,s){return e(t,n,s)}),t)}function Jn(e,t){if("function"!=typeof e)throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter((function(t,n){return e(t,n)}))}function Zn(e,t){if(!Array.isArray(t)&&"string"!=typeof t)throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function Kn(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function Qn(e){return(e>0)-(e<0)||+e}var es=1/3;function ts(e){return e<0?-Math.pow(-e,es):Math.pow(e,es)}function ns(e){return Math.exp(e)-1}function ss(e){return Math.log(1+e)}function is(e){return Math.log(e)/Math.LN2}function rs(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||Mn,cosh:Math.cosh||An,tanh:Math.tanh||En,asinh:Math.asinh||In,acosh:Math.acosh||Cn,atanh:Math.atanh||Tn,sqrt:Math.sqrt,cbrt:Math.cbrt||ts,log:Math.log,log2:Math.log2||is,ln:Math.log,lg:Math.log10||On,log10:Math.log10||On,expm1:Math.expm1||ns,log1p:Math.log1p||ss,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||zn,"-":jn,"+":Number,exp:Math.exp,not:Sn,length:Bn,"!":Fn,sign:Math.sign||Qn},this.binaryOps={"+":un,"-":hn,"*":pn,"/":fn,"%":dn,"^":Math.pow,"||":mn,"==":gn,"!=":vn,">":wn,"<":yn,">=":xn,"<=":bn,and:_n,or:$n,in:kn,"=":qn,"[":Yn},this.ternaryOps={"?":Hn},this.functions={random:Pn,fac:Fn,min:Un,max:Vn,hypot:Math.hypot||Wn,pyt:Math.hypot||Wn,pow:Math.pow,atan2:Math.atan2,if:Hn,gamma:Nn,roundTo:Xn,map:Gn,fold:Dn,filter:Jn,indexOf:Zn,join:Kn},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}rs.prototype.parse=function(e){var t=[],n=new on(this,new sn(this,e),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(t),n.expect(Ut,"EOF"),new Vt(t,this)},rs.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var os=new rs;rs.parse=function(e){return os.parse(e)},rs.evaluate=function(e,t){return os.parse(e).evaluate(t)};var as={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};rs.prototype.isOperatorEnabled=function(e){var t=function(e){return as.hasOwnProperty(e)?as[e]:e}(e),n=this.options.operators||{};return!(t in n)||!!n[t]};const{Map:cs}=ve;function ls(e,t,n){const s=e.slice();return s[50]=t[n],s[51]=t,s[52]=n,s}function us(e,t){let n,s,r,o,a,c,l,u,h,p,f,d,m,g,v,w,y,x,_,$,C,j,z,F,R,L,N,B,W,H,X,q,Y,V,U,G,D,J,Z,K,Q,ee,te=t[50].animationPrefix+"",ne=t[50].rect.width+"",se=t[50].rect.height+"",ie=t[50].frameRect.frameX+"",re=t[50].frameRect.frameY+"",oe=t[50].frameRect.frameWidth+"",ae=t[50].frameRect.frameHeight+"",ce=t[50].transform.newWidth+"",le=t[50].transform.newHeight+"",ue=t[50].transform.flipX+"",he=t[50].transform.flipY+"",pe=t[52];function fe(...e){return t[18](t[52],t[50],...e)}const de=()=>t[19](n,pe),me=()=>t[19](null,pe);function ge(...e){return t[20](t[52],t[50],...e)}return{key:e,first:null,c(){n=A("tr"),s=A("td"),r=A("input"),c=I(),l=A("td"),u=E(te),h=I(),p=A("td"),f=E(ne),d=I(),m=A("td"),g=E(se),v=I(),w=A("td"),y=E(ie),x=I(),_=A("td"),$=E(re),C=I(),j=A("td"),z=E(oe),F=I(),R=A("td"),L=E(ae),N=I(),B=A("td"),W=E(ce),H=I(),X=A("td"),q=E(le),Y=I(),V=A("td"),U=E(ue),G=I(),D=A("td"),J=E(he),Z=I(),S(r,"type","checkbox"),S(r,"name",o="select-"+t[50].sprId),S(r,"id",a="select-"+t[50].sprId),S(r,"class","svelte-d0sjzi"),S(s,"class","svelte-d0sjzi"),S(l,"class","svelte-d0sjzi"),S(p,"class","svelte-d0sjzi"),S(m,"class","svelte-d0sjzi"),S(w,"class","svelte-d0sjzi"),S(_,"class","svelte-d0sjzi"),S(j,"class","svelte-d0sjzi"),S(R,"class","svelte-d0sjzi"),S(B,"class","svelte-d0sjzi"),S(X,"class","svelte-d0sjzi"),S(V,"class","svelte-d0sjzi"),S(D,"class","svelte-d0sjzi"),S(n,"tabindex",K=t[52]),S(n,"class","svelte-d0sjzi"),this.first=n},m(e,t){k(e,n,t),b(n,s),b(s,r),b(n,c),b(n,l),b(l,u),b(n,h),b(n,p),b(p,f),b(n,d),b(n,m),b(m,g),b(n,v),b(n,w),b(w,y),b(n,x),b(n,_),b(_,$),b(n,C),b(n,j),b(j,z),b(n,F),b(n,R),b(R,L),b(n,N),b(n,B),b(B,W),b(n,H),b(n,X),b(X,q),b(n,Y),b(n,V),b(V,U),b(n,G),b(n,D),b(D,J),b(n,Z),de(),Q||(ee=[T(r,"change",fe),T(n,"click",O(ge))],Q=!0)},p(e,s){t=e,1024&s[0]&&o!==(o="select-"+t[50].sprId)&&S(r,"name",o),1024&s[0]&&a!==(a="select-"+t[50].sprId)&&S(r,"id",a),1024&s[0]&&te!==(te=t[50].animationPrefix+"")&&P(u,te),1024&s[0]&&ne!==(ne=t[50].rect.width+"")&&P(f,ne),1024&s[0]&&se!==(se=t[50].rect.height+"")&&P(g,se),1024&s[0]&&ie!==(ie=t[50].frameRect.frameX+"")&&P(y,ie),1024&s[0]&&re!==(re=t[50].frameRect.frameY+"")&&P($,re),1024&s[0]&&oe!==(oe=t[50].frameRect.frameWidth+"")&&P(z,oe),1024&s[0]&&ae!==(ae=t[50].frameRect.frameHeight+"")&&P(L,ae),1024&s[0]&&ce!==(ce=t[50].transform.newWidth+"")&&P(W,ce),1024&s[0]&&le!==(le=t[50].transform.newHeight+"")&&P(q,le),1024&s[0]&&ue!==(ue=t[50].transform.flipX+"")&&P(U,ue),1024&s[0]&&he!==(he=t[50].transform.flipY+"")&&P(J,he),1024&s[0]&&K!==(K=t[52])&&S(n,"tabindex",K),pe!==t[52]&&(me(),pe=t[52],de())},d(e){e&&M(n),me(),Q=!1,i(ee)}}}function hs(e){let t,n,s,r,o,a,c,l,u,h,p,f,d,m,g,v,w,y,x,_,$,C,O,j,z,F,R,L,N,B,W,H,X,q,Y,V,U,G,D,J,Z,K,Q,ee,te,ne,se,ie,re,oe,ae,ce,le,ue,he,pe,fe,de,me,ge,ve,ye,be,_e,$e,ke,Me,Ae,Ee,Ie,Ce,Te,Oe,je,Se,ze,Pe,Fe,Re,Le,Ne,Be,We,He,Xe,qe,Ye,Ve,Ue,Ge,De=[],Je=new cs,Ze=(e[2]&&e[2].animationPrefix)+"",Ke=(e[2]&&e[2].rect.width)+"",Qe=(e[2]&&e[2].rect.height)+"",et=e[8].length+"",tt=e[10];const nt=e=>e[50].sprId;for(let t=0;t<tt.length;t+=1){let n=ls(e,tt,t),s=nt(n);Je.set(s,De[t]=us(s,n))}return{c(){t=A("div"),n=A("div"),s=A("table"),r=A("thead"),r.innerHTML='<th class="svelte-d0sjzi"></th> \n                    <th class="svelte-d0sjzi">Prefix</th> \n                    <th class="svelte-d0sjzi">Width</th> \n                    <th class="svelte-d0sjzi">Height</th> \n                    <th class="svelte-d0sjzi">Frame X</th> \n                    <th class="svelte-d0sjzi">Frame Y</th> \n                    <th class="svelte-d0sjzi">Frame Width</th> \n                    <th class="svelte-d0sjzi">Frame Height</th> \n                    <th class="svelte-d0sjzi">New Image Width</th> \n                    <th class="svelte-d0sjzi">New Image Height</th> \n                    <th class="svelte-d0sjzi">flip X</th> \n                    <th class="svelte-d0sjzi">flip Y</th>',o=I(),a=A("tbody");for(let e=0;e<De.length;e+=1)De[e].c();c=I(),l=A("div"),u=A("div"),h=A("div"),p=A("button"),f=E("< Previous"),m=I(),g=A("table"),v=A("thead"),v.innerHTML='<th class="svelte-d0sjzi"></th> \n                            <th class="svelte-d0sjzi">Prefix</th> \n                            <th class="svelte-d0sjzi">Width</th> \n                            <th class="svelte-d0sjzi">Height</th>',w=I(),y=A("tbody"),x=A("tr"),_=A("td"),$=A("input"),j=I(),z=A("td"),F=E(Ze),R=I(),L=A("td"),N=E(Ke),B=I(),W=A("td"),H=E(Qe),X=I(),q=A("button"),Y=E("Next >"),U=I(),G=A("p"),D=E("You have selected "),J=E(et),Z=E(" frames"),K=I(),Q=A("button"),ee=E("Modify selection"),ne=I(),se=A("div"),ie=A("label"),re=E("Frame X\r\n                    "),oe=A("input"),ae=I(),ce=A("label"),le=E("Frame Y\r\n                    "),ue=A("input"),he=I(),pe=A("label"),fe=E("Frame Width\r\n                    "),de=A("input"),me=I(),ge=A("label"),ve=E("Frame Height\r\n                    "),ye=A("input"),be=I(),_e=A("label"),$e=E("Image Width\r\n                    "),ke=A("input"),Me=I(),Ae=A("label"),Ee=E("Image Height\r\n                    "),Ie=A("input"),Ce=I(),Te=A("label"),Oe=E("Flip X\r\n                    "),je=A("input"),Se=I(),ze=A("label"),Pe=E("Flip Y\r\n                    "),Fe=A("input"),Re=I(),Le=A("div"),Ne=A("label"),Be=E("Animation Scale\r\n                        "),We=A("input"),He=I(),Xe=A("div"),qe=A("canvas"),Ye=I(),Ve=A("button"),Ve.textContent="Modify selected",S(s,"class","not-selectable svelte-d0sjzi"),S(n,"id","table-div"),S(n,"class","svelte-d0sjzi"),p.disabled=d=e[10].length<1,$.disabled=C=e[10].length<1||null===e[1],S($,"type","checkbox"),S($,"name","test"),S($,"id","test"),$.checked=O=e[8].indexOf(e[1])>=0,S(_,"class","svelte-d0sjzi"),S(z,"class","svelte-d0sjzi"),S(L,"class","svelte-d0sjzi"),S(W,"class","svelte-d0sjzi"),S(x,"class","svelte-d0sjzi"),S(g,"class","not-selectable svelte-d0sjzi"),q.disabled=V=e[10].length<1,S(h,"class","mini-controls-horizontal svelte-d0sjzi"),Q.disabled=te=e[8].length<1,S(u,"id","mini-table-view"),S(u,"class","svelte-d0sjzi"),S(oe,"type","number"),S(oe,"name","frame-x"),S(oe,"id","frame-x"),S(oe,"class","svelte-d0sjzi"),S(ie,"class","xmlview-input svelte-d0sjzi"),S(ie,"for","frame-x"),S(ue,"type","number"),S(ue,"name","frame-y"),S(ue,"id","frame-y"),S(ue,"class","svelte-d0sjzi"),S(ce,"class","xmlview-input svelte-d0sjzi"),S(ce,"for","frame-y"),S(de,"type","number"),S(de,"name","frame-width"),S(de,"id","frame-width"),S(de,"class","svelte-d0sjzi"),S(pe,"class","xmlview-input svelte-d0sjzi"),S(pe,"for","frame-width"),S(ye,"type","number"),S(ye,"name","frame-height"),S(ye,"id","frame-height"),S(ye,"class","svelte-d0sjzi"),S(ge,"class","xmlview-input svelte-d0sjzi"),S(ge,"for","frame-height"),S(ke,"type","number"),S(ke,"name","scale-x"),S(ke,"id","scale-x"),S(ke,"min","1"),S(ke,"class","svelte-d0sjzi"),S(_e,"class","xmlview-input svelte-d0sjzi"),S(_e,"for","scale-x"),S(Ie,"type","number"),S(Ie,"name","scale-y"),S(Ie,"id","scale-y"),S(Ie,"min","1"),S(Ie,"class","svelte-d0sjzi"),S(Ae,"class","xmlview-input svelte-d0sjzi"),S(Ae,"for","scale-y"),S(je,"type","checkbox"),S(je,"name","flip-x"),S(je,"id","flip-x"),S(je,"class","svelte-d0sjzi"),S(Te,"class","xmlview-input svelte-d0sjzi"),S(Te,"for","flip-x"),S(Fe,"type","checkbox"),S(Fe,"name","flip-y"),S(Fe,"id","flip-y"),S(Fe,"class","svelte-d0sjzi"),S(ze,"class","xmlview-input svelte-d0sjzi"),S(ze,"for","flip-y"),S(We,"type","number"),S(We,"name","animation-scale"),S(We,"id","animation-scale"),S(We,"min","0.01"),S(We,"step","0.01"),S(We,"class","svelte-d0sjzi"),S(Ne,"class","xmlview-input svelte-d0sjzi"),S(Ne,"for","animation-scale"),S(Le,"class","xml-input-cell-container"),S(se,"class","controls-horizontal svelte-d0sjzi"),S(qe,"width","600px"),S(qe,"height","500px"),S(qe,"class","svelte-d0sjzi"),S(Xe,"class","canvas-div svelte-d0sjzi"),S(t,"id","view-container"),S(t,"class","svelte-d0sjzi"),S(Ve,"class","modify-btn-large-screen svelte-d0sjzi")},m(i,d){k(i,t,d),b(t,n),b(n,s),b(s,r),b(s,o),b(s,a);for(let e=0;e<De.length;e+=1)De[e]&&De[e].m(a,null);b(t,c),b(t,l),b(l,u),b(u,h),b(h,p),b(p,f),b(h,m),b(h,g),b(g,v),b(g,w),b(g,y),b(y,x),b(x,_),b(_,$),b(x,j),b(x,z),b(z,F),b(x,R),b(x,L),b(L,N),b(x,B),b(x,W),b(W,H),b(h,X),b(h,q),b(q,Y),b(u,U),b(u,G),b(G,D),b(G,J),b(G,Z),b(u,K),b(u,Q),b(Q,ee),b(l,ne),b(l,se),b(se,ie),b(ie,re),b(ie,oe),e[25](oe),b(se,ae),b(se,ce),b(ce,le),b(ce,ue),e[26](ue),b(se,he),b(se,pe),b(pe,fe),b(pe,de),e[27](de),b(se,me),b(se,ge),b(ge,ve),b(ge,ye),e[28](ye),b(se,be),b(se,_e),b(_e,$e),b(_e,ke),e[29](ke),b(se,Me),b(se,Ae),b(Ae,Ee),b(Ae,Ie),e[30](Ie),b(se,Ce),b(se,Te),b(Te,Oe),b(Te,je),e[31](je),b(se,Se),b(se,ze),b(ze,Pe),b(ze,Fe),e[32](Fe),b(se,Re),b(se,Le),b(Le,Ne),b(Ne,Be),b(Ne,We),e[33](We),b(l,He),b(l,Xe),b(Xe,qe),e[34](qe),k(i,Ye,d),k(i,Ve,d),Ue||(Ge=[T(s,"keydown",e[11]),T(p,"click",e[21]),T($,"change",e[22]),T(q,"click",e[23]),T(Q,"click",e[24]),T(oe,"input",e[15]),T(ue,"input",e[15]),T(de,"input",e[15]),T(ye,"input",e[15]),T(ke,"input",e[15]),T(Ie,"input",e[15]),T(je,"input",e[15]),T(Fe,"input",e[15]),T(We,"input",e[13]),T(Ve,"click",e[35])],Ue=!0)},p(e,t){87072&t[0]&&(tt=e[10],De=xe(De,t,nt,1,e,tt,Je,a,we,us,null,ls)),1024&t[0]&&d!==(d=e[10].length<1)&&(p.disabled=d),1026&t[0]&&C!==(C=e[10].length<1||null===e[1])&&($.disabled=C),258&t[0]&&O!==(O=e[8].indexOf(e[1])>=0)&&($.checked=O),4&t[0]&&Ze!==(Ze=(e[2]&&e[2].animationPrefix)+"")&&P(F,Ze),4&t[0]&&Ke!==(Ke=(e[2]&&e[2].rect.width)+"")&&P(N,Ke),4&t[0]&&Qe!==(Qe=(e[2]&&e[2].rect.height)+"")&&P(H,Qe),1024&t[0]&&V!==(V=e[10].length<1)&&(q.disabled=V),256&t[0]&&et!==(et=e[8].length+"")&&P(J,et),256&t[0]&&te!==(te=e[8].length<1)&&(Q.disabled=te)},d(n){n&&M(t);for(let e=0;e<De.length;e+=1)De[e].d();e[25](null),e[26](null),e[27](null),e[28](null),e[29](null),e[30](null),e[31](null),e[32](null),e[33](null),e[34](null),n&&M(Ye),n&&M(Ve),Ue=!1,i(Ge)}}}function ps(t){let n;return{c(){n=A("div"),n.innerHTML="<h4>XML View</h4>",S(n,"slot","header")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function fs(t){let n,s,i,r,o,a,c,l,u,h,p,f,d,m,g,v,w,y,x,_,$,C,O,j,z,P,F,R,L,N,B,W,H,X,q,Y,V,U,G,D,J,Z,K,Q,ee;return{c(){n=A("div"),s=A("h3"),s.textContent="Modify Selection",i=I(),r=A("div"),o=A("label"),a=E("Frame X\r\n                "),c=A("input"),l=I(),u=A("label"),h=E("Frame Y\r\n                "),p=A("input"),f=I(),d=A("label"),m=E("Frame Width\r\n                "),g=A("input"),v=I(),w=A("label"),y=E("Frame Height\r\n                "),x=A("input"),_=I(),$=A("label"),C=E("Image Width\r\n                "),O=A("input"),j=I(),z=A("label"),P=E("Image Height\r\n                "),F=A("input"),R=I(),L=A("label"),N=E("Flip X\r\n                "),B=A("input"),W=I(),H=A("label"),X=E("Flip Y\r\n                "),q=A("input"),Y=I(),V=A("button"),V.textContent="Modify",U=I(),G=A("p"),G.innerHTML="Note: You can enter a number or an expression like <strong><code>value + 3</code></strong>",D=I(),J=A("p"),J.innerHTML="Expressions will be applied on the current value of each cell (by substituting &#39;<code>value</code>&#39;)",Z=I(),K=A("p"),K.innerHTML="You can flip boolean values by using the expression: &#39;<code><i>not</i> value</code>&#39; (and the only values allowed are <code>true</code> and <code>false</code> )",S(c,"type","text"),S(c,"name","mod-frame-x"),S(c,"id","mod-frame-x"),S(c,"class","svelte-d0sjzi"),S(o,"class","xmlview-input svelte-d0sjzi"),S(o,"for","mod-frame-x"),S(p,"type","text"),S(p,"name","mod-frame-y"),S(p,"id","mod-frame-y"),S(p,"class","svelte-d0sjzi"),S(u,"class","xmlview-input svelte-d0sjzi"),S(u,"for","mod-frame-y"),S(g,"type","text"),S(g,"name","mod-frame-width"),S(g,"id","mod-frame-width"),S(g,"class","svelte-d0sjzi"),S(d,"class","xmlview-input svelte-d0sjzi"),S(d,"for","mod-frame-width"),S(x,"type","text"),S(x,"name","mod-frame-height"),S(x,"id","mod-frame-height"),S(x,"class","svelte-d0sjzi"),S(w,"class","xmlview-input svelte-d0sjzi"),S(w,"for","mod-frame-height"),S(O,"type","text"),S(O,"name","mod-scale-x"),S(O,"id","mod-scale-x"),S(O,"min","1"),S(O,"class","svelte-d0sjzi"),S($,"class","xmlview-input svelte-d0sjzi"),S($,"for","mod-scale-x"),S(F,"type","text"),S(F,"name","mod-scale-y"),S(F,"id","mod-scale-y"),S(F,"min","1"),S(F,"class","svelte-d0sjzi"),S(z,"class","xmlview-input svelte-d0sjzi"),S(z,"for","mod-scale-y"),S(B,"type","text"),S(B,"name","mod-flip-x"),S(B,"id","mod-flip-x"),S(B,"class","svelte-d0sjzi"),S(L,"class","xmlview-input svelte-d0sjzi"),S(L,"for","mod-flip-x"),S(q,"type","text"),S(q,"name","mod-flip-y"),S(q,"id","mod-flip-y"),S(q,"class","svelte-d0sjzi"),S(H,"class","xmlview-input svelte-d0sjzi"),S(H,"for","mod-flip-y"),S(r,"class","controls-horizontal svelte-d0sjzi")},m(e,M){k(e,n,M),b(n,s),b(n,i),b(n,r),b(r,o),b(o,a),b(o,c),t[37](c),b(r,l),b(r,u),b(u,h),b(u,p),t[38](p),b(r,f),b(r,d),b(d,m),b(d,g),t[39](g),b(r,v),b(r,w),b(w,y),b(w,x),t[40](x),b(r,_),b(r,$),b($,C),b($,O),t[41](O),b(r,j),b(r,z),b(z,P),b(z,F),t[42](F),b(r,R),b(r,L),b(L,N),b(L,B),t[43](B),b(r,W),b(r,H),b(H,X),b(H,q),t[44](q),b(n,Y),b(n,V),b(n,U),b(n,G),b(n,D),b(n,J),b(n,Z),b(n,K),Q||(ee=T(V,"click",t[17]),Q=!0)},p:e,d(e){e&&M(n),t[37](null),t[38](null),t[39](null),t[40](null),t[41](null),t[42](null),t[43](null),t[44](null),Q=!1,ee()}}}function ds(e){let t,n,s,i,r,o;function a(t){e[36](t)}let c={closeButtonMsg:"Save and Close",$$slots:{header:[ps],default:[hs]},$$scope:{ctx:e}};function l(t){e[45](t)}void 0!==e[0]&&(c.showModal=e[0]),t=new lt({props:c}),J.push((()=>be(t,"showModal",a)));let u={$$slots:{default:[fs]},$$scope:{ctx:e}};return void 0!==e[7]&&(u.showModal=e[7]),i=new lt({props:u}),J.push((()=>be(i,"showModal",l))),{c(){_e(t.$$.fragment),s=I(),_e(i.$$.fragment)},m(e,n){$e(t,e,n),k(e,s,n),$e(i,e,n),o=!0},p(e,s){const o={};1534&s[0]|4194304&s[1]&&(o.$$scope={dirty:s,ctx:e}),!n&&1&s[0]&&(n=!0,o.showModal=e[0],ne((()=>n=!1))),t.$set(o);const a={};512&s[0]|4194304&s[1]&&(a.$$scope={dirty:s,ctx:e}),!r&&128&s[0]&&(r=!0,a.showModal=e[7],ne((()=>r=!1))),i.$set(a)},i(e){o||(de(t.$$.fragment,e),de(i.$$.fragment,e),o=!0)},o(e){me(t.$$.fragment,e),me(i.$$.fragment,e),o=!1},d(e){ke(t,e),e&&M(s),ke(i,e)}}}function ms(e,t,n){let s;l(e,Re,(e=>n(10,s=e)));let{showView:i=!1}=t,r=null,o=null;const a=["frameX","frameY","frameWidth","frameHeight"],c=["newWidth","newHeight"],u=["flipX","flipY"],h={frameX:null,frameY:null,frameWidth:null,frameHeight:null,newWidth:null,newHeight:null,flipX:null,flipY:null};let p=null,f=[],d=null,m=new Ze(null),g=!1;async function v(e){d&&(await m.initFrames([e]),m.clearCanvas(),m.drawImage(m.curImgs[0],e,!0))}function w(e){n(1,r=e),n(2,o=s[e]);for(const e of f)e&&e.classList.remove("cell-selected");f[e].classList.add("cell-selected");for(const e of a)n(3,h[e].value=""+o.frameRect[e],h);for(const e of c)n(3,h[e].value=""+o.transform[e],h);for(const e of u)n(3,h[e].checked=o.transform[e],h)}V((()=>{m=new Ze(d.getContext("2d")),n(4,p.value=""+m.animationScale,p)}));let y=[];function x(e,t){if(e.target.checked)n(8,y=[...y,t]);else{const e=y.indexOf(t);e>=0&&y.splice(e,1),n(8,y)}}let b={frameX:null,frameY:null,frameWidth:null,frameHeight:null,newWidth:null,newHeight:null,flipX:null,flipY:null};return e.$$set=e=>{"showView"in e&&n(0,i=e.showView)},[i,r,o,h,p,f,d,g,y,b,s,function(e){switch(e.preventDefault(),e.key){case"ArrowUp":w(r-1>=0?r-1:s.length-1);break;case"ArrowDown":w((r+1)%s.length);break;case"Home":w(0);break;case"End":w(s.length-1)}v(s[r]).then((()=>{})),f[r].scrollIntoView(!1)},v,function(e){m.animationScale=parseFloat(e.target.value),v(o).then((()=>{}))},w,function(e){for(const e of a)n(2,o.frameRect[e]=+h[e].value,o);for(const e of c)n(2,o.transform[e]=+h[e].value,o);for(const e of u)n(2,o.transform[e]=h[e].checked,o);n(2,o._changed=!0,o),Re.set(s),v(o).then((()=>{}))},x,function(){const e=[];for(const t of a)e.push([t,b[t].value]);for(const t of c)e.push([t,b[t].value]);for(const t of u)e.push([t,b[t].value]);const t=new rs({operators:{logical:!0}}),i=new Map(e.map((([e,n])=>n.length>0?[e,t.parse(n)]:[e,null])));Re.update((e=>{for(const t of y){for(const n of a){const s=i.get(n);s&&(e[t].frameRect[n]=Math.floor(s.evaluate({value:e[t].frameRect[n]})))}for(const n of c){i.get(n)&&(e[t].transform[n]=Math.floor(i.get(n).evaluate({value:e[t].transform[n]})))}for(const n of u){i.get(n)&&(e[t].transform[n]=!!i.get(n).evaluate({value:e[t].transform[n]}))}e[t]._changed=!0}return e})),w(r),v(s[r]).then((()=>{})),n(7,g=!1);const o=e=>{for(const t of e)if(1===t.children.length)return t.children[0];return null};for(const e of y){const t=o(f[e].children);if(t){t.checked=!1}}n(8,y=[])},async(e,t,n)=>{w(e),await v(t),x(n,e)},function(e,t){J[e?"unshift":"push"]((()=>{f[t]=e,n(5,f)}))},async(e,t,n)=>{w(e),await v(t)},async()=>{w(r-1<0?s.length-1:r-1),await v(s[r])},async e=>{w(r),await v(s[r]),x(e,r)},async()=>{w((r+1)%s.length),await v(s[r])},()=>n(7,g=!0),function(e){J[e?"unshift":"push"]((()=>{h.frameX=e,n(3,h)}))},function(e){J[e?"unshift":"push"]((()=>{h.frameY=e,n(3,h)}))},function(e){J[e?"unshift":"push"]((()=>{h.frameWidth=e,n(3,h)}))},function(e){J[e?"unshift":"push"]((()=>{h.frameHeight=e,n(3,h)}))},function(e){J[e?"unshift":"push"]((()=>{h.newWidth=e,n(3,h)}))},function(e){J[e?"unshift":"push"]((()=>{h.newHeight=e,n(3,h)}))},function(e){J[e?"unshift":"push"]((()=>{h.flipX=e,n(3,h)}))},function(e){J[e?"unshift":"push"]((()=>{h.flipY=e,n(3,h)}))},function(e){J[e?"unshift":"push"]((()=>{p=e,n(4,p)}))},function(e){J[e?"unshift":"push"]((()=>{d=e,n(6,d)}))},()=>n(7,g=!0),function(e){i=e,n(0,i)},function(e){J[e?"unshift":"push"]((()=>{b.frameX=e,n(9,b)}))},function(e){J[e?"unshift":"push"]((()=>{b.frameY=e,n(9,b)}))},function(e){J[e?"unshift":"push"]((()=>{b.frameWidth=e,n(9,b)}))},function(e){J[e?"unshift":"push"]((()=>{b.frameHeight=e,n(9,b)}))},function(e){J[e?"unshift":"push"]((()=>{b.newWidth=e,n(9,b)}))},function(e){J[e?"unshift":"push"]((()=>{b.newHeight=e,n(9,b)}))},function(e){J[e?"unshift":"push"]((()=>{b.flipX=e,n(9,b)}))},function(e){J[e?"unshift":"push"]((()=>{b.flipY=e,n(9,b)}))},function(e){g=e,n(7,g)}]}class gs extends Ee{constructor(e){super(),Ae(this,e,ms,ds,o,{showView:0},null,[-1,-1])}}class vs{constructor(e,t,n,s,i){this.sprId=e,this.type=t,this.imgfileref=n,this.xmlfileref=s,this.selected=!1,this.spritesheetId=i,this.animationPrefix="",this.rect={x:0,y:0,width:null,height:null},this.transform={newWidth:null,newHeight:null,flipX:!1,flipY:!1},this.frameRect={frameX:0,frameY:0,frameWidth:null,frameHeight:null},this._changed=!1}clone(){const e=new vs(this.sprId,this.type,this.imgfileref,this.xmlfileref,this.spritesheetId);return e.selected=this.selected,e.animationPrefix=this.animationPrefix,e.rect=Object.assign({},this.rect),e.transform=Object.assign({},this.transform),e.frameRect=Object.assign({},this.frameRect),e}}function ws(e){let t,n,s,r,o,a,c,l,u,h,p,f,d,m,g,v,w,y,x,_,$,C,O,j,P,R,L,N,B,W,H,X,q,Y,V,U,G,D,J,Z,K,Q,ee,te,ne,se,ie,re,oe,ae,ce;return oe=function(e){let t;return{p(...n){t=n,t.forEach((t=>e.push(t)))},r(){t.forEach((t=>e.splice(e.indexOf(t),1)))}}}(e[5][0]),{c(){t=A("div"),n=A("fieldset"),s=A("legend"),s.textContent="Image",r=I(),o=A("label"),a=E("Image Padding\r\n                "),c=A("input"),l=I(),u=A("label"),h=A("input"),p=E("\r\n                Clip to Bounding Box"),f=I(),d=A("br"),m=I(),g=A("fieldset"),v=A("legend"),v.textContent="Animation Name Prefixing",w=I(),y=A("label"),x=A("input"),_=E("\r\n                Use character name as prefix"),$=I(),C=A("label"),O=A("input"),j=E("\r\n                Use custom name as prefix"),P=I(),R=A("label"),R.textContent="Custom Prefix",L=I(),N=A("input"),W=I(),H=A("label"),X=A("input"),q=E("\r\n                Do not use a prefix"),Y=I(),V=A("br"),U=I(),G=A("label"),D=A("input"),J=E("\r\n                Use Prefix even if frame is imported from existing Spritesheet"),Z=I(),K=A("br"),Q=I(),ee=A("fieldset"),te=A("legend"),te.textContent="Image Sequence Generation",ne=I(),se=A("label"),ie=A("input"),re=E("\r\n                Only export Unique Frames when exporting as Image Sequence"),S(c,"type","number"),S(c,"name","padding"),S(c,"id","padding"),S(c,"min","0"),S(c,"max","20"),S(o,"for","padding"),S(h,"type","checkbox"),S(h,"name","clip-to-bb"),S(h,"id","clip-to-bb"),S(u,"for","clip-to-bb"),S(x,"type","radio"),S(x,"name","prefix-type"),S(x,"id","prefix-type-character-name"),x.__value="character-name",x.value=x.__value,S(y,"for","prefix-type-character-name"),S(O,"type","radio"),S(O,"name","prefix-type"),S(O,"id","prefix-type-custom-prefix"),O.__value="custom-prefix",O.value=O.__value,S(C,"for","prefix-type-custom-prefix"),S(R,"for","custom-prefix"),S(N,"type","text"),S(N,"id","custom-prefix"),N.disabled=B="custom-prefix"!==e[1].prefixType,S(X,"type","radio"),S(X,"name","prefix-type"),S(X,"id","prefix-type-no-prefix"),X.__value="no-prefix",X.value=X.__value,S(H,"for","prefix-type-no-prefix"),S(D,"type","checkbox"),S(D,"name","use-prefix-on-existing-xmls"),S(D,"id","use-prefix-on-existing-xmls"),S(G,"for","use-prefix-on-existing-xmls"),S(ie,"type","checkbox"),S(ie,"name","img-seq-gen"),S(ie,"id","img-seq-gen"),S(se,"for","img-seq-gen"),S(t,"id","modal-content"),S(t,"class","svelte-153evf8"),oe.p(x,O,X)},m(i,M){k(i,t,M),b(t,n),b(n,s),b(n,r),b(n,o),b(o,a),b(o,c),F(c,e[1].padding),b(n,l),b(n,u),b(u,h),h.checked=e[1].clipToBoundingBox,b(u,p),b(t,f),b(t,d),b(t,m),b(t,g),b(g,v),b(g,w),b(g,y),b(y,x),x.checked=x.__value===e[1].prefixType,b(y,_),b(g,$),b(g,C),b(C,O),O.checked=O.__value===e[1].prefixType,b(C,j),b(g,P),b(g,R),b(g,L),b(g,N),F(N,e[1].customPrefix),b(g,W),b(g,H),b(H,X),X.checked=X.__value===e[1].prefixType,b(H,q),b(g,Y),b(g,V),b(g,U),b(g,G),b(G,D),D.checked=e[1].usePrefixOnXMLFrames,b(G,J),b(t,Z),b(t,K),b(t,Q),b(t,ee),b(ee,te),b(ee,ne),b(ee,se),b(se,ie),ie.checked=e[1].uniqueFramesOnly,b(se,re),ae||(ce=[T(c,"input",e[2]),T(h,"change",e[3]),T(x,"change",e[4]),T(O,"change",e[6]),T(N,"input",e[7]),T(X,"change",e[8]),T(D,"change",e[9]),T(ie,"change",e[10])],ae=!0)},p(e,t){2&t&&z(c.value)!==e[1].padding&&F(c,e[1].padding),2&t&&(h.checked=e[1].clipToBoundingBox),2&t&&(x.checked=x.__value===e[1].prefixType),2&t&&(O.checked=O.__value===e[1].prefixType),2&t&&B!==(B="custom-prefix"!==e[1].prefixType)&&(N.disabled=B),2&t&&N.value!==e[1].customPrefix&&F(N,e[1].customPrefix),2&t&&(X.checked=X.__value===e[1].prefixType),2&t&&(D.checked=e[1].usePrefixOnXMLFrames),2&t&&(ie.checked=e[1].uniqueFramesOnly)},d(e){e&&M(t),oe.r(),ae=!1,i(ce)}}}function ys(t){let n;return{c(){n=A("h2"),n.textContent="Settings",S(n,"slot","header"),S(n,"class","svelte-153evf8")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function xs(e){let t,n,s;function i(t){e[11](t)}let r={$$slots:{header:[ys],default:[ws]},$$scope:{ctx:e}};return void 0!==e[0]&&(r.showModal=e[0]),t=new lt({props:r}),J.push((()=>be(t,"showModal",i))),{c(){_e(t.$$.fragment)},m(e,n){$e(t,e,n),s=!0},p(e,[s]){const i={};4098&s&&(i.$$scope={dirty:s,ctx:e}),!n&&1&s&&(n=!0,i.showModal=e[0],ne((()=>n=!1))),t.$set(i)},i(e){s||(de(t.$$.fragment,e),s=!0)},o(e){me(t.$$.fragment,e),s=!1},d(e){ke(t,e)}}}function bs(e,t,n){let{showView:s=!1}=t,{settings:i={padding:2,prefixType:"no-prefix",usePrefixOnXMLFrames:!1,customPrefix:"",uniqueFramesOnly:!1,clipToBoundingBox:!0}}=t;return e.$$set=e=>{"showView"in e&&n(0,s=e.showView),"settings"in e&&n(1,i=e.settings)},[s,i,function(){i.padding=z(this.value),n(1,i)},function(){i.clipToBoundingBox=this.checked,n(1,i)},function(){i.prefixType=this.__value,n(1,i)},[[]],function(){i.prefixType=this.__value,n(1,i)},function(){i.customPrefix=this.value,n(1,i)},function(){i.prefixType=this.__value,n(1,i)},function(){i.usePrefixOnXMLFrames=this.checked,n(1,i)},function(){i.uniqueFramesOnly=this.checked,n(1,i)},function(e){s=e,n(0,s)}]}class _s extends Ee{constructor(e){super(),Ae(this,e,bs,xs,o,{showView:0,settings:1})}}function $s(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)}function ks(n){let s,o,a,c;const l=n[7].default,h=u(l,n,n[6],null);return{c(){s=A("div"),h&&h.c(),S(s,"class","drop-up-menu svelte-1dstt0r")},m(e,t){k(e,s,t),h&&h.m(s,null),n[10](s),c=!0},p(e,t){n=e,h&&h.p&&(!c||64&t)&&f(h,l,n,n[6],c?p(l,n[6],t,null):d(n[6]),null)},i(i){c||(de(h,i),te((()=>{c&&(a&&a.end(1),o=function(n,s,i){const o={direction:"in"};let a,c,l=s(n,i,o),u=!1,h=0;function p(){a&&X(n,a)}function f(){const{delay:s=0,duration:i=300,easing:r=t,tick:o=e,css:f}=l||ge;f&&(a=H(n,0,1,i,s,r,f,h++)),o(0,1);const d=g()+s,m=d+i;c&&c.abort(),u=!0,te((()=>le(n,!0,"start"))),c=x((e=>{if(u){if(e>=m)return o(1,0),le(n,!0,"end"),p(),u=!1;if(e>=d){const t=r((e-d)/i);o(t,1-t)}}return u}))}let d=!1;return{start(){d||(d=!0,X(n),r(l)?(l=l(o),ce().then(f)):f())},invalidate(){d=!1},end(){u&&(p(),u=!1)}}}(s,n[4],{duration:100,easing:$s}),o.start())})),c=!0)},o(l){me(h,l),o&&o.invalidate(),a=function(n,s,o){const a={direction:"out"};let c,l=s(n,o,a),u=!0;const h=he;function p(){const{delay:s=0,duration:r=300,easing:o=t,tick:a=e,css:p}=l||ge;p&&(c=H(n,1,0,r,s,o,p));const f=g()+s,d=f+r;te((()=>le(n,!1,"start"))),x((e=>{if(u){if(e>=d)return a(0,1),le(n,!1,"end"),--h.r||i(h.c),!1;if(e>=f){const t=o((e-f)/r);a(1-t,t)}}return u}))}return h.r+=1,r(l)?ce().then((()=>{l=l(a),p()})):p(),{end(e){e&&l.tick&&l.tick(1,0),u&&(c&&X(n,c),u=!1)}}}(s,n[4],{duration:100,easing:$s}),c=!1},d(e){e&&M(s),h&&h.d(e),n[10](null),e&&a&&a.end()}}}function Ms(e){let t,n,s,i,r,o,a,c=e[2]&&ks(e);return{c(){t=A("button"),n=E(e[0]),s=I(),c&&c.c(),i=C()},m(l,u){k(l,t,u),b(t,n),e[8](t),k(l,s,u),c&&c.m(l,u),k(l,i,u),r=!0,o||(a=T(t,"click",j(O(e[9]))),o=!0)},p(e,[t]){(!r||1&t)&&P(n,e[0]),e[2]?c?(c.p(e,t),4&t&&de(c,1)):(c=ks(e),c.c(),de(c,1),c.m(i.parentNode,i)):c&&(pe(),me(c,1,1,(()=>{c=null})),fe())},i(e){r||(de(c),r=!0)},o(e){me(c),r=!1},d(n){n&&M(t),e[8](null),n&&M(s),c&&c.d(n),n&&M(i),o=!1,a()}}}function As(e,n,s){let{$$slots:i={},$$scope:r}=n,o=!1,{buttonText:a}=n,c=null,l=null,u=0;const h=()=>{s(5,u=l?l.getBoundingClientRect().left:0)};function p(e){c&&e.target!==c&&s(2,o=!1)}V((()=>{h(),window.addEventListener("resize",h),document.addEventListener("click",p)})),U((()=>{window.removeEventListener("resize",h),document.removeEventListener("click",p)}));return e.$$set=e=>{"buttonText"in e&&s(0,a=e.buttonText),"$$scope"in e&&s(6,r=e.$$scope)},e.$$.update=()=>{34&e.$$.dirty&&c&&s(1,c.style.transform=`translateX(${u-15}px)`,c)},[a,c,o,l,function(e,n){const s=function(e,{delay:n=0,duration:s=400,easing:i=t}={}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:s,easing:i,css:e=>"opacity: "+e*r}}(e,n);return{duration:n.duration,css:s.css}},u,r,i,function(e){J[e?"unshift":"push"]((()=>{l=e,s(3,l)}))},()=>{s(2,o=!o)},function(e){J[e?"unshift":"push"]((()=>{c=e,s(1,c),s(5,u)}))}]}class Es extends Ee{constructor(e){super(),Ae(this,e,As,Ms,o,{buttonText:0})}}function Is(e){let t,n,s,r,o,a,c,l,u,h,p,f,d,m=(null!==e[8]?e[8].name:"")+"",g=(null!==e[9]?e[9].name:"")+"";return{c(){t=A("button"),t.textContent="Spritesheet (.png)",n=I(),s=A("button"),s.textContent="XML File (.xml)",r=I(),o=A("p"),a=E("Spritesheet selected: "),c=E(m),l=I(),u=A("p"),h=E("XML selected: "),p=E(g)},m(i,m){k(i,t,m),k(i,n,m),k(i,s,m),k(i,r,m),k(i,o,m),b(o,a),b(o,c),k(i,l,m),k(i,u,m),b(u,h),b(u,p),f||(d=[T(t,"click",e[31]),T(s,"click",e[32])],f=!0)},p(e,t){256&t[0]&&m!==(m=(null!==e[8]?e[8].name:"")+"")&&P(c,m),512&t[0]&&g!==(g=(null!==e[9]?e[9].name:"")+"")&&P(p,g)},d(e){e&&M(t),e&&M(n),e&&M(s),e&&M(r),e&&M(o),e&&M(l),e&&M(u),f=!1,i(d)}}}function Cs(t){let n;return{c(){n=A("p"),n.textContent="Select Spritesheet or XML file",S(n,"slot","header")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function Ts(t){let n,s,i;return{c(){n=A("button"),n.textContent="Add Spritesheet and XML",S(n,"slot","accept-btn")},m(e,r){k(e,n,r),s||(i=T(n,"click",t[30]),s=!0)},p:e,d(e){e&&M(n),s=!1,i()}}}function Os(t){let n;return{c(){n=A("input"),S(n,"type","text"),S(n,"name","anim-prefix"),S(n,"id","anim-prefix"),n.value="name"},m(e,s){k(e,n,s),t[35](n)},p:e,d(e){e&&M(n),t[35](null)}}}function js(t){let n;return{c(){n=A("p"),n.textContent="Enter animation prefix",S(n,"slot","header")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function Ss(t){let n,s,i;return{c(){n=A("button"),n.textContent="Set animation prefix",S(n,"slot","accept-btn")},m(e,r){k(e,n,r),s||(i=T(n,"click",t[34]),s=!0)},p:e,d(e){e&&M(n),s=!1,i()}}}function zs(t){let n,s,r,o,a;return{c(){n=A("button"),n.textContent="View XML structure",s=I(),r=A("button"),r.textContent="View Animation"},m(e,i){k(e,n,i),k(e,s,i),k(e,r,i),o||(a=[T(n,"click",O(t[42])),T(r,"click",O(t[43]))],o=!0)},p:e,d(e){e&&M(n),e&&M(s),e&&M(r),o=!1,i(a)}}}function Ps(e){let t,n,s,r,o,a,c,l,u,h,p;return{c(){t=A("button"),t.textContent="Set animation prefix",n=I(),s=A("button"),s.textContent="Delete Selection",r=I(),o=A("button"),o.textContent="Clone Selection",a=I(),c=A("button"),l=E("Toggle Select on Range"),c.disabled=u=e[1].length<=0},m(i,u){k(i,t,u),k(i,n,u),k(i,s,u),k(i,r,u),k(i,o,u),k(i,a,u),k(i,c,u),b(c,l),h||(p=[T(t,"click",O(e[46])),T(s,"click",O(e[20])),T(o,"click",O(e[21])),T(c,"click",O(e[25]))],h=!0)},p(e,t){2&t[0]&&u!==(u=e[1].length<=0)&&(c.disabled=u)},d(e){e&&M(t),e&&M(n),e&&M(s),e&&M(r),e&&M(o),e&&M(a),e&&M(c),h=!1,i(p)}}}function Fs(t){let n,s,r,o,a;return{c(){n=A("button"),n.textContent="Generate XML",s=I(),r=A("button"),r.textContent="Generate PNG sequence"},m(e,i){k(e,n,i),k(e,s,i),k(e,r,i),o||(a=[T(n,"click",t[49]),T(r,"click",t[50])],o=!0)},p:e,d(e){e&&M(n),e&&M(s),e&&M(r),o=!1,i(a)}}}function Rs(e){let t,n,s,r,o,a,c,l,u,h,p,f,d,m,g,v,w,y,x,_,$,C,O,j,z,F,R,L,N,B,W,H,X,q,Y,V,U,G,D,Z,K,Q,ee;function te(t){e[33](t)}let se={$$slots:{"accept-btn":[Ts],header:[Cs],default:[Is]},$$scope:{ctx:e}};function ie(t){e[36](t)}void 0!==e[3]&&(se.showModal=e[3]),u=new lt({props:se}),J.push((()=>be(u,"showModal",te)));let re={$$slots:{"accept-btn":[Ss],header:[js],default:[Os]},$$scope:{ctx:e}};function oe(t){e[37](t)}function ae(t){e[38](t)}void 0!==e[4]&&(re.showModal=e[4]),f=new lt({props:re}),J.push((()=>be(f,"showModal",ie)));let ce={};function le(t){e[39](t)}void 0!==e[5]&&(ce.showView=e[5]),void 0!==e[2]&&(ce.settings=e[2]),g=new _s({props:ce}),J.push((()=>be(g,"showView",oe))),J.push((()=>be(g,"settings",ae)));let ue={};function he(t){e[40](t)}void 0!==e[6]&&(ue.showView=e[6]),x=new wt({props:ue}),J.push((()=>be(x,"showView",le)));let pe={};return void 0!==e[7]&&(pe.showView=e[7]),C=new gs({props:pe}),J.push((()=>be(C,"showView",he))),L=new Es({props:{buttonText:"View",$$slots:{default:[zs]},$$scope:{ctx:e}}}),q=new Es({props:{buttonText:"Selection",$$slots:{default:[Ps]},$$scope:{ctx:e}}}),Z=new Es({props:{buttonText:"Generate",$$slots:{default:[Fs]},$$scope:{ctx:e}}}),{c(){t=A("dialog"),n=A("div"),s=A("label"),r=E(e[12]),o=I(),a=A("progress"),l=I(),_e(u.$$.fragment),p=I(),_e(f.$$.fragment),m=I(),_e(g.$$.fragment),y=I(),_e(x.$$.fragment),$=I(),_e(C.$$.fragment),j=I(),z=A("div"),F=A("button"),F.textContent="Settings",R=I(),_e(L.$$.fragment),N=I(),B=A("label"),W=A("input"),H=E("\r\n        Select all"),X=I(),_e(q.$$.fragment),Y=I(),V=A("button"),V.textContent="Add PNGs",U=I(),G=A("button"),G.textContent="Add Spritesheet",D=I(),_e(Z.$$.fragment),S(s,"for","gen-progress"),S(a,"id","gen-progress"),a.value=c=Math.round(100*e[11]),S(a,"max","100"),S(t,"class","svelte-1oatxdm"),S(W,"type","checkbox"),S(W,"name","select-all"),S(W,"id","select-all"),S(B,"for","select-all"),S(B,"class","svelte-1oatxdm"),S(z,"id","controls"),S(z,"class","svelte-1oatxdm")},m(i,c){k(i,t,c),b(t,n),b(n,s),b(s,r),b(n,o),b(n,a),e[29](t),k(i,l,c),$e(u,i,c),k(i,p,c),$e(f,i,c),k(i,m,c),$e(g,i,c),k(i,y,c),$e(x,i,c),k(i,$,c),$e(C,i,c),k(i,j,c),k(i,z,c),b(z,F),b(z,R),$e(L,z,null),b(z,N),b(z,B),b(B,W),e[44](W),b(B,H),b(z,X),$e(q,z,null),b(z,Y),b(z,V),b(z,U),b(z,G),b(z,D),$e(Z,z,null),K=!0,Q||(ee=[T(F,"click",e[41]),T(W,"change",e[45]),T(V,"click",e[47]),T(G,"click",e[48])],Q=!0)},p(e,t){(!K||4096&t[0])&&P(r,e[12]),(!K||2048&t[0]&&c!==(c=Math.round(100*e[11])))&&(a.value=c);const n={};776&t[0]|2097152&t[1]&&(n.$$scope={dirty:t,ctx:e}),!h&&8&t[0]&&(h=!0,n.showModal=e[3],ne((()=>h=!1))),u.$set(n);const s={};1040&t[0]|2097152&t[1]&&(s.$$scope={dirty:t,ctx:e}),!d&&16&t[0]&&(d=!0,s.showModal=e[4],ne((()=>d=!1))),f.$set(s);const i={};!v&&32&t[0]&&(v=!0,i.showView=e[5],ne((()=>v=!1))),!w&&4&t[0]&&(w=!0,i.settings=e[2],ne((()=>w=!1))),g.$set(i);const o={};!_&&64&t[0]&&(_=!0,o.showView=e[6],ne((()=>_=!1))),x.$set(o);const l={};!O&&128&t[0]&&(O=!0,l.showView=e[7],ne((()=>O=!1))),C.$set(l);const p={};192&t[0]|2097152&t[1]&&(p.$$scope={dirty:t,ctx:e}),L.$set(p);const m={};18&t[0]|2097152&t[1]&&(m.$$scope={dirty:t,ctx:e}),q.$set(m);const y={};2097152&t[1]&&(y.$$scope={dirty:t,ctx:e}),Z.$set(y)},i(e){K||(de(u.$$.fragment,e),de(f.$$.fragment,e),de(g.$$.fragment,e),de(x.$$.fragment,e),de(C.$$.fragment,e),de(L.$$.fragment,e),de(q.$$.fragment,e),de(Z.$$.fragment,e),K=!0)},o(e){me(u.$$.fragment,e),me(f.$$.fragment,e),me(g.$$.fragment,e),me(x.$$.fragment,e),me(C.$$.fragment,e),me(L.$$.fragment,e),me(q.$$.fragment,e),me(Z.$$.fragment,e),K=!1},d(n){n&&M(t),e[29](null),n&&M(l),ke(u,n),n&&M(p),ke(f,n),n&&M(m),ke(g,n),n&&M(y),ke(x,n),n&&M($),ke(C,n),n&&M(j),n&&M(z),ke(L),e[44](null),ke(q),ke(Z),Q=!1,i(ee)}}}function Ls(e,t,n){let s,i;l(e,Re,(e=>n(1,s=e))),l(e,Le,(e=>n(51,i=e)));let{wasm:r}=t,{charname:o}=t,{rangeSelectionMode:a=!1}=t,c={padding:2,prefixType:"no-prefix",usePrefixOnXMLFrames:!1,customPrefix:"",uniqueFramesOnly:!1,clipToBoundingBox:!0};async function u(e){const t=e.target;let n=[];for(let e of t.files){const[t,s]=await Xe(e),i=new vs(e.name+"::"+Ve.getNewId(),"single_frame",e,null,null);i.rect.width=t,i.rect.height=s,i.transform.newWidth=t,i.transform.newHeight=s,i.frameRect.frameWidth=t,i.frameRect.frameHeight=s,i.animationPrefix=e.name.substring(0,e.name.indexOf(".png")),n.push(i)}Re.update((e=>[...e,...n]))}async function h(e,t,n){if(null==t)return alert("Please select a spritesheet"),!0;if(null==n)return alert("Please select an XML"),!0;let s=await t.arrayBuffer();const i=await async function(e){const t=await crypto.subtle.digest("SHA-1",e);return Se(new Uint8Array(t))}(new Uint8Array(s)),r=ze(s);Le.update((e=>(e.has(i)||e.set(i,[r,0]),e)));const o=await n.text(),a=(new DOMParser).parseFromString(o,"text/xml").getElementsByTagName("SubTexture"),c=[];for(let e of a){const s=e.getAttribute("name"),r=We(s,(e=>!(e>="0"&&e<="9")),!0),o=new vs(t.name+"::"+Ve.getNewId(),"spritesheet_frame",t,n,i);o.animationPrefix=s.substring(0,r+1),o.rect={x:parseInt(e.getAttribute("x")),y:parseInt(e.getAttribute("y")),width:parseInt(e.getAttribute("width")),height:parseInt(e.getAttribute("height"))},o.frameRect={frameX:parseInt(e.getAttribute("frameX"))||0,frameY:parseInt(e.getAttribute("frameY"))||0,frameWidth:parseInt(e.getAttribute("frameWidth"))||o.rect.width,frameHeight:parseInt(e.getAttribute("frameHeight"))||o.rect.height},o.transform.newWidth=o.rect.width,o.transform.newHeight=o.rect.height,c.push(o)}return Re.update((e=>[...e,...c])),Le.update((e=>{const[t,n]=e.get(i);return e.set(i,[t,n+a.length]),e})),t=null,n=null,!1}function p(e){for(let t=0;t<s.length;t++){let n=s[t];n.selected&&(n.animationPrefix=e,n.selected=!1)}Re.set(s)}let f=!1,d=!1,m=!1,g=!1,v=!1,w=null,y=null,x=null,b=null;function _(e){n(8,w=e.target.files[0])}function $(e){n(9,y=e.target.files[0])}function k(e){Re.update((t=>t.map((t=>(t.selected=e,t)))))}let M=0,A="Adding images: 0%",E=null;async function I(e){if(console.log(c),!qe(o)||!qe(o+".zip"))return void alert("Please enter a valid filename as the name of your character!");if(s.length<=0)return void alert("Please add some images/spritesheets!");n(12,A="Adding images: 0%"),n(11,M=0),E.showModal();const{GrowingPacker:t}=r,a=t.new(o,c.padding),l=Array.from(i.entries()).length+s.length;let u=0;Ye((()=>{for(const e of i){const t=e[0],s=e[1][0];console.log("adding "+t+" to store!"),a.add_image_to_store(t,Oe(s,null)),u++,n(11,M=u/l),n(12,A=`Adding images: ${Math.round(100*M)}%`)}})),Ye((async()=>{let t="";switch(c.prefixType){case"character-name":t=o+" ";break;case"custom-prefix":t=c.customPrefix+" "}for(const e of s){switch(e.type){case"single_frame":console.log("Reading single frame"+e.sprId);const n=await e.imgfileref.arrayBuffer();a.add_single_frame(new Uint8Array(n),t+e.animationPrefix,e.transform.newWidth,e.transform.newHeight,e.transform.flipX,e.transform.flipY,BigInt(e.frameRect.frameX),BigInt(e.frameRect.frameY),BigInt(e.frameRect.frameWidth),BigInt(e.frameRect.frameHeight),c.clipToBoundingBox);break;case"spritesheet_frame":console.log("Putting spritesheet frame"+e.sprId),Ye((()=>{a.add_spritesheet_frame(e.spritesheetId,(c.usePrefixOnXMLFrames?t:"")+e.animationPrefix,e.rect.x,e.rect.y,e.rect.width,e.rect.height,e.transform.newWidth,e.transform.newHeight,e.transform.flipX,e.transform.flipY,BigInt(e.frameRect.frameX),BigInt(e.frameRect.frameY),BigInt(e.frameRect.frameWidth),BigInt(e.frameRect.frameHeight),c.clipToBoundingBox)}))}u++,n(11,M=u/l),n(12,A=`Adding images: ${Math.round(100*M)}%`)}e(a)}))}async function C(e){Ye((()=>{n(12,A="Generating spritesheet and XML...."),Ye((()=>{Be(e.make_packed_image(),o+".zip"),E.close()}))}))}async function T(e){Ye((()=>{n(12,A="Zipping individual frames...."),Ye((()=>{Be(e.make_img_sequence(c.uniqueFramesOnly),o+".zip"),E.close()}))}))}return e.$$set=e=>{"wasm"in e&&n(27,r=e.wasm),"charname"in e&&n(28,o=e.charname),"rangeSelectionMode"in e&&n(26,a=e.rangeSelectionMode)},e.$$.update=()=>{3&e.$$.dirty[0]&&null!=b&&n(0,b.checked=s.length>0&&s.every((e=>e.selected))||!1,b)},[b,s,c,f,d,m,g,v,w,y,x,M,A,E,u,h,p,_,$,k,function(){for(let e=s.length-1;e>=0;e--){const t=s[e];if(t.selected&&(s.splice(e,1),"spritesheet_frame"===t.type)){const e=t.spritesheetId,[n,s]=i.get(e),r=s-1;r>0?Le.update((t=>(t.set(e,[n,r]),t))):Le.update((t=>(t.delete(e),t)))}}Re.set(s)},function(){for(let e=0;e<s.length;e++){const t=s[e];if(t.selected){const e=t.clone();e.selected=!1,e.sprId+="-copy"+Ve.getNewId(),Re.update((t=>[...t,e])),t.selected=!1}}},I,C,T,function(){n(26,a=!0),document.getElementById("sprite-frames").style.backgroundColor="#333333"},a,r,o,function(e){J[e?"unshift":"push"]((()=>{E=e,n(13,E)}))},async e=>{await h(0,w,y)||n(3,f=!1)},()=>{Ne(_,"image/png",!1)},()=>{Ne($,"text/xml",!1)},function(e){f=e,n(3,f)},()=>{p(x.value),n(4,d=!1)},function(e){J[e?"unshift":"push"]((()=>{x=e,n(10,x)}))},function(e){d=e,n(4,d)},function(e){m=e,n(5,m)},function(e){c=e,n(2,c)},function(e){g=e,n(6,g)},function(e){v=e,n(7,v)},()=>{n(5,m=!0)},()=>{n(7,v=!0)},()=>{n(6,g=!0)},function(e){J[e?"unshift":"push"]((()=>{b=e,n(0,b),n(1,s)}))},()=>{k(b.checked)},()=>{n(4,d=!0)},()=>{Ne(u,"image/png",!0)},()=>{n(3,f=!0)},()=>{I(C).then((()=>{}))},()=>{I(T).then((()=>{}))}]}class Ns extends Ee{constructor(e){super(),Ae(this,e,Ls,Rs,o,{wasm:27,charname:28,rangeSelectionMode:26},null,[-1,-1])}}function Bs(e,t,n){const s=e.slice();return s[10]=t[n],s[11]=t,s[12]=n,s}function Ws(e,t){let n,s,i,r;function o(){return t[5](t[12])}function a(e){t[6](e,t[10],t[11],t[12])}let c={rangeSelectionMode:t[2],onRangeClick:o};return void 0!==t[10]&&(c.frameInfo=t[10]),s=new nt({props:c}),J.push((()=>be(s,"frameInfo",a))),{key:e,first:null,c(){n=C(),_e(s.$$.fragment),this.first=n},m(e,t){k(e,n,t),$e(s,e,t),r=!0},p(e,n){t=e;const r={};4&n&&(r.rangeSelectionMode=t[2]),8&n&&(r.onRangeClick=o),!i&&8&n&&(i=!0,r.frameInfo=t[10],ne((()=>i=!1))),s.$set(r)},i(e){r||(de(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&M(n),ke(s,e)}}}function Hs(e){let t,n,s,i,r,o=[],a=new Map,c=e[3];const l=e=>e[10].sprId;for(let t=0;t<c.length;t+=1){let n=Bs(e,c,t),s=l(n);a.set(s,o[t]=Ws(s,n))}function u(t){e[7](t)}let h={charname:e[1],wasm:e[0]};return void 0!==e[2]&&(h.rangeSelectionMode=e[2]),s=new Ns({props:h}),J.push((()=>be(s,"rangeSelectionMode",u))),{c(){t=A("div");for(let e=0;e<o.length;e+=1)o[e].c();n=I(),_e(s.$$.fragment),S(t,"id","sprite-frames"),S(t,"class","svelte-8tybqo")},m(e,i){k(e,t,i);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);k(e,n,i),$e(s,e,i),r=!0},p(e,[n]){28&n&&(c=e[3],pe(),o=xe(o,n,l,1,e,c,a,t,ye,Ws,null,Bs),fe());const r={};2&n&&(r.charname=e[1]),1&n&&(r.wasm=e[0]),!i&&4&n&&(i=!0,r.rangeSelectionMode=e[2],ne((()=>i=!1))),s.$set(r)},i(e){if(!r){for(let e=0;e<c.length;e+=1)de(o[e]);de(s.$$.fragment,e),r=!0}},o(e){for(let e=0;e<o.length;e+=1)me(o[e]);me(s.$$.fragment,e),r=!1},d(e){e&&M(t);for(let e=0;e<o.length;e+=1)o[e].d();e&&M(n),ke(s,e)}}}function Xs(e,t,n){let s;l(e,Re,(e=>n(3,s=e)));let{wasm:i}=t,{charname:r}=t,o=!1,a=null,c=null;function u(e){if(o){if(null===a)return void(a=e);if(null===c)return c=e,n(2,o=!1),document.getElementById("sprite-frames").style.backgroundColor=null,Re.update((e=>{let t,n;a<=c?(t=a,n=c):(t=c,n=a);for(let s=t;s<=n;s++)e[s].selected=!e[s].selected;return e})),a=null,void(c=null)}}return e.$$set=e=>{"wasm"in e&&n(0,i=e.wasm),"charname"in e&&n(1,r=e.charname)},[i,r,o,s,u,e=>{u(e)},function(e,t,n,i){n[i]=e,Re.set(s)},function(e){o=e,n(2,o)}]}class qs extends Ee{constructor(e){super(),Ae(this,e,Xs,Hs,o,{wasm:0,charname:1})}}function Ys(e){let t,n,s;function i(t){e[7](t)}let r={wasm:e[0]};return void 0!==e[1]&&(r.charname=e[1]),t=new Je({props:r}),J.push((()=>be(t,"charname",i))),{c(){_e(t.$$.fragment)},m(e,n){$e(t,e,n),s=!0},p(e,s){const i={};1&s&&(i.wasm=e[0]),!n&&2&s&&(n=!0,i.charname=e[1],ne((()=>n=!1))),t.$set(i)},i(e){s||(de(t.$$.fragment,e),s=!0)},o(e){me(t.$$.fragment,e),s=!1},d(e){ke(t,e)}}}function Vs(e){let t,n;return t=new qs({props:{charname:e[1],wasm:e[0]}}),{c(){_e(t.$$.fragment)},m(e,s){$e(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.charname=e[1]),1&n&&(s.wasm=e[0]),t.$set(s)},i(e){n||(de(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){ke(t,e)}}}function Us(e){let t,n,s,r,o,a,c,l,u,h,p,f,d,m,g,v,w,y,x,_,$,C,O,j,z;function P(t){e[5](t)}let R={id:"spsh",text:"Spritesheet Generation"};function L(t){e[6](t)}void 0!==e[2]&&(R.curChoice=e[2]),m=new Te({props:R}),J.push((()=>be(m,"curChoice",P)));let N={id:"icongrid",text:"Icongrid Generation"};void 0!==e[2]&&(N.curChoice=e[2]),w=new Te({props:N}),J.push((()=>be(w,"curChoice",L)));const B=[Vs,Ys],W=[];function H(e,t){return"spsh"==e[2]?0:"icongrid"==e[2]?1:-1}return~($=H(e))&&(C=W[$]=B[$](e)),{c(){t=A("main"),n=A("h1"),n.textContent="FNF Spritesheet and XML Generator Web (experimental version)",s=I(),r=A("label"),o=A("input"),a=E("\r\n\t\tDark Mode"),c=I(),l=A("div"),u=A("label"),u.textContent="Character Name:",h=I(),p=A("input"),f=I(),d=A("div"),_e(m.$$.fragment),v=I(),_e(w.$$.fragment),x=I(),_=A("div"),C&&C.c(),S(n,"id","title"),S(n,"class","svelte-dfbvkq"),S(o,"type","checkbox"),S(o,"name","dark-mode"),S(o,"id","dark-mode"),o.checked=!0,S(r,"for","dark-mode"),S(u,"for","char-name"),S(u,"class","svelte-dfbvkq"),S(p,"type","text"),S(p,"name","char-name"),S(p,"id","char-name"),S(l,"id","character-name-control"),S(l,"class","svelte-dfbvkq"),S(d,"id","app-tabs"),S(d,"class","svelte-dfbvkq"),S(_,"id","tab-container"),S(_,"class","svelte-dfbvkq")},m(i,g){k(i,t,g),b(t,n),b(t,s),b(t,r),b(r,o),b(r,a),b(t,c),b(t,l),b(l,u),b(l,h),b(l,p),F(p,e[1]),b(t,f),b(t,d),$e(m,d,null),b(d,v),$e(w,d,null),b(t,x),b(t,_),~$&&W[$].m(_,null),O=!0,j||(z=[T(o,"change",e[3]),T(p,"input",e[4])],j=!0)},p(e,[t]){2&t&&p.value!==e[1]&&F(p,e[1]);const n={};!g&&4&t&&(g=!0,n.curChoice=e[2],ne((()=>g=!1))),m.$set(n);const s={};!y&&4&t&&(y=!0,s.curChoice=e[2],ne((()=>y=!1))),w.$set(s);let i=$;$=H(e),$===i?~$&&W[$].p(e,t):(C&&(pe(),me(W[i],1,1,(()=>{W[i]=null})),fe()),~$?(C=W[$],C?C.p(e,t):(C=W[$]=B[$](e),C.c()),de(C,1),C.m(_,null)):C=null)},i(e){O||(de(m.$$.fragment,e),de(w.$$.fragment,e),de(C),O=!0)},o(e){me(m.$$.fragment,e),me(w.$$.fragment,e),me(C),O=!1},d(e){e&&M(t),ke(m),ke(w),~$&&W[$].d(),j=!1,i(z)}}}function Gs(e,t,n){let s,{wasm:i}=t,r="spsh";return e.$$set=e=>{"wasm"in e&&n(0,i=e.wasm)},[i,s,r,()=>{document.body.classList.toggle("light-mode")},function(){s=this.value,n(1,s)},function(e){r=e,n(2,r)},function(e){r=e,n(2,r)},function(e){s=e,n(1,s)}]}class Ds extends Ee{constructor(e){super(),Ae(this,e,Gs,Us,o,{wasm:0})}}let Js;const Zs=new Array(128).fill(void 0);function Ks(e){return Zs[e]}Zs.push(void 0,null,!0,!1);let Qs=Zs.length;function ei(e){const t=Ks(e);return function(e){e<132||(Zs[e]=Qs,Qs=e)}(e),t}let ti=0,ni=null;function si(){return null!==ni&&0!==ni.byteLength||(ni=new Uint8Array(Js.memory.buffer)),ni}const ii=new TextEncoder("utf-8"),ri="function"==typeof ii.encodeInto?function(e,t){return ii.encodeInto(e,t)}:function(e,t){const n=ii.encode(e);return t.set(n),{read:e.length,written:n.length}};function oi(e,t,n){if(void 0===n){const n=ii.encode(e),s=t(n.length);return si().subarray(s,s+n.length).set(n),ti=n.length,s}let s=e.length,i=t(s);const r=si();let o=0;for(;o<s;o++){const t=e.charCodeAt(o);if(t>127)break;r[i+o]=t}if(o!==s){0!==o&&(e=e.slice(o)),i=n(i,s,s=o+3*e.length);const t=si().subarray(i+o,i+s);o+=ri(e,t).written}return ti=o,i}let ai=null;function ci(){return null!==ai&&0!==ai.byteLength||(ai=new Int32Array(Js.memory.buffer)),ai}const li=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function ui(e,t){return li.decode(si().subarray(e,e+t))}function hi(e){Qs===Zs.length&&Zs.push(Zs.length+1);const t=Qs;return Qs=Zs[t],Zs[t]=e,t}function pi(e,t){return si().subarray(e/1,e/1+t)}function fi(e,t){const n=t(1*e.length);return si().set(e,n/1),ti=e.length,n}li.decode();class di{static __wrap(e){const t=Object.create(di.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();Js.__wbg_growingpacker_free(e)}static new(e,t){const n=oi(e,Js.__wbindgen_malloc,Js.__wbindgen_realloc),s=ti,i=Js.growingpacker_new(n,s,t);return di.__wrap(i)}add_image_to_store(e,t){const n=oi(e,Js.__wbindgen_malloc,Js.__wbindgen_realloc),s=ti,i=fi(t,Js.__wbindgen_malloc),r=ti;Js.growingpacker_add_image_to_store(this.ptr,n,s,i,r)}add_single_frame(e,t,n,s,i,r,o,a,c,l,u){const h=fi(e,Js.__wbindgen_malloc),p=ti,f=oi(t,Js.__wbindgen_malloc,Js.__wbindgen_realloc),d=ti;Js.growingpacker_add_single_frame(this.ptr,h,p,f,d,n,s,i,r,o,a,c,l,u)}add_spritesheet_frame(e,t,n,s,i,r,o,a,c,l,u,h,p,f,d){const m=oi(e,Js.__wbindgen_malloc,Js.__wbindgen_realloc),g=ti,v=oi(t,Js.__wbindgen_malloc,Js.__wbindgen_realloc),w=ti;Js.growingpacker_add_spritesheet_frame(this.ptr,m,g,v,w,n,s,i,r,o,a,c,l,u,h,p,f,d)}make_packed_image(){try{const s=Js.__wbindgen_add_to_stack_pointer(-16);Js.growingpacker_make_packed_image(s,this.ptr);var e=ci()[s/4+0],t=ci()[s/4+1],n=pi(e,t).slice();return Js.__wbindgen_free(e,1*t),n}finally{Js.__wbindgen_add_to_stack_pointer(16)}}make_img_sequence(e){try{const i=Js.__wbindgen_add_to_stack_pointer(-16);Js.growingpacker_make_img_sequence(i,this.ptr,e);var t=ci()[i/4+0],n=ci()[i/4+1],s=pi(t,n).slice();return Js.__wbindgen_free(t,1*n),s}finally{Js.__wbindgen_add_to_stack_pointer(16)}}}class mi{static __wrap(e){const t=Object.create(mi.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();Js.__wbg_iconpacker_free(e)}static new(){const e=Js.iconpacker_new();return mi.__wrap(e)}add_image(e){Js.iconpacker_add_image(this.ptr,hi(e))}make_packed_image(){try{const s=Js.__wbindgen_add_to_stack_pointer(-16);Js.iconpacker_make_packed_image(s,this.ptr);var e=ci()[s/4+0],t=ci()[s/4+1],n=pi(e,t).slice();return Js.__wbindgen_free(e,1*t),n}finally{Js.__wbindgen_add_to_stack_pointer(16)}}}function gi(){const e={wbg:{}};return e.wbg.__wbindgen_object_drop_ref=function(e){ei(e)},e.wbg.__wbindgen_string_get=function(e,t){const n=Ks(t),s="string"==typeof n?n:void 0;var i=null==s?0:oi(s,Js.__wbindgen_malloc,Js.__wbindgen_realloc),r=ti;ci()[e/4+1]=r,ci()[e/4+0]=i},e.wbg.__wbg_new_abda76e883ba8a5f=function(){return hi(new Error)},e.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const n=oi(Ks(t).stack,Js.__wbindgen_malloc,Js.__wbindgen_realloc),s=ti;ci()[e/4+1]=s,ci()[e/4+0]=n},e.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(ui(e,t))}finally{Js.__wbindgen_free(e,t)}},e.wbg.__wbg_get_27fe3dac1c4d0224=function(e,t){return hi(Ks(e)[t>>>0])},e.wbg.__wbg_length_e498fbc24f9c1d4f=function(e){return Ks(e).length},e.wbg.__wbg_buffer_cf65c07de34b9a08=function(e){return hi(Ks(e).buffer)},e.wbg.__wbg_new_537b7341ce90bb31=function(e){return hi(new Uint8Array(Ks(e)))},e.wbg.__wbg_set_17499e8aa4003ebd=function(e,t,n){Ks(e).set(Ks(t),n>>>0)},e.wbg.__wbg_length_27a2afe8ab42b09f=function(e){return Ks(e).length},e.wbg.__wbindgen_throw=function(e,t){throw new Error(ui(e,t))},e.wbg.__wbindgen_memory=function(){return hi(Js.memory)},e}function vi(e,t){return Js=e.exports,wi.__wbindgen_wasm_module=t,ai=null,ni=null,Js}async function wi(e){const t=gi();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:s}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return vi(n,s)}var yi=Object.freeze({__proto__:null,GrowingPacker:di,IconPacker:mi,default:wi,initSync:function(e){const t=gi();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),vi(new WebAssembly.Instance(e,t),e)},init_panic_hook:function(){Js.init_panic_hook()},make_icongrid_legacy:function(e,t){try{const r=Js.__wbindgen_add_to_stack_pointer(-16),o=fi(e,Js.__wbindgen_malloc),a=ti;Js.make_icongrid_legacy(r,o,a,hi(t));var n=ci()[r/4+0],s=ci()[r/4+1],i=pi(n,s).slice();return Js.__wbindgen_free(n,1*s),i}finally{Js.__wbindgen_add_to_stack_pointer(16)}}});return(async()=>{const e=await(async(e={})=>{let{importHook:t,serverPath:n}=e,s="./build/assets/rust_img_lib-b3bc4dce.wasm";return null!=n&&(s=n+/[^\/\\]*$/.exec(s)[0]),null!=t&&(s=t(s)),await wi(s),yi})();e.init_panic_hook();return new Ds({target:document.body,props:{wasm:e}})})()}();
//# sourceMappingURL=bundle.js.map
