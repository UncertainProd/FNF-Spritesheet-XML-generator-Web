var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(n)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a;function l(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(e,t,n){e.$$.on_destroy.push(l(t,n))}function u(e,t,n,r){if(e){const s=h(e,t,n,r);return e[0](s)}}function h(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function p(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|s[r];return e}return t.dirty|s}return t.dirty}function f(e,t,n,r,s,i){if(s){const o=h(t,n,r,i);e.p(o,s)}}function d(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}const m="undefined"!=typeof window;let g=m?()=>window.performance.now():()=>Date.now(),v=m?e=>requestAnimationFrame(e):e;const w=new Set;function y(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&v(y)}function x(e){let t;return 0===w.size&&v(y),{promise:new Promise((n=>{w.add(t={c:e,f:n})})),abort(){w.delete(t)}}}function b(e,t){e.appendChild(t)}function _(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function $(e){const t=q("style");return function(e,t){b(e.head||e,t),t.sheet}(_(e),t),t.sheet}function k(e,t,n){e.insertBefore(t,n||null)}function M(e){e.parentNode&&e.parentNode.removeChild(e)}function q(e){return document.createElement(e)}function A(e){return document.createTextNode(e)}function E(){return A(" ")}function I(){return A("")}function C(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function O(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function T(e){return function(t){t.target===this&&e.call(this,t)}}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function P(e){let t;return{p(...n){t=n,t.forEach((t=>e.push(t)))},r(){t.forEach((t=>e.splice(e.indexOf(t),1)))}}}function F(e){return""===e?null:+e}function R(e,t){t=""+t,e.data!==t&&(e.data=t)}function N(e,t){e.value=null==t?"":t}function L(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function W(e,t,n){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}const H=new Map;let X,B=0;function Y(e,t,n,r,s,i,o,a=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*i(e);c+=100*e+`%{${o(r,1-r)}}\n`}const u=c+`100% {${o(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,p=_(e),{stylesheet:f,rules:d}=H.get(p)||function(e,t){const n={stylesheet:$(t),rules:{}};return H.set(e,n),n}(p,e);d[h]||(d[h]=!0,f.insertRule(`@keyframes ${h} ${u}`,f.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${r}ms linear ${s}ms 1 both`,B+=1,h}function V(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-r.length;s&&(e.style.animation=r.join(", "),B-=s,B||v((()=>{B||(H.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&M(t)})),H.clear())})))}function j(e){X=e}function U(){if(!X)throw new Error("Function called outside component initialization");return X}function G(e){U().$$.on_mount.push(e)}function z(e){U().$$.on_destroy.push(e)}function D(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const J=[],Z=[];let K=[];const Q=[],ee=Promise.resolve();let te=!1;function ne(e){K.push(e)}function re(e){Q.push(e)}const se=new Set;let ie,oe=0;function ae(){if(0!==oe)return;const e=X;do{try{for(;oe<J.length;){const e=J[oe];oe++,j(e),le(e.$$)}}catch(e){throw J.length=0,oe=0,e}for(j(null),J.length=0,oe=0;Z.length;)Z.pop()();for(let e=0;e<K.length;e+=1){const t=K[e];se.has(t)||(se.add(t),t())}K.length=0}while(J.length);for(;Q.length;)Q.pop()();te=!1,se.clear(),j(e)}function le(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}function ce(){return ie||(ie=Promise.resolve(),ie.then((()=>{ie=null}))),ie}function ue(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,r,t),s}(`${t?"intro":"outro"}${n}`))}const he=new Set;let pe;function fe(){pe={r:0,c:[],p:pe}}function de(){pe.r||s(pe.c),pe=pe.p}function me(e,t){e&&e.i&&(he.delete(e),e.i(t))}function ge(e,t,n,r){if(e&&e.o){if(he.has(e))return;he.add(e),pe.c.push((()=>{he.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const ve={duration:0};const we="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ye(e,t){e.d(1),t.delete(e.key)}function xe(e,t){ge(e,1,1,(()=>{t.delete(e.key)}))}function be(e,t,n,r,i,o,a,l,c,u,h,p){let f=e.length,d=o.length,m=f;const g={};for(;m--;)g[e[m].key]=m;const v=[],w=new Map,y=new Map,x=[];for(m=d;m--;){const e=p(i,o,m),s=n(e);let l=a.get(s);l?r&&x.push((()=>l.p(e,t))):(l=u(s,e),l.c()),w.set(s,v[m]=l),s in g&&y.set(s,Math.abs(m-g[s]))}const b=new Set,_=new Set;function $(e){me(e,1),e.m(l,h),a.set(e.key,e),h=e.first,d--}for(;f&&d;){const t=v[d-1],n=e[f-1],r=t.key,s=n.key;t===n?(h=t.first,f--,d--):w.has(s)?!a.has(r)||b.has(r)?$(t):_.has(s)?f--:y.get(r)>y.get(s)?(_.add(r),$(t)):(b.add(s),f--):(c(n,a),f--)}for(;f--;){const t=e[f];w.has(t.key)||c(t,a)}for(;d;)$(v[d-1]);return s(x),v}function _e(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function $e(e){e&&e.c()}function ke(e,t,r,o){const{fragment:a,after_update:l}=e.$$;a&&a.m(t,r),o||ne((()=>{const t=e.$$.on_mount.map(n).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...t):s(t),e.$$.on_mount=[]})),l.forEach(ne)}function Me(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];K.forEach((r=>-1===e.indexOf(r)?t.push(r):n.push(r))),n.forEach((e=>e())),K=t}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function qe(e,t){-1===e.$$.dirty[0]&&(J.push(e),te||(te=!0,ee.then(ae)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ae(t,n,i,o,a,l,c,u=[-1]){const h=X;j(t);const p=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:a,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};c&&c(p.root);let f=!1;if(p.ctx=i?i(t,n.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return p.ctx&&a(p.ctx[e],p.ctx[e]=s)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](s),f&&qe(t,e)),n})):[],p.update(),f=!0,s(p.before_update),p.fragment=!!o&&o(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(M)}else p.fragment&&p.fragment.c();n.intro&&me(t.$$.fragment),ke(t,n.target,n.anchor,n.customElement),ae()}j(h)}class Ee{$destroy(){Me(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Ie(t){let n,r,s,i,o,a,l,c,u,h=!1;return l=P(t[4][0]),{c(){n=q("label"),r=q("input"),i=E(),o=A(t[2]),S(r,"type","radio"),S(r,"name","app-choice"),S(r,"id",s="tab-"+t[1]),r.__value=t[1],r.value=r.__value,L(r,"display","none"),S(r,"class","svelte-1f39crp"),S(n,"for",a="tab-"+t[1]),S(n,"class","tabs svelte-1f39crp"),L(n,"background-color",t[0]==t[1]?"blue":"white"),l.p(r)},m(e,s){k(e,n,s),b(n,r),r.checked=r.__value===t[0],b(n,i),b(n,o),c||(u=C(r,"change",t[3]),c=!0)},p(e,[t]){2&t&&s!==(s="tab-"+e[1])&&S(r,"id",s),2&t&&(r.__value=e[1],r.value=r.__value,h=!0),(h||1&t)&&(r.checked=r.__value===e[0]),4&t&&R(o,e[2]),2&t&&a!==(a="tab-"+e[1])&&S(n,"for",a),3&t&&L(n,"background-color",e[0]==e[1]?"blue":"white")},i:e,o:e,d(e){e&&M(n),l.r(),c=!1,u()}}}function Ce(e,t,n){let{id:r}=t,{curChoice:s}=t,{text:i}=t;return e.$$set=e=>{"id"in e&&n(1,r=e.id),"curChoice"in e&&n(0,s=e.curChoice),"text"in e&&n(2,i=e.text)},[s,r,i,function(){s=this.__value,n(0,s)},[[]]]}class Oe extends Ee{constructor(e){super(),Ae(this,e,Ce,Ie,o,{id:1,curChoice:0,text:2})}}function Te(e,t){const n=e.replace(/[^A-Za-z0-9+/]/g,""),r=n.length,s=t?Math.ceil((3*r+1>>2)/t)*t:3*r+1>>2,i=new Uint8Array(s);let o,a,l=0,c=0;for(let e=0;e<r;e++)if(a=3&e,l|=((u=n.charCodeAt(e))>64&&u<91?u-65:u>96&&u<123?u-71:u>47&&u<58?u+4:43===u?62:47===u?63:0)<<6*(3-a),3===a||r-e==1){for(o=0;o<3&&c<s;)i[c]=l>>>(16>>>o&24)&255,o++,c++;l=0}var u;return i}function Se(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function Pe(e){let t=2,n="";const r=e.length;let s=0;for(let i=0;i<r;i++)t=i%3,s|=e[i]<<(16>>>t&24),2!==t&&e.length-i!=1||(n+=String.fromCodePoint(Se(s>>>18&63),Se(s>>>12&63),Se(s>>>6&63),Se(63&s)),s=0);return n.substring(0,n.length-2+t)+(2===t?"":1===t?"=":"==")}function Fe(e){return Pe(new Uint8Array(e))}const Re=[];function Ne(t,n=e){let r;const s=new Set;function i(e){if(o(t,e)&&(t=e,r)){const e=!Re.length;for(const e of s)e[1](),Re.push(e,t);if(e){for(let e=0;e<Re.length;e+=2)Re[e][0](Re[e+1]);Re.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,a=e){const l=[o,a];return s.add(l),1===s.size&&(r=n(i)||e),o(t),()=>{s.delete(l),0===s.size&&r&&(r(),r=null)}}}}const Le=Ne([]),We=Ne(new Map);function He(e,t,n=!0){let r=document.createElement("input");r.setAttribute("type","file"),n&&r.setAttribute("multiple","true"),r.setAttribute("style","display: none"),r.setAttribute("accept",t),document.body.append(r),r.onchange=t=>{e(t),document.body.removeChild(r)},r.click()}function Xe(e,t){let n=new Blob([e]),r=URL.createObjectURL(n),s=document.createElement("a");s.setAttribute("href",r),s.setAttribute("download",t),s.click()}function Be(e,t,n=!1){if(n){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n}else for(let n=0;n<e.length;n++)if(t(e[n]))return n;return null}async function Ye(e){let t;if("single_frame"==e.type){let n=e.imgfileref;t="data:image/png;base64,"+Pe(new Uint8Array(await n.arrayBuffer()))}else{const n=function(e){let t;return l(e,(e=>t=e))(),t}(We).get(e.spritesheetId);t=void 0!==n?"data:image/png;base64,"+n[0]:"data:image/png;base64,"}const n=new Image;return n.src=t,await n.decode(),n}async function Ve(e){const t="data:image/png;base64,"+Fe(await e.arrayBuffer()),n=new Image;return n.src=t,await n.decode(),[n.naturalWidth,n.naturalHeight]}function je(e){return!(!e||e.length>255)&&(!/[<>:"/\\|?*\u0000-\u001F]/g.test(e)&&!/^(con|prn|aux|nul|com\d|lpt\d)$/i.test(e)&&("."!==e&&".."!==e))}function Ue(e,t=0){setTimeout(e,t)}const Ge=new class{constructor(){this._val=-1}getNewId(){return this._val++,this._val}};function ze(t){let n,r,i,o,a;return{c(){n=q("button"),n.textContent="Add Icongrid",r=E(),i=q("button"),i.textContent="Clear Icongrid",S(n,"id","add-icongrid"),S(n,"class","svelte-1omodga"),S(i,"id","clear-icongrid"),S(i,"class","svelte-1omodga")},m(e,s){k(e,n,s),k(e,r,s),k(e,i,s),o||(a=[C(n,"click",t[15]),C(i,"click",t[16])],o=!0)},p:e,d(e){e&&M(n),e&&M(r),e&&M(i),o=!1,s(a)}}}function De(t){let n,r,i,o,l,c,u,h,p,f,d,m,g,v,w,y,x,_,$,I,O,T,P,F,N=t[1].length+"",W=t[0]&&ze(t);return{c(){var e,s;n=q("dialog"),n.innerHTML="<p>Creating Icongrid....</p>",r=E(),i=q("div"),o=q("img"),u=E(),h=q("div"),p=q("label"),f=q("input"),d=A("\r\n        Legacy Mode"),m=E(),g=q("p"),v=A("Number of icons selected: "),w=A(N),y=E(),x=q("button"),x.textContent="Clear Icons",_=E(),W&&W.c(),$=E(),I=q("button"),I.textContent="Add Icons",O=E(),T=q("button"),T.textContent="Generate Icongrid",e=o.src,s=l="",a||(a=document.createElement("a")),a.href=s,e!==a.href&&S(o,"src",""),S(o,"alt",c="The "+(t[0]?"":"final")+" icongrid will be displayed here."),S(i,"id","preview-div"),S(i,"class","svelte-1omodga"),S(f,"type","checkbox"),S(f,"name","legacy-mode"),S(f,"id","legacy-mode"),S(f,"class","svelte-1omodga"),S(p,"for","legacy-mode"),S(p,"id","legacy-mode-label"),S(p,"class","svelte-1omodga"),S(g,"class","svelte-1omodga"),S(x,"class","svelte-1omodga"),S(I,"id","add-icons"),S(I,"class","svelte-1omodga"),S(T,"id","generate-grid"),S(T,"class","svelte-1omodga"),S(h,"id","controls"),L(h,"grid-template-columns",t[5]),S(h,"class","svelte-1omodga")},m(e,s){k(e,n,s),t[12](n),k(e,r,s),k(e,i,s),b(i,o),t[13](o),k(e,u,s),k(e,h,s),b(h,p),b(p,f),f.checked=t[0],b(p,d),b(h,m),b(h,g),b(g,v),b(g,w),b(h,y),b(h,x),b(h,_),W&&W.m(h,null),b(h,$),b(h,I),b(h,O),b(h,T),P||(F=[C(f,"change",t[14]),C(x,"click",t[8]),C(I,"click",t[17]),C(T,"click",t[6])],P=!0)},p(e,[t]){1&t&&c!==(c="The "+(e[0]?"":"final")+" icongrid will be displayed here.")&&S(o,"alt",c),1&t&&(f.checked=e[0]),2&t&&N!==(N=e[1].length+"")&&R(w,N),e[0]?W?W.p(e,t):(W=ze(e),W.c(),W.m(h,$)):W&&(W.d(1),W=null),32&t&&L(h,"grid-template-columns",e[5])},i:e,o:e,d(e){e&&M(n),t[12](null),e&&M(r),e&&M(i),t[13](null),e&&M(u),e&&M(h),W&&W.d(),P=!1,s(F)}}}function Je(e,t,n){let r,{wasm:s}=t,{charname:i}=t,o=!1,a=[],l=null,c=null,u=null;async function h(e){n(4,u=e.target.files[0]),l.setAttribute("src","data:image/png;base64,"+Fe(await u.arrayBuffer()))}function p(e){n(1,a=[])}function f(e){n(1,a=[...e.target.files])}z((()=>{document.removeEventListener("clearIcons",p)})),document.addEventListener("clearIcons",p);return e.$$set=e=>{"wasm"in e&&n(10,s=e.wasm),"charname"in e&&n(11,i=e.charname)},e.$$.update=()=>{1&e.$$.dirty&&n(5,r="2fr"+(o?" 1fr 1fr":"")+" 1fr 1fr 1fr 2fr")},[o,a,l,c,u,r,async function(){if(o)if(a.length>0)if(null!==u){c.showModal();const e=new Uint8Array(await u.arrayBuffer()),t=[];for(let e of a)t.push(Fe(await e.arrayBuffer()));const n=s.make_icongrid_legacy(e,t);l.setAttribute("src","data:image/png;base64,"+Pe(n)),c.close(),Xe(n,"iconGrid.png")}else alert("No Icongrid selected! Please select an icongrid");else alert("No icons selected! Please select some icons");else{const{IconPacker:e}=s,t=e.new();if(a.length>0){c.showModal();for(let e of a)t.add_image(await e.arrayBuffer());let e=t.make_packed_image();l.setAttribute("src","data:image/png;base64,"+Pe(e)),c.close(),Xe(e,`icon-${void 0!==i?i:"character"}.png`)}else alert("No icons selected! Please select some icons")}},h,p,f,s,i,function(e){Z[e?"unshift":"push"]((()=>{c=e,n(3,c)}))},function(e){Z[e?"unshift":"push"]((()=>{l=e,n(2,l)}))},function(){o=this.checked,n(0,o)},e=>He(h,"image/png",!1),()=>{n(4,u=null)},e=>He(f,"image/png")]}class Ze extends Ee{constructor(e){super(),Ae(this,e,Je,De,o,{wasm:10,charname:11})}}class Ke{constructor(e){this.context=e,this.curFrames=[],this.curImgs=[],this.curFrameIndex=0,this.start=null,this.prev=null,this.ticks=0,this.animId=null,this.fps=24,this.animationScale=1,this.isPlaying=!1}resetAnimation(){this.curFrames=[],this.curImgs=[],this.curFrameIndex=0,this.start=null,this.prev=null,this.ticks=0}tick(e){this.start=e,null===this.prev&&(this.prev=e);const t=this.start-this.prev;if(this.ticks+=t,this.ticks>1e3/this.fps){const e=this.curFrames[this.curFrameIndex],t=this.curImgs[this.curFrameIndex];this.curFrameIndex=(this.curFrameIndex+1)%this.curFrames.length,this.clearCanvas(),this.drawImage(t,e),this.ticks=0}this.animId=requestAnimationFrame((e=>{this.tick(e)})),this.prev=this.start}drawImage(e,t,n=!1,r=!1){const s=t.rect,i=t.frameRect,o=t.transform,a=o.flipX?-1:1,l=o.flipY?-1:1,c=a*this.animationScale,u=l*this.animationScale;this.context.save(),this.context.scale(c,u),o.flipX&&this.context.translate(-o.newWidth,0),o.flipY&&this.context.translate(0,-o.newHeight),this.context.drawImage(e,s.x,s.y,s.width,s.height,-i.frameX*a,-i.frameY*l,o.newWidth,o.newHeight),this.context.restore(),r&&(this.context.clearRect(i.frameWidth*this.animationScale,0,this.context.canvas.width,this.context.canvas.height),this.context.clearRect(0,i.frameHeight*this.animationScale,this.context.canvas.width,this.context.canvas.height)),n&&(this.context.beginPath(),this.context.rect(0,0,i.frameWidth*this.animationScale,i.frameHeight*this.animationScale),this.context.stroke())}async initFrames(e){this.curFrames=e,this.curFrameIndex=0,this.curImgs=await Promise.all(this.curFrames.map((async e=>await Ye(e))))}play(){this.animId=requestAnimationFrame((e=>{this.tick(e)})),this.isPlaying=!0}stopAnimation(){null!==this.animId&&cancelAnimationFrame(this.animId),this.resetAnimation(),this.animId=null,this.isPlaying=!1}clearCanvas(){const e=this.context.canvas.width,t=this.context.canvas.height;this.context.clearRect(0,0,e,t)}}function Qe(t){let n;return{c(){n=q("div"),L(n,"width",tt),L(n,"height",tt+"px")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function et(t){let n,r,i,o,a,l,c,u,h,p,f,d,m,g,v=t[0].animationPrefix+"",w=!t[1]&&Qe();return{c(){n=q("div"),r=q("input"),o=E(),a=q("canvas"),l=A("Rendering Error!\r\n        Please use a browser that supports canvas rendering! (like Chrome or Firefox)"),c=E(),w&&w.c(),u=E(),h=q("p"),p=A(v),f=E(),d=q("button"),d.textContent="Delete",S(r,"type","checkbox"),S(r,"name","selected-chkbox"),S(r,"id","selected-chkbox"),r.checked=i=t[0].selected,L(a,"display",t[1]?"block":"none"),S(a,"width",tt+"px"),S(a,"height",tt+"px"),S(n,"class","frame-container svelte-o46j4u"),L(n,"width",tt+"px")},m(e,s){k(e,n,s),b(n,r),b(n,o),b(n,a),b(a,l),t[8](a),b(n,c),w&&w.m(n,null),b(n,u),b(n,h),b(h,p),b(n,f),b(n,d),t[10](n),m||(g=[C(d,"click",O(t[9])),C(n,"click",t[4])],m=!0)},p(e,[t]){1&t&&i!==(i=e[0].selected)&&(r.checked=i),2&t&&L(a,"display",e[1]?"block":"none"),e[1]?w&&(w.d(1),w=null):w?w.p(e,t):(w=Qe(),w.c(),w.m(n,u)),1&t&&v!==(v=e[0].animationPrefix+"")&&R(p,v)},i:e,o:e,d(e){e&&M(n),t[8](null),w&&w.d(),t[10](null),m=!1,s(g)}}}let tt=120;function nt(e,t,n){let r,s,i,o;c(e,We,(e=>n(12,r=e))),c(e,Le,(e=>n(13,s=e)));let a,{frameInfo:l}=t,{onRangeClick:u}=t,{rangeSelectionMode:h}=t,p=!1;async function f(){await a.initFrames([l]),a.clearCanvas(),a.animationScale=tt/Math.max(l.frameRect.frameWidth,l.frameRect.frameHeight),a.drawImage(a.curImgs[0],l,!1),n(1,p=!0)}function d(e){const t=s.indexOf(e);if(-1!==t){if(s.splice(t,1),Le.set(s),"spritesheet_frame"===l.type){const e=l.spritesheetId,[t,n]=r.get(e),s=n-1;s>0?We.update((n=>(n.set(e,[t,s]),n))):We.update((t=>(t.delete(e),t)))}}else console.log("[ERROR] Could not find element: "+e)}G((()=>{new IntersectionObserver((async(e,t)=>{const r=e[0];r.isIntersecting&&r.intersectionRatio>=.2?p||await f():n(1,p=!1)}),{root:document.getElementById("sprite-frames"),rootMargin:"0px",threshold:[.1,.2]}).observe(o),a=new Ke(i.getContext("2d"))}));return e.$$set=e=>{"frameInfo"in e&&n(0,l=e.frameInfo),"onRangeClick"in e&&n(6,u=e.onRangeClick),"rangeSelectionMode"in e&&n(7,h=e.rangeSelectionMode)},e.$$.update=()=>{3&e.$$.dirty&&p&&l._changed&&(f().then((()=>{})),n(0,l._changed=!1,l))},[l,p,i,o,function(){null!=u&&u(),h||n(0,l.selected=!l.selected,l)},d,u,h,function(e){Z[e?"unshift":"push"]((()=>{i=e,n(2,i)}))},()=>{d(l)},function(e){Z[e?"unshift":"push"]((()=>{o=e,n(3,o)}))}]}class rt extends Ee{constructor(e){super(),Ae(this,e,nt,et,o,{frameInfo:0,onRangeClick:6,rangeSelectionMode:7})}}const st=e=>({}),it=e=>({}),ot=e=>({}),at=e=>({});function lt(e){let t,n,r,i,o,a,l,c,h,m,g,v,w,y,x,_;const $=e[5].header,I=u($,e,e[4],at),P=e[5].default,F=u(P,e,e[4],null),N=e[5]["accept-btn"],L=u(N,e,e[4],it);return{c(){t=q("dialog"),n=q("div"),I&&I.c(),r=E(),i=q("hr"),o=E(),F&&F.c(),a=E(),l=q("hr"),c=E(),L&&L.c(),h=E(),m=q("hr"),g=E(),v=q("button"),w=A(e[2]),v.autofocus=!0,S(v,"class","svelte-1ed8403"),S(n,"class","svelte-1ed8403"),S(t,"class","svelte-1ed8403")},m(s,u){k(s,t,u),b(t,n),I&&I.m(n,null),b(n,r),b(n,i),b(n,o),F&&F.m(n,null),b(n,a),b(n,l),b(n,c),L&&L.m(n,null),b(n,h),b(n,m),b(n,g),b(n,v),b(v,w),e[8](t),y=!0,v.focus(),x||(_=[C(v,"click",e[7]),C(n,"click",O(e[6])),C(t,"close",e[9]),C(t,"click",T(e[10]))],x=!0)},p(e,[t]){I&&I.p&&(!y||16&t)&&f(I,$,e,e[4],y?p($,e[4],t,ot):d(e[4]),at),F&&F.p&&(!y||16&t)&&f(F,P,e,e[4],y?p(P,e[4],t,null):d(e[4]),null),L&&L.p&&(!y||16&t)&&f(L,N,e,e[4],y?p(N,e[4],t,st):d(e[4]),it),(!y||4&t)&&R(w,e[2])},i(e){y||(me(I,e),me(F,e),me(L,e),y=!0)},o(e){ge(I,e),ge(F,e),ge(L,e),y=!1},d(n){n&&M(t),I&&I.d(n),F&&F.d(n),L&&L.d(n),e[8](null),x=!1,s(_)}}}function ct(e,t,n){let r,{$$slots:s={},$$scope:i}=t,{showModal:o}=t,{onClose:a=(()=>{})}=t,{closeButtonMsg:l="Close"}=t;return e.$$set=e=>{"showModal"in e&&n(0,o=e.showModal),"onClose"in e&&n(1,a=e.onClose),"closeButtonMsg"in e&&n(2,l=e.closeButtonMsg),"$$scope"in e&&n(4,i=e.$$scope)},e.$$.update=()=>{9&e.$$.dirty&&r&&(o?r.showModal():r.close())},[o,a,l,r,i,s,function(t){D.call(this,e,t)},()=>r.close(),function(e){Z[e?"unshift":"push"]((()=>{r=e,n(3,r)}))},()=>{n(0,o=!1),a()},()=>r.close()]}class ut extends Ee{constructor(e){super(),Ae(this,e,ct,lt,o,{showModal:0,onClose:1,closeButtonMsg:2})}}const{Map:ht}=we;function pt(e,t,n){const r=e.slice();return r[14]=t[n],r}function ft(e,t){let n,r,s,i=t[14]+"";return{key:e,first:null,c(){n=q("option"),r=A(i),n.__value=s=t[14],n.value=n.__value,this.first=n},m(e,t){k(e,n,t),b(n,r)},p(e,o){t=e,2&o&&i!==(i=t[14]+"")&&R(r,i),2&o&&s!==(s=t[14])&&(n.__value=s,n.value=n.__value)},d(e){e&&M(n)}}}function dt(e){let t,n,r,i,o,a,l,c,u;return{c(){t=q("label"),n=q("input"),r=A("\r\n                FPS"),i=E(),o=q("label"),a=q("input"),l=A("\r\n                Animation Scale"),S(n,"type","number"),S(n,"name","fps"),S(n,"id","fps"),S(n,"min","1"),S(n,"max","120"),S(t,"for","fps"),S(a,"type","number"),S(a,"name","anim-scale"),S(a,"id","anim-scale"),S(a,"min","0.01"),S(a,"max","4"),S(a,"step","0.01"),S(o,"for","fps")},m(s,h){k(s,t,h),b(t,n),N(n,e[2].fps),b(t,r),k(s,i,h),k(s,o,h),b(o,a),N(a,e[2].animationScale),b(o,l),c||(u=[C(n,"input",e[10]),C(a,"input",e[11])],c=!0)},p(e,t){4&t&&F(n.value)!==e[2].fps&&N(n,e[2].fps),4&t&&F(a.value)!==e[2].animationScale&&N(a,e[2].animationScale)},d(e){e&&M(t),e&&M(i),e&&M(o),c=!1,s(u)}}}function mt(e){let t,n,r,i,o,a,l,c,u,h,p,f=[],d=new ht,m=e[2]?.isPlaying?"Stop":"Play",g=e[1];const v=e=>e[14];for(let t=0;t<g.length;t+=1){let n=pt(e,g,t),r=v(n);d.set(r,f[t]=ft(r,n))}let w=e[2]&&dt(e);return{c(){t=q("div"),n=q("select");for(let e=0;e<f.length;e+=1)f[e].c();r=E(),i=q("button"),o=A(m),a=A(" Animation"),l=E(),w&&w.c(),c=E(),u=q("canvas"),S(n,"name","anim-prefix"),S(n,"id","anim-prefix"),void 0===e[4]&&ne((()=>e[9].call(n)))},m(s,d){k(s,t,d),b(t,n);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(n,null);W(n,e[4],!0),b(t,r),b(t,i),b(i,o),b(i,a),b(t,l),w&&w.m(t,null),k(s,c,d),k(s,u,d),e[12](u),h||(p=[C(n,"change",e[8]),C(n,"change",e[9]),C(i,"click",e[5])],h=!0)},p(e,r){2&r&&(g=e[1],f=be(f,r,v,1,e,g,d,n,ye,ft,null,pt)),18&r&&W(n,e[4]),4&r&&m!==(m=e[2]?.isPlaying?"Stop":"Play")&&R(o,m),e[2]?w?w.p(e,r):(w=dt(e),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},d(n){n&&M(t);for(let e=0;e<f.length;e+=1)f[e].d();w&&w.d(),n&&M(c),n&&M(u),e[12](null),h=!1,s(p)}}}function gt(t){let n;return{c(){n=q("h4"),n.textContent="View Animation",S(n,"slot","header")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function vt(e){let t,n,r;function s(t){e[13](t)}let i={$$slots:{header:[gt],default:[mt]},$$scope:{ctx:e}};return void 0!==e[0]&&(i.showModal=e[0]),t=new ut({props:i}),Z.push((()=>_e(t,"showModal",s))),{c(){$e(t.$$.fragment)},m(e,n){ke(t,e,n),r=!0},p(e,[r]){const s={};131102&r&&(s.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,s.showModal=e[0],re((()=>n=!1))),t.$set(s)},i(e){r||(me(t.$$.fragment,e),r=!0)},o(e){ge(t.$$.fragment,e),r=!1},d(e){Me(t,e)}}}function wt(e,t,n){let r;c(e,Le,(e=>n(7,r=e)));let s,{showView:i=!1}=t,o=null,a=new Map,l=[],u=null;G((()=>{n(2,u=new Ke(o.getContext("2d")))}));return e.$$set=e=>{"showView"in e&&n(0,i=e.showView)},e.$$.update=()=>{if(5&e.$$.dirty&&null!==u&&(i?(console.log("Clearing canvas: ",u.isPlaying),u.clearCanvas()):u.stopAnimation(),n(2,u),n(0,i)),195&e.$$.dirty&&i){n(6,a=new Map),n(1,l=[]);for(let e of r)if(a.has(e.animationPrefix)){let t=a.get(e.animationPrefix);a.set(e.animationPrefix,[...t,e])}else a.set(e.animationPrefix,[e]);for(let e of a.keys())n(1,l=[...l,e])}},[i,l,u,o,s,async function(){null===u.animId?(await u.initFrames(a.get(s)),u.play(),n(2,u.context.canvas.width=.9*window.innerWidth,u),n(2,u.context.canvas.height=.9*window.innerHeight,u)):u.stopAnimation(),console.log("Anim is "+u.animId),n(2,u),n(0,i)},a,r,()=>{u.stopAnimation(),n(2,u),n(0,i)},function(){s=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(4,s),n(1,l),n(0,i),n(7,r),n(6,a)},function(){u.fps=F(this.value),n(2,u),n(0,i)},function(){u.animationScale=F(this.value),n(2,u),n(0,i)},function(e){Z[e?"unshift":"push"]((()=>{o=e,n(3,o)}))},function(e){i=e,n(0,i)}]}class yt extends Ee{constructor(e){super(),Ae(this,e,wt,vt,o,{showView:0})}}var xt="INUMBER",bt="IOP1",_t="IOP2",$t="IOP3",kt="IVAR",Mt="IVARNAME",qt="IFUNCALL",At="IFUNDEF",Et="IEXPR",It="IEXPREVAL",Ct="IMEMBER",Ot="IENDSTATEMENT",Tt="IARRAY";function St(e,t){this.type=e,this.value=null!=t?t:0}function Pt(e){return new St(bt,e)}function Ft(e){return new St(_t,e)}function Rt(e){return new St($t,e)}function Nt(e,t,n,r,s){for(var i,o,a,l,c=[],u=[],h=0;h<e.length;h++){var p=e[h],f=p.type;if(f===xt||f===Mt)Array.isArray(p.value)?c.push.apply(c,Nt(p.value.map((function(e){return new St(xt,e)})).concat(new St(Tt,p.value.length)),t,n,r,s)):c.push(p);else if(f===kt&&s.hasOwnProperty(p.value))p=new St(xt,s[p.value]),c.push(p);else if(f===_t&&c.length>1)o=c.pop(),i=c.pop(),l=n[p.value],p=new St(xt,l(i.value,o.value)),c.push(p);else if(f===$t&&c.length>2)a=c.pop(),o=c.pop(),i=c.pop(),"?"===p.value?c.push(i.value?o.value:a.value):(l=r[p.value],p=new St(xt,l(i.value,o.value,a.value)),c.push(p));else if(f===bt&&c.length>0)i=c.pop(),l=t[p.value],p=new St(xt,l(i.value)),c.push(p);else if(f===Et){for(;c.length>0;)u.push(c.shift());u.push(new St(Et,Nt(p.value,t,n,r,s)))}else if(f===Ct&&c.length>0)i=c.pop(),c.push(new St(xt,i.value[p.value]));else{for(;c.length>0;)u.push(c.shift());u.push(p)}}for(;c.length>0;)u.push(c.shift());return u}function Lt(e,t,n){for(var r=[],s=0;s<e.length;s++){var i=e[s],o=i.type;if(o===kt&&i.value===t)for(var a=0;a<n.tokens.length;a++){var l,c=n.tokens[a];l=c.type===bt?Pt(c.value):c.type===_t?Ft(c.value):c.type===$t?Rt(c.value):new St(c.type,c.value),r.push(l)}else o===Et?r.push(new St(Et,Lt(i.value,t,n))):r.push(i)}return r}function Wt(e,t,n){var r,s,i,o,a,l,c=[];if(Xt(e))return Bt(e,n);for(var u=e.length,h=0;h<u;h++){var p=e[h],f=p.type;if(f===xt||f===Mt)c.push(p.value);else if(f===_t)s=c.pop(),r=c.pop(),"and"===p.value?c.push(!!r&&!!Wt(s,t,n)):"or"===p.value?c.push(!!r||!!Wt(s,t,n)):"="===p.value?(o=t.binaryOps[p.value],c.push(o(r,Wt(s,t,n),n))):(o=t.binaryOps[p.value],c.push(o(Bt(r,n),Bt(s,n))));else if(f===$t)i=c.pop(),s=c.pop(),r=c.pop(),"?"===p.value?c.push(Wt(r?s:i,t,n)):(o=t.ternaryOps[p.value],c.push(o(Bt(r,n),Bt(s,n),Bt(i,n))));else if(f===kt)if(p.value in t.functions)c.push(t.functions[p.value]);else if(p.value in t.unaryOps&&t.parser.isOperatorEnabled(p.value))c.push(t.unaryOps[p.value]);else{var d=n[p.value];if(void 0===d)throw new Error("undefined variable: "+p.value);c.push(d)}else if(f===bt)r=c.pop(),o=t.unaryOps[p.value],c.push(o(Bt(r,n)));else if(f===qt){for(l=p.value,a=[];l-- >0;)a.unshift(Bt(c.pop(),n));if(!(o=c.pop()).apply||!o.call)throw new Error(o+" is not a function");c.push(o.apply(void 0,a))}else if(f===At)c.push(function(){for(var e=c.pop(),r=[],s=p.value;s-- >0;)r.unshift(c.pop());var i=c.pop(),o=function(){for(var s=Object.assign({},n),i=0,o=r.length;i<o;i++)s[r[i]]=arguments[i];return Wt(e,t,s)};return Object.defineProperty(o,"name",{value:i,writable:!1}),n[i]=o,o}());else if(f===Et)c.push(Ht(p,t));else if(f===It)c.push(p);else if(f===Ct)r=c.pop(),c.push(r[p.value]);else if(f===Ot)c.pop();else{if(f!==Tt)throw new Error("invalid Expression");for(l=p.value,a=[];l-- >0;)a.unshift(c.pop());c.push(a)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:Bt(c[0],n)}function Ht(e,t,n){return Xt(e)?e:{type:It,value:function(n){return Wt(e.value,t,n)}}}function Xt(e){return e&&e.type===It}function Bt(e,t){return Xt(e)?e.value(t):e}function Yt(e,t){for(var n,r,s,i,o,a,l=[],c=0;c<e.length;c++){var u=e[c],h=u.type;if(h===xt)"number"==typeof u.value&&u.value<0?l.push("("+u.value+")"):Array.isArray(u.value)?l.push("["+u.value.map(Vt).join(", ")+"]"):l.push(Vt(u.value));else if(h===_t)r=l.pop(),n=l.pop(),i=u.value,t?"^"===i?l.push("Math.pow("+n+", "+r+")"):"and"===i?l.push("(!!"+n+" && !!"+r+")"):"or"===i?l.push("(!!"+n+" || !!"+r+")"):"||"===i?l.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+r+")))"):"=="===i?l.push("("+n+" === "+r+")"):"!="===i?l.push("("+n+" !== "+r+")"):"["===i?l.push(n+"[("+r+") | 0]"):l.push("("+n+" "+i+" "+r+")"):"["===i?l.push(n+"["+r+"]"):l.push("("+n+" "+i+" "+r+")");else if(h===$t){if(s=l.pop(),r=l.pop(),n=l.pop(),"?"!==(i=u.value))throw new Error("invalid Expression");l.push("("+n+" ? "+r+" : "+s+")")}else if(h===kt||h===Mt)l.push(u.value);else if(h===bt)n=l.pop(),"-"===(i=u.value)||"+"===i?l.push("("+i+n+")"):t?"not"===i?l.push("(!"+n+")"):"!"===i?l.push("fac("+n+")"):l.push(i+"("+n+")"):"!"===i?l.push("("+n+"!)"):l.push("("+i+" "+n+")");else if(h===qt){for(a=u.value,o=[];a-- >0;)o.unshift(l.pop());i=l.pop(),l.push(i+"("+o.join(", ")+")")}else if(h===At){for(r=l.pop(),a=u.value,o=[];a-- >0;)o.unshift(l.pop());n=l.pop(),t?l.push("("+n+" = function("+o.join(", ")+") { return "+r+" })"):l.push("("+n+"("+o.join(", ")+") = "+r+")")}else if(h===Ct)n=l.pop(),l.push(n+"."+u.value);else if(h===Tt){for(a=u.value,o=[];a-- >0;)o.unshift(l.pop());l.push("["+o.join(", ")+"]")}else if(h===Et)l.push("("+Yt(u.value,t)+")");else if(h!==Ot)throw new Error("invalid Expression")}return l.length>1&&(l=t?[l.join(",")]:[l.join(";")]),String(l[0])}function Vt(e){return"string"==typeof e?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function jt(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function Ut(e,t,n){for(var r=!!(n=n||{}).withMembers,s=null,i=0;i<e.length;i++){var o=e[i];o.type===kt||o.type===Mt?r||jt(t,o.value)?null!==s?(jt(t,s)||t.push(s),s=o.value):s=o.value:t.push(o.value):o.type===Ct&&r&&null!==s?s+="."+o.value:o.type===Et?Ut(o.value,t,n):null!==s&&(jt(t,s)||t.push(s),s=null)}null===s||jt(t,s)||t.push(s)}function Gt(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}St.prototype.toString=function(){switch(this.type){case xt:case bt:case _t:case $t:case kt:case Mt:case Ot:return this.value;case qt:return"CALL "+this.value;case At:return"DEF "+this.value;case Tt:return"ARRAY "+this.value;case Ct:return"."+this.value;default:return"Invalid Instruction"}},Gt.prototype.simplify=function(e){return e=e||{},new Gt(Nt(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)},Gt.prototype.substitute=function(e,t){return t instanceof Gt||(t=this.parser.parse(String(t))),new Gt(Lt(this.tokens,e,t),this.parser)},Gt.prototype.evaluate=function(e){return e=e||{},Wt(this.tokens,this,e)},Gt.prototype.toString=function(){return Yt(this.tokens,!1)},Gt.prototype.symbols=function(e){e=e||{};var t=[];return Ut(this.tokens,t,e),t},Gt.prototype.variables=function(e){e=e||{};var t=[];Ut(this.tokens,t,e);var n=this.functions;return t.filter((function(e){return!(e in n)}))},Gt.prototype.toJSFunction=function(e,t){var n=this,r=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+Yt(this.simplify(t).tokens,!0)+"; }");return function(){return r.apply(n,arguments)}};var zt="TEOF",Dt="TOP",Jt="TNUMBER",Zt="TSTRING",Kt="TPAREN",Qt="TBRACKET",en="TCOMMA",tn="TNAME",nn="TSEMICOLON";function rn(e,t,n){this.type=e,this.value=t,this.index=n}function sn(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}rn.prototype.toString=function(){return this.type+": "+this.value},sn.prototype.newToken=function(e,t,n){return new rn(e,t,null!=n?n:this.pos)},sn.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},sn.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},sn.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(zt,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},sn.prototype.isString=function(){var e=!1,t=this.pos,n=this.expression.charAt(t);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,t+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var s=this.expression.substring(t+1,r);this.current=this.newToken(Zt,this.unescape(s),t),e=!0;break}r=this.expression.indexOf(n,r+1)}return e},sn.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return("("===e||")"===e)&&(this.current=this.newToken(Kt,e),this.pos++,!0)},sn.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return!("["!==e&&"]"!==e||!this.isOperatorEnabled("["))&&(this.current=this.newToken(Qt,e),this.pos++,!0)},sn.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(en,","),this.pos++,!0)},sn.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(nn,";"),this.pos++,!0)},sn.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(t>e){var r=this.expression.substring(e,t);if(r in this.consts)return this.current=this.newToken(Jt,this.consts[r]),this.pos+=r.length,!0}return!1},sn.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(t>e){var r=this.expression.substring(e,t);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(Dt,r),this.pos+=r.length,!0}return!1},sn.prototype.isName=function(){for(var e=this.pos,t=e,n=!1;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()){if(t===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(t===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var s=this.expression.substring(e,t);return this.current=this.newToken(tn,s),this.pos+=s.length,!0}return!1},sn.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);!(" "!==t&&"\t"!==t&&"\n"!==t&&"\r"!==t||(e=!0,this.pos++,this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var on=/^[0-9a-f]{4}$/i;function an(e,t,n){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}sn.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var n=e.substring(0,t);t>=0;){var r=e.charAt(++t);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var s=e.substring(t+1,t+5);on.test(s)||this.parseError("Illegal escape sequence: \\u"+s),n+=String.fromCharCode(parseInt(s,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++t;var i=e.indexOf("\\",t);n+=e.substring(t,i<0?e.length:i),t=i}return n},sn.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},sn.prototype.isRadixInteger=function(){var e,t,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))e=16,t=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;e=2,t=/^[01]$/i,++n}for(var r=!1,s=n;n<this.expression.length;){var i=this.expression.charAt(n);if(!t.test(i))break;n++,r=!0}return r&&(this.current=this.newToken(Jt,parseInt(this.expression.substring(s,n),e)),this.pos=n),r},sn.prototype.isNumber=function(){for(var e,t=!1,n=this.pos,r=n,s=n,i=!1,o=!1;n<this.expression.length&&((e=this.expression.charAt(n))>="0"&&e<="9"||!i&&"."===e);)"."===e?i=!0:o=!0,n++,t=o;if(t&&(s=n),"e"===e||"E"===e){n++;for(var a=!0,l=!1;n<this.expression.length;){if(e=this.expression.charAt(n),!a||"+"!==e&&"-"!==e){if(!(e>="0"&&e<="9"))break;l=!0,a=!1}else a=!1;n++}l||(n=s)}return t?(this.current=this.newToken(Jt,parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=s,t},sn.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if("+"===t||"-"===t||"*"===t||"/"===t||"%"===t||"^"===t||"?"===t||":"===t||"."===t)this.current=this.newToken(Dt,t);else if("∙"===t||"•"===t)this.current=this.newToken(Dt,"*");else if(">"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Dt,">="),this.pos++):this.current=this.newToken(Dt,">");else if("<"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Dt,"<="),this.pos++):this.current=this.newToken(Dt,"<");else if("|"===t){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(Dt,"||"),this.pos++}else if("="===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Dt,"=="),this.pos++):this.current=this.newToken(Dt,t);else{if("!"!==t)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Dt,"!="),this.pos++):this.current=this.newToken(Dt,t)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=e,!1)},sn.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)},sn.prototype.getCoordinates=function(){var e,t=0,n=-1;do{t++,e=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:t,column:e}},sn.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)},an.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},an.prototype.tokenMatches=function(e,t){return void 0===t||(Array.isArray(t)?jt(t,e.value):"function"==typeof t?t(e):e.value===t)},an.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},an.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},an.prototype.accept=function(e,t){return!(this.nextToken.type!==e||!this.tokenMatches(this.nextToken,t))&&(this.next(),!0)},an.prototype.expect=function(e,t){if(!this.accept(e,t)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(t||e))}},an.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;if(this.accept(tn)||this.accept(Dt,(function(e){return e.value in t})))e.push(new St(kt,this.current.value));else if(this.accept(Jt))e.push(new St(xt,this.current.value));else if(this.accept(Zt))e.push(new St(xt,this.current.value));else if(this.accept(Kt,"("))this.parseExpression(e),this.expect(Kt,")");else{if(!this.accept(Qt,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(Qt,"]"))e.push(new St(Tt,0));else{var n=this.parseArrayList(e);e.push(new St(Tt,n))}}},an.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),this.parseUntilEndStatement(e,t)||this.pushExpression(e,t))},an.prototype.pushExpression=function(e,t){for(var n=0,r=t.length;n<r;n++)e.push(t[n])},an.prototype.parseUntilEndStatement=function(e,t){return!!this.accept(nn)&&(!this.nextToken||this.nextToken.type===zt||this.nextToken.type===Kt&&")"===this.nextToken.value||t.push(new St(Ot)),this.nextToken.type!==zt&&this.parseExpression(t),e.push(new St(Et,t)),!0)},an.prototype.parseArrayList=function(e){for(var t=0;!this.accept(Qt,"]");)for(this.parseExpression(e),++t;this.accept(en);)this.parseExpression(e),++t;return t},an.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(Dt,"=");){var t=e.pop(),n=[],r=e.length-1;if(t.type!==qt){if(t.type!==kt&&t.type!==Ct)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),e.push(new St(Mt,t.value)),e.push(new St(Et,n)),e.push(Ft("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var s=0,i=t.value+1;s<i;s++){var o=r-s;e[o].type===kt&&(e[o]=new St(Mt,e[o].value))}this.parseVariableAssignmentExpression(n),e.push(new St(Et,n)),e.push(new St(At,t.value))}}},an.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(Dt,"?");){var t=[],n=[];this.parseConditionalExpression(t),this.expect(Dt,":"),this.parseConditionalExpression(n),e.push(new St(Et,t)),e.push(new St(Et,n)),e.push(Rt("?"))}},an.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(Dt,"or");){var t=[];this.parseAndExpression(t),e.push(new St(Et,t)),e.push(Ft("or"))}},an.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(Dt,"and");){var t=[];this.parseComparison(t),e.push(new St(Et,t)),e.push(Ft("and"))}};var ln=["==","!=","<","<=",">=",">","in"];an.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(Dt,ln);){var t=this.current;this.parseAddSub(e),e.push(Ft(t.value))}};var cn=["+","-","||"];an.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(Dt,cn);){var t=this.current;this.parseTerm(e),e.push(Ft(t.value))}};var un=["*","/","%"];function hn(e,t){return Number(e)+Number(t)}function pn(e,t){return e-t}function fn(e,t){return e*t}function dn(e,t){return e/t}function mn(e,t){return e%t}function gn(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function vn(e,t){return e===t}function wn(e,t){return e!==t}function yn(e,t){return e>t}function xn(e,t){return e<t}function bn(e,t){return e>=t}function _n(e,t){return e<=t}function $n(e,t){return Boolean(e&&t)}function kn(e,t){return Boolean(e||t)}function Mn(e,t){return jt(t,e)}function qn(e){return(Math.exp(e)-Math.exp(-e))/2}function An(e){return(Math.exp(e)+Math.exp(-e))/2}function En(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function In(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function Cn(e){return Math.log(e+Math.sqrt(e*e-1))}function On(e){return Math.log((1+e)/(1-e))/2}function Tn(e){return Math.log(e)*Math.LOG10E}function Sn(e){return-e}function Pn(e){return!e}function Fn(e){return e<0?Math.ceil(e):Math.floor(e)}function Rn(e){return Math.random()*(e||1)}function Nn(e){return Hn(e+1)}an.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(Dt,un);){var t=this.current;this.parseFactor(e),e.push(Ft(t.value))}},an.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;if(this.save(),this.accept(Dt,(function(e){return e.value in t}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===Kt&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(e);if(this.nextToken.type===nn||this.nextToken.type===en||this.nextToken.type===zt||this.nextToken.type===Kt&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(e)}var n=this.current;this.parseFactor(e),e.push(Pt(n.value))}else this.parseExponential(e)},an.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(Dt,"^");)this.parseFactor(e),e.push(Ft("^"))},an.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(Dt,"!");)e.push(Pt("!"))},an.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;if(this.accept(Dt,(function(e){return e.value in t}))){var n=this.current;this.parseAtom(e),e.push(Pt(n.value))}else for(this.parseMemberExpression(e);this.accept(Kt,"(");)if(this.accept(Kt,")"))e.push(new St(qt,0));else{var r=this.parseArgumentList(e);e.push(new St(qt,r))}},an.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(Kt,")");)for(this.parseExpression(e),++t;this.accept(en);)this.parseExpression(e),++t;return t},an.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(Dt,".")||this.accept(Qt,"[");){var t=this.current;if("."===t.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(tn),e.push(new St(Ct,this.current.value))}else{if("["!==t.value)throw new Error("unexpected symbol: "+t.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(Qt,"]"),e.push(Ft("["))}}};var Ln=4.7421875,Wn=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Hn(e){var t,n;if(function(e){return isFinite(e)&&e===Math.round(e)}(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var r=e-2,s=e-1;r>1;)s*=r,r--;return 0===s&&(s=1),s}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Hn(1-e));if(e>=171.35)return 1/0;if(e>85){var i=e*e,o=i*e,a=o*e,l=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*i)-139/(51840*o)-571/(2488320*a)+163879/(209018880*l)+5246819/(75246796800*l*e))}--e,n=Wn[0];for(var c=1;c<Wn.length;++c)n+=Wn[c]/(e+c);return t=e+Ln+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*n}function Xn(e){return Array.isArray(e)?e.length:String(e).length}function Bn(){for(var e=0,t=0,n=0;n<arguments.length;n++){var r,s=Math.abs(arguments[n]);t<s?(e=e*(r=t/s)*r+1,t=s):e+=s>0?(r=s/t)*r:s}return t===1/0?1/0:t*Math.sqrt(e)}function Yn(e,t,n){return e?t:n}function Vn(e,t){return void 0===t||0==+t?Math.round(e):(e=+e,t=-+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}function jn(e,t,n){return n&&(n[e]=t),t}function Un(e,t){return e[0|t]}function Gn(e){return 1===arguments.length&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function zn(e){return 1===arguments.length&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function Dn(e,t){if("function"!=typeof e)throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map((function(t,n){return e(t,n)}))}function Jn(e,t,n){if("function"!=typeof e)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(t,n,r){return e(t,n,r)}),t)}function Zn(e,t){if("function"!=typeof e)throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter((function(t,n){return e(t,n)}))}function Kn(e,t){if(!Array.isArray(t)&&"string"!=typeof t)throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function Qn(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function er(e){return(e>0)-(e<0)||+e}var tr=1/3;function nr(e){return e<0?-Math.pow(-e,tr):Math.pow(e,tr)}function rr(e){return Math.exp(e)-1}function sr(e){return Math.log(1+e)}function ir(e){return Math.log(e)/Math.LN2}function or(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||qn,cosh:Math.cosh||An,tanh:Math.tanh||En,asinh:Math.asinh||In,acosh:Math.acosh||Cn,atanh:Math.atanh||On,sqrt:Math.sqrt,cbrt:Math.cbrt||nr,log:Math.log,log2:Math.log2||ir,ln:Math.log,lg:Math.log10||Tn,log10:Math.log10||Tn,expm1:Math.expm1||rr,log1p:Math.log1p||sr,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||Fn,"-":Sn,"+":Number,exp:Math.exp,not:Pn,length:Xn,"!":Nn,sign:Math.sign||er},this.binaryOps={"+":hn,"-":pn,"*":fn,"/":dn,"%":mn,"^":Math.pow,"||":gn,"==":vn,"!=":wn,">":yn,"<":xn,">=":bn,"<=":_n,and:$n,or:kn,in:Mn,"=":jn,"[":Un},this.ternaryOps={"?":Yn},this.functions={random:Rn,fac:Nn,min:zn,max:Gn,hypot:Math.hypot||Bn,pyt:Math.hypot||Bn,pow:Math.pow,atan2:Math.atan2,if:Yn,gamma:Hn,roundTo:Vn,map:Dn,fold:Jn,filter:Zn,indexOf:Kn,join:Qn},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}or.prototype.parse=function(e){var t=[],n=new an(this,new sn(this,e),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(t),n.expect(zt,"EOF"),new Gt(t,this)},or.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var ar=new or;or.parse=function(e){return ar.parse(e)},or.evaluate=function(e,t){return ar.parse(e).evaluate(t)};var lr={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};or.prototype.isOperatorEnabled=function(e){var t=function(e){return lr.hasOwnProperty(e)?lr[e]:e}(e),n=this.options.operators||{};return!(t in n)||!!n[t]};const{Map:cr}=we;function ur(e,t,n){const r=e.slice();return r[50]=t[n],r[51]=t,r[52]=n,r}function hr(e,t){let n,r,i,o,a,l,c,u,h,p,f,d,m,g,v,w,y,x,_,$,I,T,P,F,N,L,W,H,X,B,Y,V,j,U,G,z,D,J,Z,K,Q,ee,te=t[50].animationPrefix+"",ne=t[50].rect.width+"",re=t[50].rect.height+"",se=t[50].frameRect.frameX+"",ie=t[50].frameRect.frameY+"",oe=t[50].frameRect.frameWidth+"",ae=t[50].frameRect.frameHeight+"",le=t[50].transform.newWidth+"",ce=t[50].transform.newHeight+"",ue=t[50].transform.flipX+"",he=t[50].transform.flipY+"",pe=t[52];function fe(...e){return t[18](t[52],t[50],...e)}const de=()=>t[19](n,pe),me=()=>t[19](null,pe);function ge(...e){return t[20](t[52],t[50],...e)}return{key:e,first:null,c(){n=q("tr"),r=q("td"),i=q("input"),l=E(),c=q("td"),u=A(te),h=E(),p=q("td"),f=A(ne),d=E(),m=q("td"),g=A(re),v=E(),w=q("td"),y=A(se),x=E(),_=q("td"),$=A(ie),I=E(),T=q("td"),P=A(oe),F=E(),N=q("td"),L=A(ae),W=E(),H=q("td"),X=A(le),B=E(),Y=q("td"),V=A(ce),j=E(),U=q("td"),G=A(ue),z=E(),D=q("td"),J=A(he),Z=E(),S(i,"type","checkbox"),S(i,"name",o="select-"+t[50].sprId),S(i,"id",a="select-"+t[50].sprId),S(i,"class","svelte-7q7gql"),S(r,"class","svelte-7q7gql"),S(c,"class","svelte-7q7gql"),S(p,"class","svelte-7q7gql"),S(m,"class","svelte-7q7gql"),S(w,"class","svelte-7q7gql"),S(_,"class","svelte-7q7gql"),S(T,"class","svelte-7q7gql"),S(N,"class","svelte-7q7gql"),S(H,"class","svelte-7q7gql"),S(Y,"class","svelte-7q7gql"),S(U,"class","svelte-7q7gql"),S(D,"class","svelte-7q7gql"),S(n,"tabindex",K=t[52]),this.first=n},m(e,t){k(e,n,t),b(n,r),b(r,i),b(n,l),b(n,c),b(c,u),b(n,h),b(n,p),b(p,f),b(n,d),b(n,m),b(m,g),b(n,v),b(n,w),b(w,y),b(n,x),b(n,_),b(_,$),b(n,I),b(n,T),b(T,P),b(n,F),b(n,N),b(N,L),b(n,W),b(n,H),b(H,X),b(n,B),b(n,Y),b(Y,V),b(n,j),b(n,U),b(U,G),b(n,z),b(n,D),b(D,J),b(n,Z),de(),Q||(ee=[C(i,"change",fe),C(n,"click",O(ge))],Q=!0)},p(e,r){t=e,1024&r[0]&&o!==(o="select-"+t[50].sprId)&&S(i,"name",o),1024&r[0]&&a!==(a="select-"+t[50].sprId)&&S(i,"id",a),1024&r[0]&&te!==(te=t[50].animationPrefix+"")&&R(u,te),1024&r[0]&&ne!==(ne=t[50].rect.width+"")&&R(f,ne),1024&r[0]&&re!==(re=t[50].rect.height+"")&&R(g,re),1024&r[0]&&se!==(se=t[50].frameRect.frameX+"")&&R(y,se),1024&r[0]&&ie!==(ie=t[50].frameRect.frameY+"")&&R($,ie),1024&r[0]&&oe!==(oe=t[50].frameRect.frameWidth+"")&&R(P,oe),1024&r[0]&&ae!==(ae=t[50].frameRect.frameHeight+"")&&R(L,ae),1024&r[0]&&le!==(le=t[50].transform.newWidth+"")&&R(X,le),1024&r[0]&&ce!==(ce=t[50].transform.newHeight+"")&&R(V,ce),1024&r[0]&&ue!==(ue=t[50].transform.flipX+"")&&R(G,ue),1024&r[0]&&he!==(he=t[50].transform.flipY+"")&&R(J,he),1024&r[0]&&K!==(K=t[52])&&S(n,"tabindex",K),pe!==t[52]&&(me(),pe=t[52],de())},d(e){e&&M(n),me(),Q=!1,s(ee)}}}function pr(e){let t,n,r,i,o,a,l,c,u,h,p,f,d,m,g,v,w,y,x,_,$,I,O,T,P,F,N,L,W,H,X,B,Y,V,j,U,G,z,D,J,Z,K,Q,ee,te,ne,re,se,ie,oe,ae,le,ce,ue,he,pe,fe,de,me,ge,ve,we,xe,_e,$e,ke,Me,qe,Ae,Ee,Ie,Ce,Oe,Te,Se,Pe,Fe,Re,Ne,Le,We,He,Xe,Be,Ye,Ve,je,Ue,Ge,ze=[],De=new cr,Je=(e[2]&&e[2].animationPrefix)+"",Ze=(e[2]&&e[2].rect.width)+"",Ke=(e[2]&&e[2].rect.height)+"",Qe=e[8].length+"",et=e[10];const tt=e=>e[50].sprId;for(let t=0;t<et.length;t+=1){let n=ur(e,et,t),r=tt(n);De.set(r,ze[t]=hr(r,n))}return{c(){t=q("div"),n=q("div"),r=q("table"),i=q("thead"),i.innerHTML='<th class="svelte-7q7gql"></th> \n                    <th class="svelte-7q7gql">Prefix</th> \n                    <th class="svelte-7q7gql">Width</th> \n                    <th class="svelte-7q7gql">Height</th> \n                    <th class="svelte-7q7gql">Frame X</th> \n                    <th class="svelte-7q7gql">Frame Y</th> \n                    <th class="svelte-7q7gql">Frame Width</th> \n                    <th class="svelte-7q7gql">Frame Height</th> \n                    <th class="svelte-7q7gql">New Image Width</th> \n                    <th class="svelte-7q7gql">New Image Height</th> \n                    <th class="svelte-7q7gql">flip X</th> \n                    <th class="svelte-7q7gql">flip Y</th>',o=E(),a=q("tbody");for(let e=0;e<ze.length;e+=1)ze[e].c();l=E(),c=q("div"),u=q("div"),h=q("div"),p=q("button"),f=A("< Previous"),m=E(),g=q("table"),v=q("thead"),v.innerHTML='<th class="svelte-7q7gql"></th> \n                            <th class="svelte-7q7gql">Prefix</th> \n                            <th class="svelte-7q7gql">Width</th> \n                            <th class="svelte-7q7gql">Height</th>',w=E(),y=q("tbody"),x=q("tr"),_=q("td"),$=q("input"),T=E(),P=q("td"),F=A(Je),N=E(),L=q("td"),W=A(Ze),H=E(),X=q("td"),B=A(Ke),Y=E(),V=q("button"),j=A("Next >"),G=E(),z=q("p"),D=A("You have selected "),J=A(Qe),Z=A(" frames"),K=E(),Q=q("button"),ee=A("Modify selection"),ne=E(),re=q("div"),se=q("label"),ie=A("Frame X\r\n                    "),oe=q("input"),ae=E(),le=q("label"),ce=A("Frame Y\r\n                    "),ue=q("input"),he=E(),pe=q("label"),fe=A("Frame Width\r\n                    "),de=q("input"),me=E(),ge=q("label"),ve=A("Frame Height\r\n                    "),we=q("input"),xe=E(),_e=q("label"),$e=A("Image Width\r\n                    "),ke=q("input"),Me=E(),qe=q("label"),Ae=A("Image Height\r\n                    "),Ee=q("input"),Ie=E(),Ce=q("label"),Oe=A("Flip X\r\n                    "),Te=q("input"),Se=E(),Pe=q("label"),Fe=A("Flip Y\r\n                    "),Re=q("input"),Ne=E(),Le=q("label"),We=A("Animation Scale\r\n                    "),He=q("input"),Xe=E(),Be=q("div"),Ye=q("canvas"),Ve=E(),je=q("button"),je.textContent="Modify selected",S(r,"class","not-selectable svelte-7q7gql"),S(n,"id","table-div"),S(n,"class","svelte-7q7gql"),p.disabled=d=e[10].length<1,$.disabled=I=e[10].length<1||null===e[1],S($,"type","checkbox"),S($,"name","test"),S($,"id","test"),$.checked=O=e[8].indexOf(e[1])>=0,S(_,"class","svelte-7q7gql"),S(P,"class","svelte-7q7gql"),S(L,"class","svelte-7q7gql"),S(X,"class","svelte-7q7gql"),S(g,"class","not-selectable svelte-7q7gql"),V.disabled=U=e[10].length<1,S(h,"class","mini-controls-horizontal svelte-7q7gql"),Q.disabled=te=e[8].length<1,S(u,"id","mini-table-view"),S(u,"class","svelte-7q7gql"),S(oe,"type","number"),S(oe,"name","frame-x"),S(oe,"id","frame-x"),S(oe,"class","svelte-7q7gql"),S(se,"class","xmlview-input svelte-7q7gql"),S(se,"for","frame-x"),S(ue,"type","number"),S(ue,"name","frame-y"),S(ue,"id","frame-y"),S(ue,"class","svelte-7q7gql"),S(le,"class","xmlview-input svelte-7q7gql"),S(le,"for","frame-y"),S(de,"type","number"),S(de,"name","frame-width"),S(de,"id","frame-width"),S(de,"class","svelte-7q7gql"),S(pe,"class","xmlview-input svelte-7q7gql"),S(pe,"for","frame-width"),S(we,"type","number"),S(we,"name","frame-height"),S(we,"id","frame-height"),S(we,"class","svelte-7q7gql"),S(ge,"class","xmlview-input svelte-7q7gql"),S(ge,"for","frame-height"),S(ke,"type","number"),S(ke,"name","scale-x"),S(ke,"id","scale-x"),S(ke,"min","1"),S(ke,"class","svelte-7q7gql"),S(_e,"class","xmlview-input svelte-7q7gql"),S(_e,"for","scale-x"),S(Ee,"type","number"),S(Ee,"name","scale-y"),S(Ee,"id","scale-y"),S(Ee,"min","1"),S(Ee,"class","svelte-7q7gql"),S(qe,"class","xmlview-input svelte-7q7gql"),S(qe,"for","scale-y"),S(Te,"type","checkbox"),S(Te,"name","flip-x"),S(Te,"id","flip-x"),S(Te,"class","svelte-7q7gql"),S(Ce,"class","xmlview-input svelte-7q7gql"),S(Ce,"for","flip-x"),S(Re,"type","checkbox"),S(Re,"name","flip-y"),S(Re,"id","flip-y"),S(Re,"class","svelte-7q7gql"),S(Pe,"class","xmlview-input svelte-7q7gql"),S(Pe,"for","flip-y"),S(He,"type","number"),S(He,"name","animation-scale"),S(He,"id","animation-scale"),S(He,"min","0.01"),S(He,"step","0.01"),S(He,"class","svelte-7q7gql"),S(Le,"class","xmlview-input svelte-7q7gql"),S(Le,"for","animation-scale"),S(re,"class","controls-horizontal svelte-7q7gql"),S(Ye,"width","550px"),S(Ye,"height","500px"),S(Ye,"class","svelte-7q7gql"),S(Be,"class","canvas-div svelte-7q7gql"),S(t,"id","view-container"),S(t,"class","svelte-7q7gql"),S(je,"class","modify-btn-large-screen svelte-7q7gql")},m(s,d){k(s,t,d),b(t,n),b(n,r),b(r,i),b(r,o),b(r,a);for(let e=0;e<ze.length;e+=1)ze[e]&&ze[e].m(a,null);b(t,l),b(t,c),b(c,u),b(u,h),b(h,p),b(p,f),b(h,m),b(h,g),b(g,v),b(g,w),b(g,y),b(y,x),b(x,_),b(_,$),b(x,T),b(x,P),b(P,F),b(x,N),b(x,L),b(L,W),b(x,H),b(x,X),b(X,B),b(h,Y),b(h,V),b(V,j),b(u,G),b(u,z),b(z,D),b(z,J),b(z,Z),b(u,K),b(u,Q),b(Q,ee),b(c,ne),b(c,re),b(re,se),b(se,ie),b(se,oe),e[25](oe),b(re,ae),b(re,le),b(le,ce),b(le,ue),e[26](ue),b(re,he),b(re,pe),b(pe,fe),b(pe,de),e[27](de),b(re,me),b(re,ge),b(ge,ve),b(ge,we),e[28](we),b(re,xe),b(re,_e),b(_e,$e),b(_e,ke),e[29](ke),b(re,Me),b(re,qe),b(qe,Ae),b(qe,Ee),e[30](Ee),b(re,Ie),b(re,Ce),b(Ce,Oe),b(Ce,Te),e[31](Te),b(re,Se),b(re,Pe),b(Pe,Fe),b(Pe,Re),e[32](Re),b(re,Ne),b(re,Le),b(Le,We),b(Le,He),e[33](He),b(c,Xe),b(c,Be),b(Be,Ye),e[34](Ye),k(s,Ve,d),k(s,je,d),Ue||(Ge=[C(r,"keydown",e[11]),C(p,"click",e[21]),C($,"change",e[22]),C(V,"click",e[23]),C(Q,"click",e[24]),C(oe,"input",e[15]),C(ue,"input",e[15]),C(de,"input",e[15]),C(we,"input",e[15]),C(ke,"input",e[15]),C(Ee,"input",e[15]),C(Te,"input",e[15]),C(Re,"input",e[15]),C(He,"input",e[13]),C(je,"click",e[35])],Ue=!0)},p(e,t){87072&t[0]&&(et=e[10],ze=be(ze,t,tt,1,e,et,De,a,ye,hr,null,ur)),1024&t[0]&&d!==(d=e[10].length<1)&&(p.disabled=d),1026&t[0]&&I!==(I=e[10].length<1||null===e[1])&&($.disabled=I),258&t[0]&&O!==(O=e[8].indexOf(e[1])>=0)&&($.checked=O),4&t[0]&&Je!==(Je=(e[2]&&e[2].animationPrefix)+"")&&R(F,Je),4&t[0]&&Ze!==(Ze=(e[2]&&e[2].rect.width)+"")&&R(W,Ze),4&t[0]&&Ke!==(Ke=(e[2]&&e[2].rect.height)+"")&&R(B,Ke),1024&t[0]&&U!==(U=e[10].length<1)&&(V.disabled=U),256&t[0]&&Qe!==(Qe=e[8].length+"")&&R(J,Qe),256&t[0]&&te!==(te=e[8].length<1)&&(Q.disabled=te)},d(n){n&&M(t);for(let e=0;e<ze.length;e+=1)ze[e].d();e[25](null),e[26](null),e[27](null),e[28](null),e[29](null),e[30](null),e[31](null),e[32](null),e[33](null),e[34](null),n&&M(Ve),n&&M(je),Ue=!1,s(Ge)}}}function fr(t){let n;return{c(){n=q("div"),n.innerHTML="<h4>XML View</h4>",S(n,"slot","header")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function dr(t){let n,r,s,i,o,a,l,c,u,h,p,f,d,m,g,v,w,y,x,_,$,I,O,T,P,F,R,N,L,W,H,X,B,Y,V,j,U,G,z,D,J,Z,K,Q,ee;return{c(){n=q("div"),r=q("h3"),r.textContent="Modify Selection",s=E(),i=q("div"),o=q("label"),a=A("Frame X\r\n                "),l=q("input"),c=E(),u=q("label"),h=A("Frame Y\r\n                "),p=q("input"),f=E(),d=q("label"),m=A("Frame Width\r\n                "),g=q("input"),v=E(),w=q("label"),y=A("Frame Height\r\n                "),x=q("input"),_=E(),$=q("label"),I=A("Image Width\r\n                "),O=q("input"),T=E(),P=q("label"),F=A("Image Height\r\n                "),R=q("input"),N=E(),L=q("label"),W=A("Flip X\r\n                "),H=q("input"),X=E(),B=q("label"),Y=A("Flip Y\r\n                "),V=q("input"),j=E(),U=q("button"),U.textContent="Modify",G=E(),z=q("p"),z.innerHTML="Note: You can enter a number or an expression like <strong><code>value + 3</code></strong>",D=E(),J=q("p"),J.innerHTML="Expressions will be applied on the current value of each cell (by substituting &#39;<code>value</code>&#39;)",Z=E(),K=q("p"),K.innerHTML="You can flip boolean values by using the expression: &#39;<code><i>not</i> value</code>&#39; (and the only values allowed are <code>true</code> and <code>false</code> )",S(l,"type","text"),S(l,"name","mod-frame-x"),S(l,"id","mod-frame-x"),S(l,"class","svelte-7q7gql"),S(o,"class","xmlview-input svelte-7q7gql"),S(o,"for","mod-frame-x"),S(p,"type","text"),S(p,"name","mod-frame-y"),S(p,"id","mod-frame-y"),S(p,"class","svelte-7q7gql"),S(u,"class","xmlview-input svelte-7q7gql"),S(u,"for","mod-frame-y"),S(g,"type","text"),S(g,"name","mod-frame-width"),S(g,"id","mod-frame-width"),S(g,"class","svelte-7q7gql"),S(d,"class","xmlview-input svelte-7q7gql"),S(d,"for","mod-frame-width"),S(x,"type","text"),S(x,"name","mod-frame-height"),S(x,"id","mod-frame-height"),S(x,"class","svelte-7q7gql"),S(w,"class","xmlview-input svelte-7q7gql"),S(w,"for","mod-frame-height"),S(O,"type","text"),S(O,"name","mod-scale-x"),S(O,"id","mod-scale-x"),S(O,"min","1"),S(O,"class","svelte-7q7gql"),S($,"class","xmlview-input svelte-7q7gql"),S($,"for","mod-scale-x"),S(R,"type","text"),S(R,"name","mod-scale-y"),S(R,"id","mod-scale-y"),S(R,"min","1"),S(R,"class","svelte-7q7gql"),S(P,"class","xmlview-input svelte-7q7gql"),S(P,"for","mod-scale-y"),S(H,"type","text"),S(H,"name","mod-flip-x"),S(H,"id","mod-flip-x"),S(H,"class","svelte-7q7gql"),S(L,"class","xmlview-input svelte-7q7gql"),S(L,"for","mod-flip-x"),S(V,"type","text"),S(V,"name","mod-flip-y"),S(V,"id","mod-flip-y"),S(V,"class","svelte-7q7gql"),S(B,"class","xmlview-input svelte-7q7gql"),S(B,"for","mod-flip-y"),S(i,"class","controls-horizontal svelte-7q7gql")},m(e,M){k(e,n,M),b(n,r),b(n,s),b(n,i),b(i,o),b(o,a),b(o,l),t[37](l),b(i,c),b(i,u),b(u,h),b(u,p),t[38](p),b(i,f),b(i,d),b(d,m),b(d,g),t[39](g),b(i,v),b(i,w),b(w,y),b(w,x),t[40](x),b(i,_),b(i,$),b($,I),b($,O),t[41](O),b(i,T),b(i,P),b(P,F),b(P,R),t[42](R),b(i,N),b(i,L),b(L,W),b(L,H),t[43](H),b(i,X),b(i,B),b(B,Y),b(B,V),t[44](V),b(n,j),b(n,U),b(n,G),b(n,z),b(n,D),b(n,J),b(n,Z),b(n,K),Q||(ee=C(U,"click",t[17]),Q=!0)},p:e,d(e){e&&M(n),t[37](null),t[38](null),t[39](null),t[40](null),t[41](null),t[42](null),t[43](null),t[44](null),Q=!1,ee()}}}function mr(e){let t,n,r,s,i,o;function a(t){e[36](t)}let l={closeButtonMsg:"Save and Close",$$slots:{header:[fr],default:[pr]},$$scope:{ctx:e}};function c(t){e[45](t)}void 0!==e[0]&&(l.showModal=e[0]),t=new ut({props:l}),Z.push((()=>_e(t,"showModal",a)));let u={$$slots:{default:[dr]},$$scope:{ctx:e}};return void 0!==e[7]&&(u.showModal=e[7]),s=new ut({props:u}),Z.push((()=>_e(s,"showModal",c))),{c(){$e(t.$$.fragment),r=E(),$e(s.$$.fragment)},m(e,n){ke(t,e,n),k(e,r,n),ke(s,e,n),o=!0},p(e,r){const o={};1534&r[0]|4194304&r[1]&&(o.$$scope={dirty:r,ctx:e}),!n&&1&r[0]&&(n=!0,o.showModal=e[0],re((()=>n=!1))),t.$set(o);const a={};512&r[0]|4194304&r[1]&&(a.$$scope={dirty:r,ctx:e}),!i&&128&r[0]&&(i=!0,a.showModal=e[7],re((()=>i=!1))),s.$set(a)},i(e){o||(me(t.$$.fragment,e),me(s.$$.fragment,e),o=!0)},o(e){ge(t.$$.fragment,e),ge(s.$$.fragment,e),o=!1},d(e){Me(t,e),e&&M(r),Me(s,e)}}}function gr(e,t,n){let r;c(e,Le,(e=>n(10,r=e)));let{showView:s=!1}=t,i=null,o=null;const a=["frameX","frameY","frameWidth","frameHeight"],l=["newWidth","newHeight"],u=["flipX","flipY"],h={frameX:null,frameY:null,frameWidth:null,frameHeight:null,newWidth:null,newHeight:null,flipX:null,flipY:null};let p=null,f=[],d=null,m=new Ke(null),g=!1;async function v(e){d&&(await m.initFrames([e]),m.clearCanvas(),m.drawImage(m.curImgs[0],e,!0))}function w(e){n(1,i=e),n(2,o=r[e]);for(const e of f)e&&(e.style.backgroundColor="white");n(5,f[e].style.backgroundColor="blue",f);for(const e of a)n(3,h[e].value=""+o.frameRect[e],h);for(const e of l)n(3,h[e].value=""+o.transform[e],h);for(const e of u)n(3,h[e].checked=o.transform[e],h)}G((()=>{m=new Ke(d.getContext("2d")),n(4,p.value=""+m.animationScale,p)}));let y=[];function x(e,t){if(e.target.checked)n(8,y=[...y,t]);else{const e=y.indexOf(t);e>=0&&y.splice(e,1),n(8,y)}}let b={frameX:null,frameY:null,frameWidth:null,frameHeight:null,newWidth:null,newHeight:null,flipX:null,flipY:null};return e.$$set=e=>{"showView"in e&&n(0,s=e.showView)},[s,i,o,h,p,f,d,g,y,b,r,function(e){switch(e.preventDefault(),e.key){case"ArrowUp":w(i-1>=0?i-1:r.length-1);break;case"ArrowDown":w((i+1)%r.length);break;case"Home":w(0);break;case"End":w(r.length-1)}v(r[i]).then((()=>{})),f[i].scrollIntoView(!1)},v,function(e){m.animationScale=parseFloat(e.target.value),v(o).then((()=>{}))},w,function(e){for(const e of a)n(2,o.frameRect[e]=+h[e].value,o);for(const e of l)n(2,o.transform[e]=+h[e].value,o);for(const e of u)n(2,o.transform[e]=h[e].checked,o);n(2,o._changed=!0,o),Le.set(r),v(o).then((()=>{}))},x,function(){const e=[];for(const t of a)e.push([t,b[t].value]);for(const t of l)e.push([t,b[t].value]);for(const t of u)e.push([t,b[t].value]);const t=new or({operators:{logical:!0}}),s=new Map(e.map((([e,n])=>n.length>0?[e,t.parse(n)]:[e,null])));Le.update((e=>{for(const t of y){for(const n of a){const r=s.get(n);r&&(e[t].frameRect[n]=Math.floor(r.evaluate({value:e[t].frameRect[n]})))}for(const n of l){s.get(n)&&(e[t].transform[n]=Math.floor(s.get(n).evaluate({value:e[t].transform[n]})))}for(const n of u){s.get(n)&&(e[t].transform[n]=!!s.get(n).evaluate({value:e[t].transform[n]}))}e[t]._changed=!0}return e})),w(i),v(r[i]).then((()=>{})),n(7,g=!1);const o=e=>{for(const t of e)if(1===t.children.length)return t.children[0];return null};for(const e of y){const t=o(f[e].children);if(t){t.checked=!1}}n(8,y=[])},async(e,t,n)=>{w(e),await v(t),x(n,e)},function(e,t){Z[e?"unshift":"push"]((()=>{f[t]=e,n(5,f)}))},async(e,t,n)=>{w(e),await v(t)},async()=>{w(i-1<0?r.length-1:i-1),await v(r[i])},async e=>{w(i),await v(r[i]),x(e,i)},async()=>{w((i+1)%r.length),await v(r[i])},()=>n(7,g=!0),function(e){Z[e?"unshift":"push"]((()=>{h.frameX=e,n(3,h)}))},function(e){Z[e?"unshift":"push"]((()=>{h.frameY=e,n(3,h)}))},function(e){Z[e?"unshift":"push"]((()=>{h.frameWidth=e,n(3,h)}))},function(e){Z[e?"unshift":"push"]((()=>{h.frameHeight=e,n(3,h)}))},function(e){Z[e?"unshift":"push"]((()=>{h.newWidth=e,n(3,h)}))},function(e){Z[e?"unshift":"push"]((()=>{h.newHeight=e,n(3,h)}))},function(e){Z[e?"unshift":"push"]((()=>{h.flipX=e,n(3,h)}))},function(e){Z[e?"unshift":"push"]((()=>{h.flipY=e,n(3,h)}))},function(e){Z[e?"unshift":"push"]((()=>{p=e,n(4,p)}))},function(e){Z[e?"unshift":"push"]((()=>{d=e,n(6,d)}))},()=>n(7,g=!0),function(e){s=e,n(0,s)},function(e){Z[e?"unshift":"push"]((()=>{b.frameX=e,n(9,b)}))},function(e){Z[e?"unshift":"push"]((()=>{b.frameY=e,n(9,b)}))},function(e){Z[e?"unshift":"push"]((()=>{b.frameWidth=e,n(9,b)}))},function(e){Z[e?"unshift":"push"]((()=>{b.frameHeight=e,n(9,b)}))},function(e){Z[e?"unshift":"push"]((()=>{b.newWidth=e,n(9,b)}))},function(e){Z[e?"unshift":"push"]((()=>{b.newHeight=e,n(9,b)}))},function(e){Z[e?"unshift":"push"]((()=>{b.flipX=e,n(9,b)}))},function(e){Z[e?"unshift":"push"]((()=>{b.flipY=e,n(9,b)}))},function(e){g=e,n(7,g)}]}class vr extends Ee{constructor(e){super(),Ae(this,e,gr,mr,o,{showView:0},null,[-1,-1])}}class wr{constructor(e,t,n,r,s){this.sprId=e,this.type=t,this.imgfileref=n,this.xmlfileref=r,this.selected=!1,this.spritesheetId=s,this.animationPrefix="",this.rect={x:0,y:0,width:null,height:null},this.transform={newWidth:null,newHeight:null,flipX:!1,flipY:!1},this.frameRect={frameX:0,frameY:0,frameWidth:null,frameHeight:null},this._changed=!1}clone(){const e=new wr(this.sprId,this.type,this.imgfileref,this.xmlfileref,this.spritesheetId);return e.selected=this.selected,e.animationPrefix=this.animationPrefix,e.rect=Object.assign({},this.rect),e.transform=Object.assign({},this.transform),e.frameRect=Object.assign({},this.frameRect),e}}function yr(e){let t,n,r,i,o,a,l,c,u,h,p,f,d,m,g,v,w,y,x,_,$,I,O,T,R,L,W,H,X,B,Y,V,j,U,G,z,D,J,Z,K,Q,ee,te,ne,re,se,ie,oe;return se=P(e[4][0]),{c(){t=q("div"),n=q("label"),n.textContent="Image Padding",r=E(),i=q("input"),o=E(),a=q("br"),l=E(),c=q("br"),u=E(),h=q("br"),p=E(),f=q("label"),f.textContent="Animation Name Prefixing",d=E(),m=q("br"),g=E(),v=q("label"),w=q("input"),y=A("\r\n            Use character name as prefix"),x=E(),_=q("label"),$=q("input"),I=A("\r\n            Use custom name as prefix"),O=E(),T=q("label"),T.textContent="Custom Prefix",R=E(),L=q("input"),H=E(),X=q("label"),B=q("input"),Y=A("\r\n            Do not use a prefix"),V=E(),j=q("br"),U=E(),G=q("label"),z=q("input"),D=A("\r\n            Use Prefix even if frame is imported from existing Spritesheet"),J=E(),Z=q("label"),Z.textContent="Image Sequence Generation",K=E(),Q=q("br"),ee=E(),te=q("label"),ne=q("input"),re=A("\r\n            Generate Unique Frames Only when exporting as Image Sequence"),S(n,"for","padding"),S(i,"type","number"),S(i,"name","padding"),S(i,"id","padding"),S(i,"min","0"),S(i,"max","20"),S(f,"for","prefix-type"),S(w,"type","radio"),S(w,"name","prefix-type"),S(w,"id","prefix-type-character-name"),w.__value="character-name",w.value=w.__value,S(v,"for","prefix-type-character-name"),S($,"type","radio"),S($,"name","prefix-type"),S($,"id","prefix-type-custom-prefix"),$.__value="custom-prefix",$.value=$.__value,S(_,"for","prefix-type-custom-prefix"),S(T,"for","custom-prefix"),S(L,"type","text"),S(L,"id","custom-prefix"),L.disabled=W="custom-prefix"!==e[1].prefixType,S(B,"type","radio"),S(B,"name","prefix-type"),S(B,"id","prefix-type-no-prefix"),B.__value="no-prefix",B.value=B.__value,S(X,"for","prefix-type-no-prefix"),S(z,"type","checkbox"),S(z,"name","use-prefix-on-existing-xmls"),S(z,"id","use-prefix-on-existing-xmls"),S(G,"for","use-prefix-on-existing-xmls"),S(Z,"for","img-seq-gen"),S(ne,"type","checkbox"),S(ne,"name","img-seq-gen"),S(ne,"id","img-seq-gen"),S(te,"for","img-seq-gen"),S(t,"id","modal-content"),S(t,"class","svelte-6d2dce"),se.p(w,$,B)},m(s,M){k(s,t,M),b(t,n),b(t,r),b(t,i),N(i,e[1].padding),b(t,o),b(t,a),b(t,l),b(t,c),b(t,u),b(t,h),b(t,p),b(t,f),b(t,d),b(t,m),b(t,g),b(t,v),b(v,w),w.checked=w.__value===e[1].prefixType,b(v,y),b(t,x),b(t,_),b(_,$),$.checked=$.__value===e[1].prefixType,b(_,I),b(t,O),b(t,T),b(t,R),b(t,L),N(L,e[1].customPrefix),b(t,H),b(t,X),b(X,B),B.checked=B.__value===e[1].prefixType,b(X,Y),b(t,V),b(t,j),b(t,U),b(t,G),b(G,z),z.checked=e[1].usePrefixOnXMLFrames,b(G,D),b(t,J),b(t,Z),b(t,K),b(t,Q),b(t,ee),b(t,te),b(te,ne),ne.checked=e[1].uniqueFramesOnly,b(te,re),ie||(oe=[C(i,"input",e[2]),C(w,"change",e[3]),C($,"change",e[5]),C(L,"input",e[6]),C(B,"change",e[7]),C(z,"change",e[8]),C(ne,"change",e[9])],ie=!0)},p(e,t){2&t&&F(i.value)!==e[1].padding&&N(i,e[1].padding),2&t&&(w.checked=w.__value===e[1].prefixType),2&t&&($.checked=$.__value===e[1].prefixType),2&t&&W!==(W="custom-prefix"!==e[1].prefixType)&&(L.disabled=W),2&t&&L.value!==e[1].customPrefix&&N(L,e[1].customPrefix),2&t&&(B.checked=B.__value===e[1].prefixType),2&t&&(z.checked=e[1].usePrefixOnXMLFrames),2&t&&(ne.checked=e[1].uniqueFramesOnly)},d(e){e&&M(t),se.r(),ie=!1,s(oe)}}}function xr(t){let n;return{c(){n=q("h4"),n.textContent="Settings",S(n,"slot","header"),S(n,"class","svelte-6d2dce")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function br(e){let t,n,r;function s(t){e[10](t)}let i={$$slots:{header:[xr],default:[yr]},$$scope:{ctx:e}};return void 0!==e[0]&&(i.showModal=e[0]),t=new ut({props:i}),Z.push((()=>_e(t,"showModal",s))),{c(){$e(t.$$.fragment)},m(e,n){ke(t,e,n),r=!0},p(e,[r]){const s={};2050&r&&(s.$$scope={dirty:r,ctx:e}),!n&&1&r&&(n=!0,s.showModal=e[0],re((()=>n=!1))),t.$set(s)},i(e){r||(me(t.$$.fragment,e),r=!0)},o(e){ge(t.$$.fragment,e),r=!1},d(e){Me(t,e)}}}function _r(e,t,n){let{showView:r=!1}=t,{settings:s={padding:2,prefixType:"no-prefix",usePrefixOnXMLFrames:!1,customPrefix:"",uniqueFramesOnly:!1}}=t;return e.$$set=e=>{"showView"in e&&n(0,r=e.showView),"settings"in e&&n(1,s=e.settings)},[r,s,function(){s.padding=F(this.value),n(1,s)},function(){s.prefixType=this.__value,n(1,s)},[[]],function(){s.prefixType=this.__value,n(1,s)},function(){s.customPrefix=this.value,n(1,s)},function(){s.prefixType=this.__value,n(1,s)},function(){s.usePrefixOnXMLFrames=this.checked,n(1,s)},function(){s.uniqueFramesOnly=this.checked,n(1,s)},function(e){r=e,n(0,r)}]}class $r extends Ee{constructor(e){super(),Ae(this,e,_r,br,o,{showView:0,settings:1})}}function kr(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)}function Mr(n){let r,o,a,l;const c=n[7].default,h=u(c,n,n[6],null);return{c(){r=q("div"),h&&h.c(),S(r,"class","drop-up-menu svelte-1m12fbh")},m(e,t){k(e,r,t),h&&h.m(r,null),n[10](r),l=!0},p(e,t){n=e,h&&h.p&&(!l||64&t)&&f(h,c,n,n[6],l?p(c,n[6],t,null):d(n[6]),null)},i(s){l||(me(h,s),ne((()=>{l&&(a&&a.end(1),o=function(n,r,s){const o={direction:"in"};let a,l,c=r(n,s,o),u=!1,h=0;function p(){a&&V(n,a)}function f(){const{delay:r=0,duration:s=300,easing:i=t,tick:o=e,css:f}=c||ve;f&&(a=Y(n,0,1,s,r,i,f,h++)),o(0,1);const d=g()+r,m=d+s;l&&l.abort(),u=!0,ne((()=>ue(n,!0,"start"))),l=x((e=>{if(u){if(e>=m)return o(1,0),ue(n,!0,"end"),p(),u=!1;if(e>=d){const t=i((e-d)/s);o(t,1-t)}}return u}))}let d=!1;return{start(){d||(d=!0,V(n),i(c)?(c=c(o),ce().then(f)):f())},invalidate(){d=!1},end(){u&&(p(),u=!1)}}}(r,n[4],{duration:100,easing:kr}),o.start())})),l=!0)},o(c){ge(h,c),o&&o.invalidate(),a=function(n,r,o){const a={direction:"out"};let l,c=r(n,o,a),u=!0;const h=pe;function p(){const{delay:r=0,duration:i=300,easing:o=t,tick:a=e,css:p}=c||ve;p&&(l=Y(n,1,0,i,r,o,p));const f=g()+r,d=f+i;ne((()=>ue(n,!1,"start"))),x((e=>{if(u){if(e>=d)return a(0,1),ue(n,!1,"end"),--h.r||s(h.c),!1;if(e>=f){const t=o((e-f)/i);a(1-t,t)}}return u}))}return h.r+=1,i(c)?ce().then((()=>{c=c(a),p()})):p(),{end(e){e&&c.tick&&c.tick(1,0),u&&(l&&V(n,l),u=!1)}}}(r,n[4],{duration:100,easing:kr}),l=!1},d(e){e&&M(r),h&&h.d(e),n[10](null),e&&a&&a.end()}}}function qr(e){let t,n,r,s,i,o,a,l=e[2]&&Mr(e);return{c(){t=q("button"),n=A(e[0]),r=E(),l&&l.c(),s=I()},m(c,u){k(c,t,u),b(t,n),e[8](t),k(c,r,u),l&&l.m(c,u),k(c,s,u),i=!0,o||(a=C(t,"click",T(O(e[9]))),o=!0)},p(e,[t]){(!i||1&t)&&R(n,e[0]),e[2]?l?(l.p(e,t),4&t&&me(l,1)):(l=Mr(e),l.c(),me(l,1),l.m(s.parentNode,s)):l&&(fe(),ge(l,1,1,(()=>{l=null})),de())},i(e){i||(me(l),i=!0)},o(e){ge(l),i=!1},d(n){n&&M(t),e[8](null),n&&M(r),l&&l.d(n),n&&M(s),o=!1,a()}}}function Ar(e,n,r){let{$$slots:s={},$$scope:i}=n,o=!1,{buttonText:a}=n,l=null,c=null,u=0;const h=()=>{r(5,u=c?c.getBoundingClientRect().left:0)};function p(e){l&&e.target!==l&&r(2,o=!1)}G((()=>{h(),window.addEventListener("resize",h),document.addEventListener("click",p)})),z((()=>{window.removeEventListener("resize",h),document.removeEventListener("click",p)}));return e.$$set=e=>{"buttonText"in e&&r(0,a=e.buttonText),"$$scope"in e&&r(6,i=e.$$scope)},e.$$.update=()=>{34&e.$$.dirty&&l&&r(1,l.style.transform=`translateX(${u-15}px)`,l)},[a,l,o,c,function(e,n){const r=function(e,{delay:n=0,duration:r=400,easing:s=t}={}){const i=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:s,css:e=>"opacity: "+e*i}}(e,n);return{duration:n.duration,css:r.css}},u,i,s,function(e){Z[e?"unshift":"push"]((()=>{c=e,r(3,c)}))},()=>{r(2,o=!o)},function(e){Z[e?"unshift":"push"]((()=>{l=e,r(1,l),r(5,u)}))}]}class Er extends Ee{constructor(e){super(),Ae(this,e,Ar,qr,o,{buttonText:0})}}function Ir(e){let t,n,r,i,o,a,l,c,u,h,p,f,d,m=(null!==e[7]?e[7].name:"")+"",g=(null!==e[8]?e[8].name:"")+"";return{c(){t=q("button"),t.textContent="Spritesheet (.png)",n=E(),r=q("button"),r.textContent="XML File (.xml)",i=E(),o=q("p"),a=A("Spritesheet selected: "),l=A(m),c=E(),u=q("p"),h=A("XML selected: "),p=A(g)},m(s,m){k(s,t,m),k(s,n,m),k(s,r,m),k(s,i,m),k(s,o,m),b(o,a),b(o,l),k(s,c,m),k(s,u,m),b(u,h),b(u,p),f||(d=[C(t,"click",e[31]),C(r,"click",e[32])],f=!0)},p(e,t){128&t[0]&&m!==(m=(null!==e[7]?e[7].name:"")+"")&&R(l,m),256&t[0]&&g!==(g=(null!==e[8]?e[8].name:"")+"")&&R(p,g)},d(e){e&&M(t),e&&M(n),e&&M(r),e&&M(i),e&&M(o),e&&M(c),e&&M(u),f=!1,s(d)}}}function Cr(t){let n;return{c(){n=q("p"),n.textContent="Select Spritesheet or XML file",S(n,"slot","header")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function Or(t){let n,r,s;return{c(){n=q("button"),n.textContent="Add Spritesheet and XML",S(n,"slot","accept-btn")},m(e,i){k(e,n,i),r||(s=C(n,"click",t[30]),r=!0)},p:e,d(e){e&&M(n),r=!1,s()}}}function Tr(t){let n;return{c(){n=q("input"),S(n,"type","text"),S(n,"name","anim-prefix"),S(n,"id","anim-prefix"),n.value="name"},m(e,r){k(e,n,r),t[35](n)},p:e,d(e){e&&M(n),t[35](null)}}}function Sr(t){let n;return{c(){n=q("p"),n.textContent="Enter animation prefix",S(n,"slot","header")},m(e,t){k(e,n,t)},p:e,d(e){e&&M(n)}}}function Pr(t){let n,r,s;return{c(){n=q("button"),n.textContent="Set animation prefix",S(n,"slot","accept-btn")},m(e,i){k(e,n,i),r||(s=C(n,"click",t[34]),r=!0)},p:e,d(e){e&&M(n),r=!1,s()}}}function Fr(t){let n,r,i,o,a;return{c(){n=q("button"),n.textContent="View XML structure",r=E(),i=q("button"),i.textContent="View Animation"},m(e,s){k(e,n,s),k(e,r,s),k(e,i,s),o||(a=[C(n,"click",O(t[42])),C(i,"click",O(t[43]))],o=!0)},p:e,d(e){e&&M(n),e&&M(r),e&&M(i),o=!1,s(a)}}}function Rr(t){let n,r,i,o,a,l,c,u,h;return{c(){n=q("button"),n.textContent="Set animation prefix",r=E(),i=q("button"),i.textContent="Delete Selection",o=E(),a=q("button"),a.textContent="Clone Selection",l=E(),c=q("button"),c.textContent="Toggle Select on Range"},m(e,s){k(e,n,s),k(e,r,s),k(e,i,s),k(e,o,s),k(e,a,s),k(e,l,s),k(e,c,s),u||(h=[C(n,"click",O(t[46])),C(i,"click",O(t[19])),C(a,"click",O(t[20])),C(c,"click",O(t[24]))],u=!0)},p:e,d(e){e&&M(n),e&&M(r),e&&M(i),e&&M(o),e&&M(a),e&&M(l),e&&M(c),u=!1,s(h)}}}function Nr(t){let n,r,i,o,a;return{c(){n=q("button"),n.textContent="Generate XML",r=E(),i=q("button"),i.textContent="Generate PNG sequence"},m(e,s){k(e,n,s),k(e,r,s),k(e,i,s),o||(a=[C(n,"click",t[49]),C(i,"click",t[50])],o=!0)},p:e,d(e){e&&M(n),e&&M(r),e&&M(i),o=!1,s(a)}}}function Lr(e){let t,n,r,i,o,a,l,c,u,h,p,f,d,m,g,v,w,y,x,_,$,I,O,T,P,F,N,L,W,H,X,B,Y,V,j,U,G,z,D,J,K,Q,ee;function te(t){e[33](t)}let ne={$$slots:{"accept-btn":[Or],header:[Cr],default:[Ir]},$$scope:{ctx:e}};function se(t){e[36](t)}void 0!==e[2]&&(ne.showModal=e[2]),u=new ut({props:ne}),Z.push((()=>_e(u,"showModal",te)));let ie={$$slots:{"accept-btn":[Pr],header:[Sr],default:[Tr]},$$scope:{ctx:e}};function oe(t){e[37](t)}function ae(t){e[38](t)}void 0!==e[3]&&(ie.showModal=e[3]),f=new ut({props:ie}),Z.push((()=>_e(f,"showModal",se)));let le={};function ce(t){e[39](t)}void 0!==e[4]&&(le.showView=e[4]),void 0!==e[1]&&(le.settings=e[1]),g=new $r({props:le}),Z.push((()=>_e(g,"showView",oe))),Z.push((()=>_e(g,"settings",ae)));let ue={};function he(t){e[40](t)}void 0!==e[5]&&(ue.showView=e[5]),x=new yt({props:ue}),Z.push((()=>_e(x,"showView",ce)));let pe={};return void 0!==e[6]&&(pe.showView=e[6]),I=new vr({props:pe}),Z.push((()=>_e(I,"showView",he))),L=new Er({props:{buttonText:"View",$$slots:{default:[Fr]},$$scope:{ctx:e}}}),V=new Er({props:{buttonText:"Selection",$$slots:{default:[Rr]},$$scope:{ctx:e}}}),J=new Er({props:{buttonText:"Generate",$$slots:{default:[Nr]},$$scope:{ctx:e}}}),{c(){t=q("dialog"),n=q("div"),r=q("label"),i=A(e[11]),o=E(),a=q("progress"),c=E(),$e(u.$$.fragment),p=E(),$e(f.$$.fragment),m=E(),$e(g.$$.fragment),y=E(),$e(x.$$.fragment),$=E(),$e(I.$$.fragment),T=E(),P=q("div"),F=q("button"),F.textContent="Settings",N=E(),$e(L.$$.fragment),W=E(),H=q("label"),X=q("input"),B=A("\r\n        Select all"),Y=E(),$e(V.$$.fragment),j=E(),U=q("button"),U.textContent="Add PNGs",G=E(),z=q("button"),z.textContent="Add Spritesheet",D=E(),$e(J.$$.fragment),S(r,"for","gen-progress"),S(a,"id","gen-progress"),a.value=l=Math.round(100*e[10]),S(a,"max","100"),S(X,"type","checkbox"),S(X,"name","select-all"),S(X,"id","select-all"),S(H,"for","select-all"),S(P,"id","controls"),S(P,"class","svelte-1xe4acl")},m(s,l){k(s,t,l),b(t,n),b(n,r),b(r,i),b(n,o),b(n,a),e[29](t),k(s,c,l),ke(u,s,l),k(s,p,l),ke(f,s,l),k(s,m,l),ke(g,s,l),k(s,y,l),ke(x,s,l),k(s,$,l),ke(I,s,l),k(s,T,l),k(s,P,l),b(P,F),b(P,N),ke(L,P,null),b(P,W),b(P,H),b(H,X),e[44](X),b(H,B),b(P,Y),ke(V,P,null),b(P,j),b(P,U),b(P,G),b(P,z),b(P,D),ke(J,P,null),K=!0,Q||(ee=[C(F,"click",e[41]),C(X,"change",e[45]),C(U,"click",e[47]),C(z,"click",e[48])],Q=!0)},p(e,t){(!K||2048&t[0])&&R(i,e[11]),(!K||1024&t[0]&&l!==(l=Math.round(100*e[10])))&&(a.value=l);const n={};388&t[0]|2097152&t[1]&&(n.$$scope={dirty:t,ctx:e}),!h&&4&t[0]&&(h=!0,n.showModal=e[2],re((()=>h=!1))),u.$set(n);const r={};520&t[0]|2097152&t[1]&&(r.$$scope={dirty:t,ctx:e}),!d&&8&t[0]&&(d=!0,r.showModal=e[3],re((()=>d=!1))),f.$set(r);const s={};!v&&16&t[0]&&(v=!0,s.showView=e[4],re((()=>v=!1))),!w&&2&t[0]&&(w=!0,s.settings=e[1],re((()=>w=!1))),g.$set(s);const o={};!_&&32&t[0]&&(_=!0,o.showView=e[5],re((()=>_=!1))),x.$set(o);const c={};!O&&64&t[0]&&(O=!0,c.showView=e[6],re((()=>O=!1))),I.$set(c);const p={};96&t[0]|2097152&t[1]&&(p.$$scope={dirty:t,ctx:e}),L.$set(p);const m={};8&t[0]|2097152&t[1]&&(m.$$scope={dirty:t,ctx:e}),V.$set(m);const y={};2097152&t[1]&&(y.$$scope={dirty:t,ctx:e}),J.$set(y)},i(e){K||(me(u.$$.fragment,e),me(f.$$.fragment,e),me(g.$$.fragment,e),me(x.$$.fragment,e),me(I.$$.fragment,e),me(L.$$.fragment,e),me(V.$$.fragment,e),me(J.$$.fragment,e),K=!0)},o(e){ge(u.$$.fragment,e),ge(f.$$.fragment,e),ge(g.$$.fragment,e),ge(x.$$.fragment,e),ge(I.$$.fragment,e),ge(L.$$.fragment,e),ge(V.$$.fragment,e),ge(J.$$.fragment,e),K=!1},d(n){n&&M(t),e[29](null),n&&M(c),Me(u,n),n&&M(p),Me(f,n),n&&M(m),Me(g,n),n&&M(y),Me(x,n),n&&M($),Me(I,n),n&&M(T),n&&M(P),Me(L),e[44](null),Me(V),Me(J),Q=!1,s(ee)}}}function Wr(e,t,n){let r,s;c(e,Le,(e=>n(28,r=e))),c(e,We,(e=>n(51,s=e)));let{wasm:i}=t,{charname:o}=t,{rangeSelectionMode:a=!1}=t,l={padding:2,prefixType:"no-prefix",usePrefixOnXMLFrames:!1,customPrefix:"",uniqueFramesOnly:!1};async function u(e){const t=e.target;let n=[];for(let e of t.files){const[t,r]=await Ve(e),s=new wr(e.name+"::"+Ge.getNewId(),"single_frame",e,null,null);s.rect.width=t,s.rect.height=r,s.transform.newWidth=t,s.transform.newHeight=r,s.frameRect.frameWidth=t,s.frameRect.frameHeight=r,s.animationPrefix=e.name.substring(0,e.name.indexOf(".png")),n.push(s)}Le.update((e=>[...e,...n]))}async function h(e,t,n){if(null==t)return alert("Please select a spritesheet"),!0;if(null==n)return alert("Please select an XML"),!0;let r=await t.arrayBuffer();const s=await async function(e){const t=await crypto.subtle.digest("SHA-1",e);return Pe(new Uint8Array(t))}(new Uint8Array(r)),i=Fe(r);We.update((e=>(e.has(s)||e.set(s,[i,0]),e)));const o=await n.text(),a=(new DOMParser).parseFromString(o,"text/xml").getElementsByTagName("SubTexture"),l=[];for(let e of a){const r=e.getAttribute("name"),i=Be(r,(e=>!(e>="0"&&e<="9")),!0),o=new wr(t.name+"::"+Ge.getNewId(),"spritesheet_frame",t,n,s);o.animationPrefix=r.substring(0,i+1),o.rect={x:parseInt(e.getAttribute("x")),y:parseInt(e.getAttribute("y")),width:parseInt(e.getAttribute("width")),height:parseInt(e.getAttribute("height"))},o.frameRect={frameX:parseInt(e.getAttribute("frameX"))||0,frameY:parseInt(e.getAttribute("frameY"))||0,frameWidth:parseInt(e.getAttribute("frameWidth"))||o.rect.width,frameHeight:parseInt(e.getAttribute("frameHeight"))||o.rect.height},o.transform.newWidth=o.rect.width,o.transform.newHeight=o.rect.height,l.push(o)}return Le.update((e=>[...e,...l])),We.update((e=>{const[t,n]=e.get(s);return e.set(s,[t,n+a.length]),e})),t=null,n=null,!1}function p(e){for(let t=0;t<r.length;t++){let n=r[t];n.selected&&(n.animationPrefix=e,n.selected=!1)}Le.set(r)}let f=!1,d=!1,m=!1,g=!1,v=!1,w=null,y=null,x=null,b=null;function _(e){n(7,w=e.target.files[0])}function $(e){n(8,y=e.target.files[0])}function k(e){Le.update((t=>t.map((t=>(t.selected=e,t)))))}let M=0,q="Adding images: 0%",A=null;async function E(e){if(console.log(l),!je(o)||!je(o+".zip"))return void alert("Please enter a valid filename as the name of your character!");if(r.length<=0)return void alert("Please add some images/spritesheets!");n(11,q="Adding images: 0%"),n(10,M=0),A.showModal();const{GrowingPacker:t}=i,a=t.new(o,l.padding),c=Array.from(s.entries()).length+r.length;let u=0;Ue((()=>{for(const e of s){const t=e[0],r=e[1][0];console.log("adding "+t+" to store!"),a.add_image_to_store(t,Te(r,null)),u++,n(10,M=u/c),n(11,q=`Adding images: ${Math.round(100*M)}%`)}})),Ue((async()=>{let t="";switch(l.prefixType){case"character-name":t=o+" ";break;case"custom-prefix":t=l.customPrefix+" "}for(const e of r){switch(e.type){case"single_frame":console.log("Reading single frame"+e.sprId);const n=await e.imgfileref.arrayBuffer();a.add_single_frame(new Uint8Array(n),t+e.animationPrefix,e.transform.newWidth,e.transform.newHeight,e.transform.flipX,e.transform.flipY,BigInt(e.frameRect.frameX),BigInt(e.frameRect.frameY),BigInt(e.frameRect.frameWidth),BigInt(e.frameRect.frameHeight));break;case"spritesheet_frame":console.log("Putting spritesheet frame"+e.sprId),Ue((()=>{a.add_spritesheet_frame(e.spritesheetId,(l.usePrefixOnXMLFrames?t:"")+e.animationPrefix,e.rect.x,e.rect.y,e.rect.width,e.rect.height,e.transform.newWidth,e.transform.newHeight,e.transform.flipX,e.transform.flipY,BigInt(e.frameRect.frameX),BigInt(e.frameRect.frameY),BigInt(e.frameRect.frameWidth),BigInt(e.frameRect.frameHeight))}))}u++,n(10,M=u/c),n(11,q=`Adding images: ${Math.round(100*M)}%`)}e(a)}))}async function I(e){Ue((()=>{n(11,q="Generating spritesheet and XML...."),Ue((()=>{Xe(e.make_packed_image(),o+".zip"),A.close()}))}))}async function C(e){Ue((()=>{n(11,q="Zipping individual frames...."),Ue((()=>{Xe(e.make_img_sequence(l.uniqueFramesOnly),o+".zip"),A.close()}))}))}return e.$$set=e=>{"wasm"in e&&n(26,i=e.wasm),"charname"in e&&n(27,o=e.charname),"rangeSelectionMode"in e&&n(25,a=e.rangeSelectionMode)},e.$$.update=()=>{268435457&e.$$.dirty[0]&&null!=b&&n(0,b.checked=r.length>0&&r.every((e=>e.selected))||!1,b)},[b,l,f,d,m,g,v,w,y,x,M,q,A,u,h,p,_,$,k,function(){for(let e=r.length-1;e>=0;e--){const t=r[e];if(t.selected&&(r.splice(e,1),"spritesheet_frame"===t.type)){const e=t.spritesheetId,[n,r]=s.get(e),i=r-1;i>0?We.update((t=>(t.set(e,[n,i]),t))):We.update((t=>(t.delete(e),t)))}}Le.set(r)},function(){for(let e=0;e<r.length;e++){const t=r[e];if(t.selected){const e=t.clone();e.selected=!1,e.sprId+="-copy"+Ge.getNewId(),Le.update((t=>[...t,e])),t.selected=!1}}},E,I,C,function(){n(25,a=!0),document.getElementById("sprite-frames").style.backgroundColor="#33333333"},a,i,o,r,function(e){Z[e?"unshift":"push"]((()=>{A=e,n(12,A)}))},async e=>{await h(0,w,y)||n(2,f=!1)},()=>{He(_,"image/png",!1)},()=>{He($,"text/xml",!1)},function(e){f=e,n(2,f)},()=>{p(x.value),n(3,d=!1)},function(e){Z[e?"unshift":"push"]((()=>{x=e,n(9,x)}))},function(e){d=e,n(3,d)},function(e){m=e,n(4,m)},function(e){l=e,n(1,l)},function(e){g=e,n(5,g)},function(e){v=e,n(6,v)},()=>{n(4,m=!0)},()=>{n(6,v=!0)},()=>{n(5,g=!0)},function(e){Z[e?"unshift":"push"]((()=>{b=e,n(0,b),n(28,r)}))},()=>{k(b.checked)},()=>{n(3,d=!0)},()=>{He(u,"image/png",!0)},()=>{n(2,f=!0)},()=>{E(I).then((()=>{}))},()=>{E(C).then((()=>{}))}]}class Hr extends Ee{constructor(e){super(),Ae(this,e,Wr,Lr,o,{wasm:26,charname:27,rangeSelectionMode:25},null,[-1,-1])}}function Xr(e,t,n){const r=e.slice();return r[10]=t[n],r[11]=t,r[12]=n,r}function Br(e,t){let n,r,s,i;function o(){return t[5](t[12])}function a(e){t[6](e,t[10],t[11],t[12])}let l={rangeSelectionMode:t[2],onRangeClick:o};return void 0!==t[10]&&(l.frameInfo=t[10]),r=new rt({props:l}),Z.push((()=>_e(r,"frameInfo",a))),{key:e,first:null,c(){n=I(),$e(r.$$.fragment),this.first=n},m(e,t){k(e,n,t),ke(r,e,t),i=!0},p(e,n){t=e;const i={};4&n&&(i.rangeSelectionMode=t[2]),8&n&&(i.onRangeClick=o),!s&&8&n&&(s=!0,i.frameInfo=t[10],re((()=>s=!1))),r.$set(i)},i(e){i||(me(r.$$.fragment,e),i=!0)},o(e){ge(r.$$.fragment,e),i=!1},d(e){e&&M(n),Me(r,e)}}}function Yr(e){let t,n,r,s,i,o=[],a=new Map,l=e[3];const c=e=>e[10].sprId;for(let t=0;t<l.length;t+=1){let n=Xr(e,l,t),r=c(n);a.set(r,o[t]=Br(r,n))}function u(t){e[7](t)}let h={charname:e[1],wasm:e[0]};return void 0!==e[2]&&(h.rangeSelectionMode=e[2]),r=new Hr({props:h}),Z.push((()=>_e(r,"rangeSelectionMode",u))),{c(){t=q("div");for(let e=0;e<o.length;e+=1)o[e].c();n=E(),$e(r.$$.fragment),S(t,"id","sprite-frames"),S(t,"class","svelte-8tybqo")},m(e,s){k(e,t,s);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,null);k(e,n,s),ke(r,e,s),i=!0},p(e,[n]){28&n&&(l=e[3],fe(),o=be(o,n,c,1,e,l,a,t,xe,Br,null,Xr),de());const i={};2&n&&(i.charname=e[1]),1&n&&(i.wasm=e[0]),!s&&4&n&&(s=!0,i.rangeSelectionMode=e[2],re((()=>s=!1))),r.$set(i)},i(e){if(!i){for(let e=0;e<l.length;e+=1)me(o[e]);me(r.$$.fragment,e),i=!0}},o(e){for(let e=0;e<o.length;e+=1)ge(o[e]);ge(r.$$.fragment,e),i=!1},d(e){e&&M(t);for(let e=0;e<o.length;e+=1)o[e].d();e&&M(n),Me(r,e)}}}function Vr(e,t,n){let r;c(e,Le,(e=>n(3,r=e)));let{wasm:s}=t,{charname:i}=t,o=!1,a=null,l=null;function u(e){if(o){if(null===a)return void(a=e);if(null===l)return l=e,n(2,o=!1),document.getElementById("sprite-frames").style.backgroundColor=null,Le.update((e=>{let t,n;a<=l?(t=a,n=l):(t=l,n=a);for(let r=t;r<=n;r++)e[r].selected=!e[r].selected;return e})),a=null,void(l=null)}}return e.$$set=e=>{"wasm"in e&&n(0,s=e.wasm),"charname"in e&&n(1,i=e.charname)},[s,i,o,r,u,e=>{u(e)},function(e,t,n,s){n[s]=e,Le.set(r)},function(e){o=e,n(2,o)}]}class jr extends Ee{constructor(e){super(),Ae(this,e,Vr,Yr,o,{wasm:0,charname:1})}}function Ur(e){let t,n,r;function s(t){e[6](t)}let i={wasm:e[0]};return void 0!==e[1]&&(i.charname=e[1]),t=new Ze({props:i}),Z.push((()=>_e(t,"charname",s))),{c(){$e(t.$$.fragment)},m(e,n){ke(t,e,n),r=!0},p(e,r){const s={};1&r&&(s.wasm=e[0]),!n&&2&r&&(n=!0,s.charname=e[1],re((()=>n=!1))),t.$set(s)},i(e){r||(me(t.$$.fragment,e),r=!0)},o(e){ge(t.$$.fragment,e),r=!1},d(e){Me(t,e)}}}function Gr(e){let t,n;return t=new jr({props:{charname:e[1],wasm:e[0]}}),{c(){$e(t.$$.fragment)},m(e,r){ke(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.charname=e[1]),1&n&&(r.wasm=e[0]),t.$set(r)},i(e){n||(me(t.$$.fragment,e),n=!0)},o(e){ge(t.$$.fragment,e),n=!1},d(e){Me(t,e)}}}function zr(e){let t,n,r,s,i,o,a,l,c,u,h,p,f,d,m,g,v,w,y,x,_;function $(t){e[4](t)}let A={id:"spsh",text:"Spritesheet Generation"};function I(t){e[5](t)}void 0!==e[2]&&(A.curChoice=e[2]),u=new Oe({props:A}),Z.push((()=>_e(u,"curChoice",$)));let O={id:"icongrid",text:"Icongrid Generation"};void 0!==e[2]&&(O.curChoice=e[2]),f=new Oe({props:O}),Z.push((()=>_e(f,"curChoice",I)));const T=[Gr,Ur],P=[];function F(e,t){return"spsh"==e[2]?0:"icongrid"==e[2]?1:-1}return~(v=F(e))&&(w=P[v]=T[v](e)),{c(){t=q("main"),n=q("h1"),n.textContent="FNF Spritesheet and XML Generator Web (experimental version)",r=E(),s=q("div"),i=q("label"),i.textContent="Character Name:",o=E(),a=q("input"),l=E(),c=q("div"),$e(u.$$.fragment),p=E(),$e(f.$$.fragment),m=E(),g=q("div"),w&&w.c(),S(n,"id","title"),S(n,"class","svelte-1p0njb9"),S(i,"for","char-name"),S(i,"class","svelte-1p0njb9"),S(a,"type","text"),S(a,"name","char-name"),S(a,"id","char-name"),S(s,"id","character-name-control"),S(s,"class","svelte-1p0njb9"),S(c,"id","app-tabs"),S(c,"class","svelte-1p0njb9"),S(g,"id","tab-container"),S(g,"class","svelte-1p0njb9")},m(h,d){k(h,t,d),b(t,n),b(t,r),b(t,s),b(s,i),b(s,o),b(s,a),N(a,e[1]),b(t,l),b(t,c),ke(u,c,null),b(c,p),ke(f,c,null),b(t,m),b(t,g),~v&&P[v].m(g,null),y=!0,x||(_=C(a,"input",e[3]),x=!0)},p(e,[t]){2&t&&a.value!==e[1]&&N(a,e[1]);const n={};!h&&4&t&&(h=!0,n.curChoice=e[2],re((()=>h=!1))),u.$set(n);const r={};!d&&4&t&&(d=!0,r.curChoice=e[2],re((()=>d=!1))),f.$set(r);let s=v;v=F(e),v===s?~v&&P[v].p(e,t):(w&&(fe(),ge(P[s],1,1,(()=>{P[s]=null})),de()),~v?(w=P[v],w?w.p(e,t):(w=P[v]=T[v](e),w.c()),me(w,1),w.m(g,null)):w=null)},i(e){y||(me(u.$$.fragment,e),me(f.$$.fragment,e),me(w),y=!0)},o(e){ge(u.$$.fragment,e),ge(f.$$.fragment,e),ge(w),y=!1},d(e){e&&M(t),Me(u),Me(f),~v&&P[v].d(),x=!1,_()}}}function Dr(e,t,n){let r,{wasm:s}=t,i="spsh";return e.$$set=e=>{"wasm"in e&&n(0,s=e.wasm)},[s,r,i,function(){r=this.value,n(1,r)},function(e){i=e,n(2,i)},function(e){i=e,n(2,i)},function(e){r=e,n(1,r)}]}class Jr extends Ee{constructor(e){super(),Ae(this,e,Dr,zr,o,{wasm:0})}}let Zr;const Kr=new Array(128).fill(void 0);function Qr(e){return Kr[e]}Kr.push(void 0,null,!0,!1);let es=0,ts=null;function ns(){return null!==ts&&0!==ts.byteLength||(ts=new Uint8Array(Zr.memory.buffer)),ts}const rs=new TextEncoder("utf-8"),ss="function"==typeof rs.encodeInto?function(e,t){return rs.encodeInto(e,t)}:function(e,t){const n=rs.encode(e);return t.set(n),{read:e.length,written:n.length}};function is(e,t,n){if(void 0===n){const n=rs.encode(e),r=t(n.length);return ns().subarray(r,r+n.length).set(n),es=n.length,r}let r=e.length,s=t(r);const i=ns();let o=0;for(;o<r;o++){const t=e.charCodeAt(o);if(t>127)break;i[s+o]=t}if(o!==r){0!==o&&(e=e.slice(o)),s=n(s,r,r=o+3*e.length);const t=ns().subarray(s+o,s+r);o+=ss(e,t).written}return es=o,s}let os=null;function as(){return null!==os&&0!==os.byteLength||(os=new Int32Array(Zr.memory.buffer)),os}let ls=Kr.length;function cs(e){const t=Qr(e);return function(e){e<132||(Kr[e]=ls,ls=e)}(e),t}const us=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});function hs(e,t){return us.decode(ns().subarray(e,e+t))}function ps(e){ls===Kr.length&&Kr.push(Kr.length+1);const t=ls;return ls=Kr[t],Kr[t]=e,t}function fs(e,t){const n=t(1*e.length);return ns().set(e,n/1),es=e.length,n}function ds(e,t){return ns().subarray(e/1,e/1+t)}us.decode();class ms{static __wrap(e){const t=Object.create(ms.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();Zr.__wbg_growingpacker_free(e)}static new(e,t){const n=is(e,Zr.__wbindgen_malloc,Zr.__wbindgen_realloc),r=es,s=Zr.growingpacker_new(n,r,t);return ms.__wrap(s)}add_image_to_store(e,t){const n=is(e,Zr.__wbindgen_malloc,Zr.__wbindgen_realloc),r=es,s=fs(t,Zr.__wbindgen_malloc),i=es;Zr.growingpacker_add_image_to_store(this.ptr,n,r,s,i)}add_single_frame(e,t,n,r,s,i,o,a,l,c){const u=fs(e,Zr.__wbindgen_malloc),h=es,p=is(t,Zr.__wbindgen_malloc,Zr.__wbindgen_realloc),f=es;Zr.growingpacker_add_single_frame(this.ptr,u,h,p,f,n,r,s,i,o,a,l,c)}add_spritesheet_frame(e,t,n,r,s,i,o,a,l,c,u,h,p,f){const d=is(e,Zr.__wbindgen_malloc,Zr.__wbindgen_realloc),m=es,g=is(t,Zr.__wbindgen_malloc,Zr.__wbindgen_realloc),v=es;Zr.growingpacker_add_spritesheet_frame(this.ptr,d,m,g,v,n,r,s,i,o,a,l,c,u,h,p,f)}make_packed_image(){try{const r=Zr.__wbindgen_add_to_stack_pointer(-16);Zr.growingpacker_make_packed_image(r,this.ptr);var e=as()[r/4+0],t=as()[r/4+1],n=ds(e,t).slice();return Zr.__wbindgen_free(e,1*t),n}finally{Zr.__wbindgen_add_to_stack_pointer(16)}}make_img_sequence(e){try{const s=Zr.__wbindgen_add_to_stack_pointer(-16);Zr.growingpacker_make_img_sequence(s,this.ptr,e);var t=as()[s/4+0],n=as()[s/4+1],r=ds(t,n).slice();return Zr.__wbindgen_free(t,1*n),r}finally{Zr.__wbindgen_add_to_stack_pointer(16)}}}class gs{static __wrap(e){const t=Object.create(gs.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();Zr.__wbg_iconpacker_free(e)}static new(){const e=Zr.iconpacker_new();return gs.__wrap(e)}add_image(e){Zr.iconpacker_add_image(this.ptr,ps(e))}make_packed_image(){try{const r=Zr.__wbindgen_add_to_stack_pointer(-16);Zr.iconpacker_make_packed_image(r,this.ptr);var e=as()[r/4+0],t=as()[r/4+1],n=ds(e,t).slice();return Zr.__wbindgen_free(e,1*t),n}finally{Zr.__wbindgen_add_to_stack_pointer(16)}}}function vs(){const e={wbg:{}};return e.wbg.__wbindgen_string_get=function(e,t){const n=Qr(t),r="string"==typeof n?n:void 0;var s=null==r?0:is(r,Zr.__wbindgen_malloc,Zr.__wbindgen_realloc),i=es;as()[e/4+1]=i,as()[e/4+0]=s},e.wbg.__wbindgen_object_drop_ref=function(e){cs(e)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){return ps(new Error)},e.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const n=is(Qr(t).stack,Zr.__wbindgen_malloc,Zr.__wbindgen_realloc),r=es;as()[e/4+1]=r,as()[e/4+0]=n},e.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(hs(e,t))}finally{Zr.__wbindgen_free(e,t)}},e.wbg.__wbg_get_27fe3dac1c4d0224=function(e,t){return ps(Qr(e)[t>>>0])},e.wbg.__wbg_length_e498fbc24f9c1d4f=function(e){return Qr(e).length},e.wbg.__wbg_buffer_cf65c07de34b9a08=function(e){return ps(Qr(e).buffer)},e.wbg.__wbg_new_537b7341ce90bb31=function(e){return ps(new Uint8Array(Qr(e)))},e.wbg.__wbg_set_17499e8aa4003ebd=function(e,t,n){Qr(e).set(Qr(t),n>>>0)},e.wbg.__wbg_length_27a2afe8ab42b09f=function(e){return Qr(e).length},e.wbg.__wbindgen_throw=function(e,t){throw new Error(hs(e,t))},e.wbg.__wbindgen_memory=function(){return ps(Zr.memory)},e}function ws(e,t){return Zr=e.exports,ys.__wbindgen_wasm_module=t,os=null,ts=null,Zr}async function ys(e){const t=vs();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"==e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return ws(n,r)}var xs=Object.freeze({__proto__:null,GrowingPacker:ms,IconPacker:gs,default:ys,initSync:function(e){const t=vs();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),ws(new WebAssembly.Instance(e,t),e)},init_panic_hook:function(){Zr.init_panic_hook()},make_icongrid_legacy:function(e,t){try{const i=Zr.__wbindgen_add_to_stack_pointer(-16),o=fs(e,Zr.__wbindgen_malloc),a=es;Zr.make_icongrid_legacy(i,o,a,ps(t));var n=as()[i/4+0],r=as()[i/4+1],s=ds(n,r).slice();return Zr.__wbindgen_free(n,1*r),s}finally{Zr.__wbindgen_add_to_stack_pointer(16)}}});return(async()=>{const e=await(async(e={})=>{let{importHook:t,serverPath:n}=e,r="./build/assets/rust_img_lib-e9f6c2aa.wasm";return null!=n&&(r=n+/[^\/\\]*$/.exec(r)[0]),null!=t&&(r=t(r)),await ys(r),xs})();e.init_panic_hook();return new Jr({target:document.body,props:{wasm:e}})})()}();
//# sourceMappingURL=bundle.js.map
